(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"65a2":function(a,t,e){"use strict";e("88ec")},"714d":function(a,t,e){"use strict";e.r(t);var o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("q-page",{staticClass:"flex flex-center",staticStyle:{"padding-bottom":"50%"}},[e("q-list",{staticClass:"full-width"},[e("q-expansion-item",{staticClass:"bg-info text-grey-1 text-center",attrs:{label:"Opções de consulta",group:"opcoes_consulta_paciente",dense:""}},[e("q-form",{staticClass:"bg-white flex-center full-width row",on:{submit:a.onSubmit,reset:a.onReset}},[e("q-input",{staticClass:"q-pa-xs col-12 col-sm-6 col-md-3 col-lg-3",attrs:{label:"Nome","max-length":"250",dense:""},model:{value:a.consultaUsuario.nome,callback:function(t){a.$set(a.consultaUsuario,"nome",t)},expression:"consultaUsuario.nome"}}),e("q-input",{staticClass:"q-pa-xs col-12 col-sm-6 col-md-2 col-lg-1",attrs:{label:"CPF",mask:"###.###.###-##","max-length":"11",rules:[function(a){return 0==a.length||11==a.length||"O CPF deve conter 11 caracteres"}],"unmasked-value":"",dense:""},model:{value:a.consultaUsuario.cpf,callback:function(t){a.$set(a.consultaUsuario,"cpf",t)},expression:"consultaUsuario.cpf"}}),e("q-input",{staticClass:"q-pa-xs col-12 col-sm-5 col-md-3 col-lg-3",attrs:{label:"Preceptor","max-length":"250",dense:""},model:{value:a.consultaUsuario.preceptor,callback:function(t){a.$set(a.consultaUsuario,"preceptor",t)},expression:"consultaUsuario.preceptor"}}),e("q-select",{staticClass:"q-pa-xs col-12 col-sm-7 col-md-4 col-lg-3",attrs:{options:a.optTerminoCaso,label:"Término do Caso",dense:""},model:{value:a.consultaUsuario.term_caso,callback:function(t){a.$set(a.consultaUsuario,"term_caso",t)},expression:"consultaUsuario.term_caso"}}),e("q-btn",{staticClass:"q-pa-xs q-ma-md col-xs-5 col-sm-3 col-md-2 col-lg-1",attrs:{label:"Consultar",type:"submit",color:"primary",dense:""}})],1)],1)],1),e("div",{staticClass:"q-pa-sm full-width"},[e("q-table",{staticClass:"q-mt-xs",attrs:{data:a.dados,columns:a.columns,"row-key":"name",pagination:a.pagination,"visible-columns":1==a.mostrarMais?a.visibleColumnsCompleto:a.visibleColumnsPadrao},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"top",fn:function(t){return[e("b",[a._v("Pacientes")]),e("q-btn",{attrs:{id:"cadastrar_paciente",to:"/cadastro_edicao_paciente",icon:"add",flat:"",dense:"",color:"primary"}}),e("q-btn",{attrs:{icon:"help",color:"warning",flat:"",dense:""}},[e("q-tooltip",[a._v("\n            A cor amarela indica que a paciente ficou mais de 21 dias sem\n            responder as mensagens da equipe médica\n          ")])],1),e("q-toggle",{attrs:{val:"mostrarMais",label:"Expandir"},model:{value:a.mostrarMais,callback:function(t){a.mostrarMais=t},expression:"mostrarMais"}}),e("q-btn",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"q-ml-md",attrs:{flat:"",round:"",dense:"",icon:t.inFullscreen?"fullscreen_exit":"fullscreen"},on:{click:t.toggleFullscreen}})]}},{key:"header",fn:function(t){return[e("q-tr",[e("q-th",{key:"id_usuario",attrs:{props:t}}),e("q-th",{key:"id_r_mola",attrs:{props:t}}),e("q-th",{key:"numero_mola",attrs:{props:t}},[a._v("Nº mola")]),e("q-th",{key:"nome_paciente",attrs:{props:t}},[a._v("Nome")]),e("q-th",{key:"cpf",attrs:{props:t}},[a._v("CPF")]),e("q-th",{key:"nome_preceptor",attrs:{props:t}},[a._v("Preceptor ")]),e("q-th",{key:"ultima_paciente",attrs:{props:t}},[a._v("UMP"),e("q-btn",{attrs:{icon:"help",color:"primary",flat:"",dense:""}},[e("q-tooltip",[a._v("\n                UMP - Última mensagem enviada pela paciente\n              ")])],1)],1),e("q-th",{key:"ultima_medico",attrs:{props:t}},[a._v("UMM"),e("q-btn",{attrs:{icon:"help",color:"primary",flat:"",dense:""}},[e("q-tooltip",[a._v("\n                UMM - Última mensagem enviada pelo médico\n              ")])],1)],1),e("q-th",{key:"editar",attrs:{props:t}},[a._v("Editar")]),e("q-th",{key:"delegar",attrs:{props:t}},[a._v("Delegar")]),e("q-th",{key:"inativar",attrs:{props:t}},[a._v("Inativar")]),e("q-th",{key:"termino",attrs:{props:t}},[a._v("Término Caso")])],1)]}},{key:"body",fn:function(t){return[e("q-tr",{class:[a.tempoUltimaMsg(t.row.ultima_paciente)?"bg-warning":""],attrs:{props:t}},[e("q-td",{key:"id_usuario",attrs:{props:t}},[a._v("\n            "+a._s(t.row.id_usuario)+"\n          ")]),e("q-td",{key:"id_r_mola",attrs:{props:t}},[a._v("\n            "+a._s(t.row.id_r_mola)+"\n          ")]),e("q-td",{key:"numero_mola",attrs:{props:t}},[a._v("\n            "+a._s(t.row.numero_mola)+"\n          ")]),e("q-td",{key:"nome_paciente",attrs:{props:t}},[a.comparaDataMensagens(t.row.ultima_paciente,t.row.ultima_medico)?e("q-icon",{attrs:{name:"circle",color:"positive"}},[e("q-tooltip",[e("span",{directives:[{name:"show",rawName:"v-show",value:1==a.comparaDataMensagens(t.row.ultima_paciente,t.row.ultima_medico)&&null!=t.row.ultima_paciente,expression:"\n                    comparaDataMensagens(\n                      props.row.ultima_paciente,\n                      props.row.ultima_medico\n                    ) == true && props.row.ultima_paciente != null\n                  "}]},[a._v("\n                  Paciente está aguardando resposta")]),e("span",{directives:[{name:"show",rawName:"v-show",value:null==t.row.ultima_paciente,expression:"props.row.ultima_paciente == null"}]},[a._v("\n                  Paciente ainda não respondeu a mensagem dos médicos")])])],1):a._e(),a._v("\n            "+a._s(t.row.nome_paciente)+"\n          ")],1),e("q-td",{key:"cpf",attrs:{props:t}},[a._v("\n            "+a._s(t.row.cpf)+"\n          ")]),e("q-td",{key:"nome_preceptor",attrs:{props:t}},[a._v("\n            "+a._s(t.row.nome_preceptor)+"\n          ")]),e("q-td",{key:"ultima_paciente",attrs:{props:t}},[e("q-btn",{attrs:{icon:t.row.ultima_paciente>t.row.ultima_medico?"chat_bubble":"chat_bubble_outline",color:null==t.row.ultima_paciente?"white":t.row.ultima_paciente>t.row.ultima_medico?"primary":"dark",flat:""}},[e("q-tooltip",[a._v("\n                "+a._s(null!=t.row.ultima_paciente?t.row.ultima_paciente:"Não há mensagens")+"\n              ")])],1)],1),e("q-td",{key:"ultima_medico",attrs:{props:t}},[e("q-btn",{attrs:{icon:t.row.ultima_medico>t.row.ultima_paciente?"chat_bubble":"chat_bubble_outline",color:null==t.row.ultima_medico?"white":t.row.ultima_medico>t.row.ultima_paciente?"primary":"dark",flat:"",dense:""}},[e("q-tooltip",[a._v("\n                "+a._s(null!=t.row.ultima_medico?t.row.ultima_medico:"Não há mensagens")+"\n              ")])],1)],1),e("q-td",{key:"editar",attrs:{props:t}},[e("q-btn",{attrs:{id:"editar",to:{name:"cadastro_registro_mola",params:{id_paciente:t.row.id_usuario,id_mola:t.row.id_r_mola}},flat:"",dense:"",icon:"edit_note"}})],1),e("q-td",{key:"delegar",attrs:{props:t}},["coordenador"==a.dadosUsuarioLogado.tipo||t.row.nome_preceptor==a.dadosUsuarioLogado.nome?e("q-btn",{attrs:{id:"delegar",flat:"",dense:"",icon:"account_circle",to:{name:"delegacao",params:{id:t.row.id_usuario}}},on:{click:function(e){return a.delegarUsuario(t.row)}}}):e("q-btn",{attrs:{id:"delegar",flat:"",dense:"",icon:"warning"}},[e("q-tooltip",[a._v("Operação não permitida")])],1)],1),e("q-td",{key:"inativar",attrs:{props:t}},[e("q-toggle",{attrs:{color:"green"},on:{input:function(e){a.ativarInativar(e,t.row.id_usuario)}},model:{value:t.row.ativo,callback:function(e){a.$set(t.row,"ativo",e)},expression:"props.row.ativo"}})],1),e("q-td",{key:"termino",attrs:{props:t}},[e("div",{class:null==t.row.term_caso?"divColoridaVerdeTermino":"divColoridaVermelhoTermino"},[e("q-tooltip",[a._v(a._s(null==t.row.term_caso?"Em andamento":t.row.term_caso))])],1)])],1)]}}])}),e("br"),e("q-list",{staticClass:"full-width"},[e("q-expansion-item",{staticClass:"bg-info text-grey-1 text-center",attrs:{label:"Legenda",group:"legenda",dense:""}},[e("q-card",{staticClass:"bg-white flex-center full-width row"},[e("p",{staticClass:"text-justify text-black col-12"},[e("q-btn",{attrs:{icon:"help",color:"warning",flat:"",stack:""}}),a._v(" \n            "),e("span",[a._v("Cor amarela ao fundo indica que a paciente ficou mais de 21\n              dias sem responder a mensagem dos médicos")])],1),e("p",{staticClass:"text-justify text-black col-12 q-mt-xs"},[e("span",{staticClass:"q-ml-sm"},[e("b",[a._v("UMP:      ")]),a._v("Última mensagem\n              enviada pela paciente")])]),e("p",{staticClass:"text-justify text-black col-12"},[e("span",{staticClass:"q-ml-sm"},[e("b",[a._v("UMM:     ")]),a._v("Última mensagem enviada\n              pelo médico")])]),e("p",{staticClass:"text-justify text-black col-12"},[e("q-btn",{attrs:{icon:"chat_bubble",color:"primary",flat:"",stack:""}}),a._v(" \n            "),e("span",[e("b",[a._v("UMP:  ")])]),e("span",[a._v("Paciente enviou a última mensagem depois da última resposta do\n              médico")])],1),e("p",{staticClass:"text-justify text-black col-12"},[e("q-btn",{attrs:{icon:"chat_bubble_outline",color:"dark",flat:"",stack:""}}),a._v(" \n            "),e("span",[e("b",[a._v("UMP:  ")])]),e("span",[a._v("Paciente enviou a última mensagem antes da última resposta do\n              médico")])],1),e("p",{staticClass:"text-justify text-black col-12"},[e("q-btn",{staticClass:"bg-warning",attrs:{flat:"",icon:"chat_bubble_outline",color:"white",stack:""}}),a._v(" \n            "),e("span",[e("b",[a._v("UMP:  ")])]),e("span",[a._v("Paciente não enviou nenhuma mensagem")])],1),e("p",{staticClass:"text-justify text-black col-12"},[e("q-btn",{attrs:{icon:"chat_bubble",color:"primary",flat:"",stack:""}}),a._v(" \n            "),e("span",[e("b",[a._v("UMM:  ")])]),e("span",[a._v("Médico enviou a última mensagem depois da última resposta da\n              paciente")])],1),e("p",{staticClass:"text-justify text-black col-12"},[e("q-btn",{attrs:{flat:"",icon:"chat_bubble_outline",color:"dark",stack:""}}),a._v(" \n            "),e("span",[e("b",[a._v("UMM:  ")])]),e("span",[a._v("Médico enviou a última mensagem antes da última resposta da\n              paciente")])],1),e("p",{staticClass:"text-justify text-black col-12"},[e("q-btn",{staticClass:"bg-warning",attrs:{flat:"",icon:"chat_bubble_outline",color:"white",stack:""}}),a._v(" \n            "),e("span",[e("b",[a._v("UMM:  ")])]),e("span",[a._v("Médico não enviou nenhuma mensagem")])],1)])],1)],1)],1)],1)},s=[],n=e("ded3"),i=e.n(n),r=(e("e6cf"),e("ddb0"),e("4e82"),e("2f62")),l={name:"PageIndex",data(){return{mostrarMais:!1,consultaUsuario:{nome:"",cpf:"",preceptor:"",term_caso:"",usuario_logado:null},visibleColumnsCompleto:["numero_mola","nome_paciente","cpf","nome_preceptor","ultima_medico","ultima_paciente","editar","delegar","inativar","termino"],visibleColumnsPadrao:["numero_mola","nome_paciente","cpf","editar","delegar","inativar","termino"],pagination:{rowsPerPage:10},optTerminoCaso:["Todos","Evasão (abandono do serviço com hCG positivo)","Molar completo","Molar incompleto","NTG Completo","NTG Incompleto","Em andamento","Óbito"],corTerminoCaso:[null,"green","green","green","green","green","red"],columns:[{name:"id_usuario",label:"Id Paciente",align:"left"},{name:"id_r_mola",label:"Id Mola",align:"left"},{name:"numero_mola",label:"Nº Mola",align:"left"},{name:"nome_paciente",label:"Nome",align:"left"},{name:"cpf",label:"CPF",align:"left"},{name:"nome_preceptor",label:"Preceptor",align:"left"},{name:"ultima_paciente",label:"UMP",align:"left"},{name:"ultima_medico",label:"UMM",align:"left"},{name:"editar",label:"Editar",align:"center"},{name:"delegar",label:"Delegar",align:"center"},{name:"inativar",label:"Inativar",align:"center"},{name:"termino",label:"Término",align:"center"}],dados:[],listaMolas:[]}},async mounted(){this.consultaUsuario.id_inst=this.dadosUsuarioLogado.id_inst,this.consultaUsuario.usuario_logado=this.dadosUsuarioLogado.id_usuario;let a=await this.consultarPacientes(this.consultaUsuario,!0);a=a.resultado.map((async a=>{await this.carregarRegistrosMola(a.id_usuario);let t="";for(let e=0;e<this.listaMolas.length;e++)a.id_r_mola==this.listaMolas[e].id_r_mola&&(t=t.concat(e+1),t=t.concat("ª"));return a.id_usuario=a.id_usuario,a.id_r_mola=a.id_r_mola,a.numero_mola=t,a.nome_paciente=a.nome_paciente,a.cpf=a.cpf,a.nome_preceptor=a.nome_preceptor,a.ativo=Boolean(a.ativo),a})),Promise.all(a).then((a=>{this.dados=a,this.dados=this.dados.sort((function(a,t){return 0==a.nome_paciente.localeCompare(t.nome_paciente)?a.id_r_mola<t.id_r_mola?-1:1:a.nome_paciente.localeCompare(t.nome_paciente)}))})).catch((a=>{console.error(a)}))},methods:{carregarRegistrosMola(a){return new Promise(((t,e)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{this.listaMolas=[];for(let t=0;t<a.data.resultado.length;t++)this.listaMolas.unshift(a.data.resultado[t]);t(a.data.resultado)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),e(a)}))}))},delegarUsuario(a){this.$store.dispatch("principal/delegarUsuario",a).then((()=>{}))},async onSubmit(){let a=await this.consultarPacientes(this.consultaUsuario,!1);a=a.resultado.map((async a=>{await this.carregarRegistrosMola(a.id_usuario);let t="";for(let e=0;e<this.listaMolas.length;e++)a.id_r_mola==this.listaMolas[e].id_r_mola&&(t=t.concat(e+1),t=t.concat("ª"));return a.id_usuario=a.id_usuario,a.id_r_mola=a.id_r_mola,a.numero_mola=t,a.nome_paciente=a.nome_paciente,a.cpf=a.cpf,a.nome_preceptor=a.nome_preceptor,a.ativo=Boolean(a.ativo),a})),Promise.all(a).then((a=>{this.dados=a,this.dados=this.dados.sort((function(a,t){return 0==a.nome_paciente.localeCompare(t.nome_paciente)?a.id_r_mola<t.id_r_mola?-1:1:a.nome_paciente.localeCompare(t.nome_paciente)}))})).catch((a=>{console.error(a)}))},onReset(){},async consultarPacientes(a,t){return 1==t?a.term_caso="Em andamento":"Todos"==a.term_caso&&(a.term_caso=""),new Promise(((e,o)=>{this.$axios.post("/consultar_pacientes",a).then((o=>{1==t&&(a.term_caso=""),e(o.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},async ativarInativar(a,t){return new Promise(((e,o)=>{this.$axios.post("/ativaInativarUsuario",{id_usuario:Number(t),valor:Number(a)}).then((a=>{e(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},comparaDataMensagens(a,t){if(null!=a&&null!=t){let e=a.substr(0,2),o=a.substr(3,2),s=a.substr(6,4),n=a.substr(11,2),i=a.substr(14,2),r=a.substr(17,2),l=new Date(s,o,e,n,i,r).getTime(),c=t.substr(0,2),m=t.substr(3,2),p=t.substr(6,4),u=t.substr(11,2),d=t.substr(14,2),_=t.substr(17,2),b=new Date(p,m,c,u,d,_).getTime(),g=l>b;return g}return!0},tempoUltimaMsg(a){if(null!=a){let t=a.substr(0,2),e=a.substr(3,2),o=a.substr(6,4),s=a.substr(11,2),n=a.substr(14,2),i=a.substr(17,2),r=new Date(o,e,t,s,n,i).getTime(),l=(new Date).getTime(),c=l-r,m=c/864e5;return m>21}return!0}},computed:i()({},Object(r["c"])("principal",["usuarioLogado","dadosUsuarioLogado"]))},c=l,m=(e("65a2"),e("2877")),p=e("9989"),u=e("1c1c"),d=e("3b73"),_=e("0378"),b=e("27f9"),g=e("ddd8"),v=e("9c40"),h=e("eaac"),f=e("05c0"),w=e("9564"),q=e("bd08"),k=e("357e"),x=e("db86"),y=e("0016"),C=e("f09f"),M=e("eebe"),U=e.n(M),P=Object(m["a"])(c,o,s,!1,null,"1dd50fef",null);t["default"]=P.exports;U()(P,"components",{QPage:p["a"],QList:u["a"],QExpansionItem:d["a"],QForm:_["a"],QInput:b["a"],QSelect:g["a"],QBtn:v["a"],QTable:h["a"],QTooltip:f["a"],QToggle:w["a"],QTr:q["a"],QTh:k["a"],QTd:x["a"],QIcon:y["a"],QCard:C["a"]})},"88ec":function(a,t,e){}}]);