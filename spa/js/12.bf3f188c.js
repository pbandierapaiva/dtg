(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{f1f1:function(a,e,t){"use strict";t.r(e);var o=function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("q-page",{staticClass:"flex flex-center"},[t("div",{staticClass:"flex-center q-gutter-md"},[t("span",[t("b",[a._v("Id: ")]),a._v(a._s(a.dadosPaciente.id_paciente))]),t("span",[t("b",[a._v("Nome: ")]),a._v(a._s(a.dadosPaciente.nome))]),t("span",[t("b",[a._v("CPF: ")]),a._v(a._s(a.dadosPaciente.cpf))]),t("span",[t("b",[a._v("Data Nascimento: ")]),a._v(a._s(a.dadosPaciente.dataNasc))]),t("span",[t("b",[a._v("Preceptor: ")]),a._v(a._s(a.dadosPaciente.preceptor))])]),t("div",{staticClass:"full-width",staticStyle:{"padding-left":"20%"}},[t("q-table",{staticStyle:{width:"80%"},attrs:{data:a.dataResponsaveis,columns:a.columnsResponsaveis,"row-key":"name",pagination:a.pagination,title:"Responsáveis pela Paciente"},on:{"update:pagination":function(e){a.pagination=e}},scopedSlots:a._u([{key:"body",fn:function(e){return[t("q-tr",{attrs:{props:e}},[t("q-td",{key:"id",attrs:{props:e}},[a._v("\n            "+a._s(e.row.id)+"\n          ")]),t("q-td",{key:"nome",attrs:{props:e}},[a._v("\n            "+a._s(e.row.nome)+"\n          ")]),t("q-td",{key:"ufCrm",attrs:{props:e}},[a._v("\n            "+a._s(e.row.ufCrm)+"\n          ")]),t("q-td",{key:"crm",attrs:{props:e}},[a._v("\n            "+a._s(e.row.crm)+"\n          ")]),t("q-td",{key:"categoria",attrs:{props:e}},[a._v("\n            "+a._s(e.row.categoria)+"\n          ")]),t("q-td",{key:"excluir",attrs:{props:e}},[t("q-btn",{attrs:{id:"btnExcluir",flat:"",dense:"",icon:"delete"},on:{click:function(){a.excluirDelegacao(e.row.id)}}})],1)],1)]}}])})],1),t("q-btn",{staticClass:"q-pa-xs q-ma-md",attrs:{label:"Novo Responsável",color:"primary"},on:{click:a.abrirConsultaMedicos}}),t("q-btn",{staticClass:"q-pa-xs q-ma-md",attrs:{label:"Voltar",color:"primary",to:"/consulta_paciente"}}),t("q-dialog",{attrs:{"full-width":""},model:{value:a.consultaMedicosDelegacao,callback:function(e){a.consultaMedicosDelegacao=e},expression:"consultaMedicosDelegacao"}},[t("q-card",[t("q-toolbar",{staticClass:"bg-primary text-white"},[t("q-toolbar-title",[a._v("Consulta Médicos para delegação")]),t("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),t("q-card-section",{staticClass:"q-pt-none"},[t("q-input",{attrs:{type:"text",label:"CRM ou Nome"},model:{value:a.filtroPopup,callback:function(e){a.filtroPopup=e},expression:"filtroPopup"}}),t("br"),t("q-table",{staticClass:"col-4",attrs:{data:a.dataConsultaMedicos,columns:a.columnsConsultaMedicos,"row-key":"name",pagination:a.pagination},on:{"update:pagination":function(e){a.pagination=e}},scopedSlots:a._u([{key:"body",fn:function(e){return[t("q-tr",{attrs:{props:e}},[t("q-td",{key:"id",attrs:{props:e}},[a._v("\n                "+a._s(e.row.id_med_coord)+"\n              ")]),t("q-td",{key:"nome",attrs:{props:e}},[a._v("\n                "+a._s(e.row.nome)+"\n              ")]),t("q-td",{key:"ufCrm",attrs:{props:e}},[a._v("\n                "+a._s(e.row.ufCrm)+"\n              ")]),t("q-td",{key:"crm",attrs:{props:e}},[a._v("\n                "+a._s(e.row.crm)+"\n              ")]),t("q-td",{key:"categoria",attrs:{props:e}},[a._v("\n                "+a._s(e.row.categoria)+"\n              ")]),t("q-td",{key:"confirmar",attrs:{props:e}},[t("q-btn",{staticClass:"q-pa-xs q-ma-md",attrs:{id:"btnConfrimar",label:"Confirmar",color:"primary"},on:{click:function(){a.cadastrarDelegado(a.dadosPaciente.id_paciente,e.row.id_med_coord)}}})],1)],1)]}}])})],1)],1)],1)],1)},s=[],i=(t("e6cf"),{data(){return{dadosPaciente:{id_paciente:null,nome:"",cpf:"",dataNasc:null,preceptor:""},consultaMedicosDelegacao:!1,filtroPopup:"",pagination:{rowsPerPage:7},columnsResponsaveis:[{name:"id",label:"ID",align:"left",field:a=>a.id,format:a=>`${a}`},{name:"nome",label:"Nome",align:"left",field:a=>a.nome,format:a=>`${a}`},{name:"ufCrm",label:"UF CRM",align:"left",field:a=>a.ufCrm,format:a=>`${a}`},{name:"crm",label:"CRM",align:"left",field:a=>a.crm,format:a=>`${a}`},{name:"categoria",label:"Categoria",align:"left",field:a=>a.categoria,format:a=>`${a}`},{name:"excluir",label:"Excluir",align:"center"}],dataResponsaveis:[],columnsConsultaMedicos:[{name:"id",label:"ID",align:"left",field:a=>a.id,format:a=>`${a}`},{name:"nome",label:"Nome",align:"left",field:a=>a.nome,format:a=>`${a}`},{name:"ufCrm",label:"UF CRM",align:"left",field:a=>a.ufCrm,format:a=>`${a}`},{name:"crm",label:"CRM",align:"left",field:a=>a.crm,format:a=>`${a}`},{name:"categoria",label:"Categoria",align:"left",field:a=>a.categoria,format:a=>`${a}`},{name:"confirmar",label:"Confirmar",align:"center"}],dataConsultaMedicos:[{id:1,nome:"Michael Scott",crm:"56.789",ufCrm:"RJ",categoria:"Contratado"},{id:2,nome:"Holly Flax",crm:"67.890",ufCrm:"RJ",categoria:"Pós-Graduando"},{id:3,nome:"Ryan Howard",crm:"78.901",ufCrm:"MG",categoria:"Docente"},{id:4,nome:"Angela Martin",crm:"89.012",ufCrm:"MG",categoria:"Outros"}]}},async mounted(){if(this.dadosPaciente.id_paciente=this.$route.params.id,null!=this.dadosPaciente.id_paciente&&void 0!=this.dadosPaciente.id_paciente){await this.carregarDadosPaciente(this.dadosPaciente.id_paciente);let a=await this.consultarDelegados(this.dadosPaciente.id_paciente);this.dataResponsaveis=a.resultado}else this.$router.push({name:"consulta_paciente"})},methods:{async abrirConsultaMedicos(){let a=await this.consultarMedicos();this.dataConsultaMedicos=a.resultado,this.consultaMedicosDelegacao=!0},carregarDadosPaciente(a){return new Promise(((e,t)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.dadosPaciente.nome=a.data.resultado[0].nome,this.dadosPaciente.cpf=a.data.resultado[0].cpf,this.dadosPaciente.preceptor=a.data.resultado[0].nome_preceptor,this.dadosPaciente.dataNasc=a.data.resultado[0].data_nasc.substring(0,10);var t=this.dadosPaciente.dataNasc.split("-")[0],o=this.dadosPaciente.dataNasc.split("-")[1],s=this.dadosPaciente.dataNasc.split("-")[2];this.dadosPaciente.dataNasc=("0"+s).slice(-2)+"/"+("0"+o).slice(-2)+"/"+t,e(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))},consultarDelegados(a){return new Promise(((e,t)=>{this.$axios.post("/consultar_delegados",{id_paciente:a}).then((a=>{e(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))},consultarMedicos(){let a=this.dadosPaciente.id_paciente;return new Promise(((e,t)=>{this.$axios.post("/consultar_medicos_delegacao",{id_paciente:a}).then((a=>{e(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))},cadastrarDelegado(a,e){return new Promise(((t,o)=>{this.$axios.post("/incluir_delegacao",{id_paciente:a,id_med_coord:e}).then((async a=>{let e=await this.consultarDelegados(this.dadosPaciente.id_paciente);this.dataResponsaveis=e.resultado,this.consultaMedicosDelegacao=!1,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},excluirDelegacao(a){return new Promise(((e,t)=>{confirm("Gostaria mesmo de escluir esta delegação")&&this.$axios.post("/excluir_delegacao",{id_delegacao:a}).then((async a=>{let t=await this.consultarDelegados(this.dadosPaciente.id_paciente);this.dataResponsaveis=t.resultado,this.consultaMedicosDelegacao=!1,e(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))}}}),n=i,r=t("2877"),c=t("9989"),d=t("eaac"),l=t("bd08"),p=t("db86"),u=t("9c40"),m=t("24e8"),f=t("f09f"),_=t("65c6"),g=t("6ac5"),h=t("a370"),b=t("27f9"),v=t("7f67"),C=t("eebe"),P=t.n(C),w=Object(r["a"])(n,o,s,!1,null,null,null);e["default"]=w.exports;P()(w,"components",{QPage:c["a"],QTable:d["a"],QTr:l["a"],QTd:p["a"],QBtn:u["a"],QDialog:m["a"],QCard:f["a"],QToolbar:_["a"],QToolbarTitle:g["a"],QCardSection:h["a"],QInput:b["a"]}),P()(w,"directives",{ClosePopup:v["a"]})}}]);