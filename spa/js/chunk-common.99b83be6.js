(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"032e":function(a,t,o){"use strict";o.r(t);var s=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-card",[o("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[o("q-toolbar-title",[a._v("Cadastro Tomografia")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-form",{staticClass:"full-width row",on:{submit:function(t){return t.stopPropagation(),a.onSubmit(t)},reset:a.onReset}},[o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("Nome Paciente: ")]),a._v(a._s(a.nome_paciente))]),o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("CPF: ")]),a._v(a._s(a._f("cpf")(a.cpf_paciente)))]),o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("Número Mola:")]),a._v(" "+a._s(a.numero_mola))]),o("q-input",{staticClass:"q-pa-xs col-12",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataTomografia||"Digite uma data válida"}],label:"Data do Exame",mask:"##/##/####"},on:{input:function(t){return a.validarData("input")}},scopedSlots:a._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendario=!0}}},[o("q-dialog",{model:{value:a.popupAbrirCalendario,callback:function(t){a.popupAbrirCalendario=t},expression:"popupAbrirCalendario"}},[o("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario")}},model:{value:a.dataCalendario,callback:function(t){a.dataCalendario=t},expression:"dataCalendario"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroTomografia.data_tomografia,callback:function(t){a.$set(a.cadastroTomografia,"data_tomografia",t)},expression:"cadastroTomografia.data_tomografia"}}),o("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.tomografia&&null!=a.cadastroTomografia.tomografia&&""!=a.cadastroTomografia.tomografia,expression:"\n        cadastroTomografia.tomografia != undefined &&\n          cadastroTomografia.tomografia != null &&\n          cadastroTomografia.tomografia != ''\n      "}],staticClass:"col-12 q-mt-md text-center"},[o("span",[a._v("Alterar Imagem")]),o("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0,a.tipo_atual_imagem="tomografia"}}})],1),o("div",{staticClass:"col-12 text-center"},[o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.tomografia&&null!=a.cadastroTomografia.tomografia&&""!=a.cadastroTomografia.tomografia,expression:"\n          cadastroTomografia.tomografia != undefined &&\n            cadastroTomografia.tomografia != null &&\n            cadastroTomografia.tomografia != ''\n        "}]},[o("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroTomografia.tomografia&&void 0!=a.cadastroTomografia.tomografia?a.cadastroTomografia.tomografia:"Não há")+"  ")]),o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.tomografia&&null!=a.cadastroTomografia.tomografia&&""!=a.cadastroTomografia.tomografia,expression:"\n          cadastroTomografia.tomografia != undefined &&\n            cadastroTomografia.tomografia != null &&\n            cadastroTomografia.tomografia != ''\n        "}]},[o("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_imagem))]),a._v("  \n    ")]),o("div",{staticClass:"col-12 text-center"},[o("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.tomografia&&null!=a.cadastroTomografia.tomografia&&""!=a.cadastroTomografia.tomografia,expression:"\n          cadastroTomografia.tomografia != undefined &&\n            cadastroTomografia.tomografia != null &&\n            cadastroTomografia.tomografia != ''\n        "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_tomografia,alt:"image",id:"imagem_tomografia"}})],1),o("div",{staticClass:"col-12"},[o("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroTomografia.tomografia||null==a.cadastroTomografia.tomografia||""==a.cadastroTomografia.tomografia,expression:"\n          cadastroTomografia.tomografia == undefined ||\n            cadastroTomografia.tomografia == null ||\n            cadastroTomografia.tomografia == ''\n        "}],attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1),o("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.laudo_tomografia&&null!=a.cadastroTomografia.laudo_tomografia&&""!=a.cadastroTomografia.laudo_tomografia,expression:"\n        cadastroTomografia.laudo_tomografia != undefined &&\n          cadastroTomografia.laudo_tomografia != null &&\n          cadastroTomografia.laudo_tomografia != ''\n      "}],staticClass:"col-12 q-mt-md flex flex-center"},[o("span",[a._v("Alterar Imagem")]),o("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0,a.tipo_atual_imagem="laudo tomografia"}}})],1),o("div",{staticClass:"col-12 text-center"},[o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.laudo_tomografia&&null!=a.cadastroTomografia.laudo_tomografia&&""!=a.cadastroTomografia.laudo_tomografia,expression:"\n          cadastroTomografia.laudo_tomografia != undefined &&\n            cadastroTomografia.laudo_tomografia != null &&\n            cadastroTomografia.laudo_tomografia != ''\n        "}]},[o("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroTomografia.laudo_tomografia&&void 0!=a.cadastroTomografia.laudo_tomografia?a.cadastroTomografia.laudo_tomografia:"Não há")+"  ")]),o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.laudo_tomografia&&null!=a.cadastroTomografia.laudo_tomografia&&""!=a.cadastroTomografia.laudo_tomografia,expression:"\n          cadastroTomografia.laudo_tomografia != undefined &&\n            cadastroTomografia.laudo_tomografia != null &&\n            cadastroTomografia.laudo_tomografia != ''\n        "}]},[o("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_laudo))]),a._v("  \n    ")]),o("div",{staticClass:"col-12 text-center"},[o("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.laudo_tomografia&&null!=a.cadastroTomografia.laudo_tomografia&&""!=a.cadastroTomografia.laudo_tomografia,expression:"\n          cadastroTomografia.laudo_tomografia != undefined &&\n            cadastroTomografia.laudo_tomografia != null &&\n            cadastroTomografia.laudo_tomografia != ''\n        "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_laudo_tomografia,alt:"image",id:"imagem_laudo_tomografia"}})],1),o("div",{staticClass:"col-12"},[o("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroTomografia.laudo_tomografia||null==a.cadastroTomografia.laudo_tomografia||""==a.cadastroTomografia.laudo_tomografia,expression:"\n          cadastroTomografia.laudo_tomografia == undefined ||\n            cadastroTomografia.laudo_tomografia == null ||\n            cadastroTomografia.laudo_tomografia == ''\n        "}],attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_laudo},on:{uploadFinalizado:a.atualizarImagem}})],1),o("div",{staticClass:"col-12 flex flex-center"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Gravar Dados",color:"primary",type:"submit"}}),o("q-btn",{directives:[{name:"show",rawName:"v-show",value:void 0==a.id_tomografia||null==a.id_tomografia||""==a.id_tomografia,expression:"\n          id_tomografia == undefined ||\n            id_tomografia == null ||\n            id_tomografia == ''\n        "}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Limpar",color:"primary",type:"reset"}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Voltar",color:"primary"}})],1)],1),o("q-dialog",{model:{value:a.popupUploadImagem,callback:function(t){a.popupUploadImagem=t},expression:"popupUploadImagem"}},[o("q-card",{staticClass:"full-width row"},[o("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[o("q-toolbar-title",[a._v("Upload Imagem")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-card-section",{staticClass:"col-12"},[o("UploadImagem",{attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_atual_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1)],1)],1)],1)},i=[],r=o("ded3"),e=o.n(r),l=(o("e6cf"),o("7215")),d=o("2f62"),c=o("2a19"),n={name:"cadastroTomografia",components:{UploadImagem:l["a"]},computed:e()({},Object(d["c"])("principal",["dadosUsuarioLogado","getUrl"])),filters:{cpf(a){return void 0!=a&&(a=a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)),a}},async mounted(){this.cadastroTomografia.cadastrante=this.dadosUsuarioLogado.id_usuario,""!=this.id_paciente&&void 0!=this.id_paciente&&await this.carregarDadosPaciente(this.id_paciente);let a=await this.carregarRegistrosMola(this.id_paciente);for(let t=0;t<a.length;t++)this.id_r_mola==a[t].id_r_mola&&(this.numero_mola=this.numero_mola.concat(t+1),this.numero_mola=this.numero_mola.concat("ª"));void 0!=this.id_tomografia&&null!=this.id_tomografia?(await this.carregarTomografia(this.id_tomografia),await this.atualizarImagem(this.cadastroTomografia.tomografia,"tomografia"),await this.atualizarImagem(this.cadastroTomografia.laudo_tomografia,"laudo tomografia")):this.dataCalendario=this.atribuirDataCalendario()},data(){return{cadastroTomografia:{id_tomografia:"",data_tomografia:"",id_revisor:"",revisor:"",id_cadastrante:"",cadastrante:"",tomografia:"",laudo_tomografia:""},popupAbrirCalendario:!1,dataCalendario:"",tipo_imagem:"tomografia",tipo_laudo:"laudo tomografia",tipo_atual_imagem:null,url_tomografia:"",url_laudo_tomografia:"",popupUploadImagem:!1,validaDataTomografia:!0,nome_paciente:"",cpf_paciente:"",numero_mola:""}},methods:{carregarTomografia(a){return new Promise(((t,o)=>{this.$axios.post("/dados_tomografia",{id_tomografia:a}).then((a=>{let o=a.data.resultado[0];""!=o.data_tomografia?this.dataCalendario=o.data_tomografia:this.dataCalendario=this.atribuirDataCalendario(),this.cadastroTomografia=o,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},incluirTomografia(a){return new Promise(((t,o)=>{let s=a;var i=s.data_tomografia.substring(0,2),r=s.data_tomografia.substring(3,5),e=s.data_tomografia.substring(6,10);s.data_tomografia=e+"-"+("0"+r).slice(-2)+"-"+("0"+i).slice(-2),""==s.revisor?s.revisor=null:s.revisor=s.revisor,""==s.tomografia?s.tomografia=null:s.tomografia=s.tomografia,""==s.laudo_tomografia?s.laudo_tomografia=null:s.laudo_tomografia=s.laudo_tomografia;let l=s.data_tomografia,d=this.id_r_mola,n=s.tomografia,m=s.laudo_tomografia,u=this.dadosUsuarioLogado.id_usuario;this.$axios.post("/incluir_tomografia",{data_tomografia:l,tomografia:n,laudo_tomografia:m,cadastrante:u,id_r_mola:d}).then((a=>{c["a"].create({message:"Dados da Tomografia incluídos com sucesso.",color:"positive"}),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},alterarTomografia(a,t){return new Promise(((o,s)=>{let i=t;var r=i.data_tomografia.substring(0,2),e=i.data_tomografia.substring(3,5),l=i.data_tomografia.substring(6,10);i.data_tomografia=l+"-"+("0"+e).slice(-2)+"-"+("0"+r).slice(-2),""==i.revisor?i.revisor=null:i.revisor=i.revisor,""==i.tomografia?i.tomografia=null:i.tomografia=i.tomografia,""==i.laudo_tomografia?i.laudo_tomografia=null:i.laudo_tomografia=i.laudo_tomografia;let d=i.data_tomografia,n=i.tomografia,m=i.laudo_tomografia;this.$axios.post("/alterar_tomografia",{data_tomografia:d,tomografia:n,laudo_tomografia:m,id_tomografia:a}).then((a=>{c["a"].create({message:"Dados da Tomografia alterados com sucesso.",color:"positive"}),o(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),s(a)}))}))},carregarRegistrosMola(a){return new Promise(((t,o)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{let o=[];for(let t=0;t<a.data.resultado.length;t++)o.unshift(a.data.resultado[t]);t(o)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},carregarDadosPaciente(a){return new Promise(((t,o)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.nome_paciente=a.data.resultado[0].nome,this.cpf_paciente=a.data.resultado[0].cpf,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},onSubmit(){void 0!=this.id_tomografia&&null!=this.id_tomografia?this.alterarTomografia(this.id_tomografia,this.cadastroTomografia):this.incluirTomografia(this.cadastroTomografia),console.log("cadastro",this.cadastroTomografia),this.$emit("recarregarTomografia")},onReset(){this.cadastroTomografia.data_tomografia="",this.cadastroTomografia.tomografia="",this.cadastroTomografia.laudo_tomografia="",this.dataCalendario=this.atribuirDataCalendario()},validarData(a){this.popupAbrirCalendario=!1;let t="",o="",s="";if(this.validaDataTomografia=!0,"calendario"==a?(null==this.dataCalendario&&(this.dataCalendario=this.atribuirDataCalendario()),this.cadastroTomografia.data_tomografia=this.dataCalendario):"input"==a&&(""!=this.cadastroTomografia.data_tomografia?this.dataCalendario=this.cadastroTomografia.data_tomografia:this.dataCalendario=this.atribuirDataCalendario()),this.cadastroTomografia.data_tomografia.length>=2&&(t=this.cadastroTomografia.data_tomografia.substring(0,2),t=Number(t),(0==t||t>31)&&(this.validaDataTomografia=!1),this.cadastroTomografia.data_tomografia.length>=5&&(o=this.cadastroTomografia.data_tomografia.substring(3,5),o=Number(o),(0==o||o>12)&&(this.validaDataTomografia=!1),30!=t&&31!=t||2!=o||(this.validaDataTomografia=!1),31!=t||4!=o&&6!=o&&9!=o&&11!=o||(this.validaDataTomografia=!1)),10==this.cadastroTomografia.data_tomografia.length)){s=this.cadastroTomografia.data_tomografia.substring(6,10),s=Number(s);let a=!1;(s%4==0&&s%100!=0||s%400==0)&&(a=!0),29==t&&2==o&&0==a&&(this.validaDataTomografia=!1);let i=new Date;s>i.getFullYear()&&(this.validaDataTomografia=!1);let r=new Date(s,o-1,t);r>i&&(this.validaDataTomografia=!1)}},atribuirDataCalendario(){let a=new Date;var t=a.getDate(),o=a.getMonth(),s=a.getFullYear();return("0"+t).slice(-2)+"/"+("0"+(o+1)).slice(-2)+"/"+s},atualizarImagem(a,t=null){"tomografia"==t?(this.cadastroTomografia.tomografia=a,this.url_tomografia=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1):"laudo tomografia"==t&&(this.cadastroTomografia.laudo_tomografia=a,this.url_laudo_tomografia=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1)}},props:["id_paciente","id_r_mola","id_tomografia"]},m=n,u=o("2877"),g=o("f09f"),p=o("65c6"),_=o("6ac5"),h=o("9c40"),f=o("a370"),v=o("0378"),x=o("27f9"),b=o("0016"),C=o("24e8"),w=o("52ee"),U=o("068f"),q=o("7f67"),D=o("eebe"),T=o.n(D),I=Object(u["a"])(m,s,i,!1,null,null,null);t["default"]=I.exports;T()(I,"components",{QCard:g["a"],QToolbar:p["a"],QToolbarTitle:_["a"],QBtn:h["a"],QCardSection:f["a"],QForm:v["a"],QInput:x["a"],QIcon:b["a"],QDialog:C["a"],QDate:w["a"],QImg:U["a"]}),T()(I,"directives",{ClosePopup:q["a"]})},"1a72":function(a,t,o){"use strict";o.r(t);var s=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-card",[o("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[o("q-toolbar-title",[a._v("Cadastro Ultrassom")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-form",{staticClass:"full-width row",on:{submit:function(t){return t.stopPropagation(),a.onSubmit(t)},reset:a.onReset}},[o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("Nome Paciente: ")]),a._v(a._s(a.nome_paciente))]),o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("CPF: ")]),a._v(a._s(a._f("cpf")(a.cpf_paciente)))]),o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("Número Mola:")]),a._v(" "+a._s(a.numero_mola))]),o("q-input",{staticClass:"q-pa-xs col-12 ",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataUltrassom||"Digite uma data válida"}],label:"Data do Exame",mask:"##/##/####"},on:{input:function(t){return a.validarData("input")}},scopedSlots:a._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendario=!0}}},[o("q-dialog",{model:{value:a.popupAbrirCalendario,callback:function(t){a.popupAbrirCalendario=t},expression:"popupAbrirCalendario"}},[o("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario")}},model:{value:a.dataCalendario,callback:function(t){a.dataCalendario=t},expression:"dataCalendario"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroUltrassom.data_ultrassom,callback:function(t){a.$set(a.cadastroUltrassom,"data_ultrassom",t)},expression:"cadastroUltrassom.data_ultrassom"}}),o("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.ultrassom&&null!=a.cadastroUltrassom.ultrassom&&""!=a.cadastroUltrassom.ultrassom,expression:"\n        cadastroUltrassom.ultrassom != undefined &&\n          cadastroUltrassom.ultrassom != null &&\n          cadastroUltrassom.ultrassom != ''\n      "}],staticClass:"col-12 q-mt-md text-center"},[o("span",[a._v("Alterar Imagem")]),o("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0,a.tipo_atual_imagem="ultrassom"}}})],1),o("div",{staticClass:"col-12 text-center"},[o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.ultrassom&&null!=a.cadastroUltrassom.ultrassom&&""!=a.cadastroUltrassom.ultrassom,expression:"\n          cadastroUltrassom.ultrassom != undefined &&\n            cadastroUltrassom.ultrassom != null &&\n            cadastroUltrassom.ultrassom != ''\n        "}]},[o("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroUltrassom.ultrassom&&void 0!=a.cadastroUltrassom.ultrassom?a.cadastroUltrassom.ultrassom:"Não há"))]),a._v(" \n      "),o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.ultrassom&&null!=a.cadastroUltrassom.ultrassom&&""!=a.cadastroUltrassom.ultrassom,expression:"\n          cadastroUltrassom.ultrassom != undefined &&\n            cadastroUltrassom.ultrassom != null &&\n            cadastroUltrassom.ultrassom != ''\n        "}]},[o("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_imagem))])]),o("div",{staticClass:"col-12 text-center"},[o("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.ultrassom&&null!=a.cadastroUltrassom.ultrassom&&""!=a.cadastroUltrassom.ultrassom,expression:"\n          cadastroUltrassom.ultrassom != undefined &&\n            cadastroUltrassom.ultrassom != null &&\n            cadastroUltrassom.ultrassom != ''\n        "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_ultrassom,alt:"image",id:"imagem_ultrassom"}})],1),o("div",{staticClass:"col-12"},[o("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroUltrassom.ultrassom||null==a.cadastroUltrassom.ultrassom||""==a.cadastroUltrassom.ultrassom,expression:"\n          cadastroUltrassom.ultrassom == undefined ||\n            cadastroUltrassom.ultrassom == null ||\n            cadastroUltrassom.ultrassom == ''\n        "}],attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1),o("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.laudo_ultrassom&&null!=a.cadastroUltrassom.laudo_ultrassom&&""!=a.cadastroUltrassom.laudo_ultrassom,expression:"\n        cadastroUltrassom.laudo_ultrassom != undefined &&\n          cadastroUltrassom.laudo_ultrassom != null &&\n          cadastroUltrassom.laudo_ultrassom != ''\n      "}],staticClass:"col-12 q-mt-md text-center"},[o("span",[a._v("Alterar Imagem")]),o("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0,a.tipo_atual_imagem="laudo ultrassom"}}})],1),o("div",{staticClass:"col-12 text-center"},[o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.laudo_ultrassom&&null!=a.cadastroUltrassom.laudo_ultrassom&&""!=a.cadastroUltrassom.laudo_ultrassom,expression:"\n          cadastroUltrassom.laudo_ultrassom != undefined &&\n            cadastroUltrassom.laudo_ultrassom != null &&\n            cadastroUltrassom.laudo_ultrassom != ''\n        "}]},[o("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroUltrassom.laudo_ultrassom&&void 0!=a.cadastroUltrassom.laudo_ultrassom?a.cadastroUltrassom.laudo_ultrassom:"Não há"))]),a._v(" \n      "),o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.laudo_ultrassom&&null!=a.cadastroUltrassom.laudo_ultrassom&&""!=a.cadastroUltrassom.laudo_ultrassom,expression:"\n          cadastroUltrassom.laudo_ultrassom != undefined &&\n            cadastroUltrassom.laudo_ultrassom != null &&\n            cadastroUltrassom.laudo_ultrassom != ''\n        "}]},[o("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_laudo))])]),o("div",{staticClass:"col-12 text-center"},[o("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.laudo_ultrassom&&null!=a.cadastroUltrassom.laudo_ultrassom&&""!=a.cadastroUltrassom.laudo_ultrassom,expression:"\n          cadastroUltrassom.laudo_ultrassom != undefined &&\n            cadastroUltrassom.laudo_ultrassom != null &&\n            cadastroUltrassom.laudo_ultrassom != ''\n        "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_laudo_ultrassom,alt:"image",id:"imagem_rx"}})],1),o("div",{staticClass:"col-12"},[o("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroUltrassom.laudo_ultrassom||null==a.cadastroUltrassom.laudo_ultrassom||""==a.cadastroUltrassom.laudo_ultrassom,expression:"\n          cadastroUltrassom.laudo_ultrassom == undefined ||\n            cadastroUltrassom.laudo_ultrassom == null ||\n            cadastroUltrassom.laudo_ultrassom == ''\n        "}],attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_laudo},on:{uploadFinalizado:a.atualizarImagem}})],1),o("div",{staticClass:"col-12 flex flex-center"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Gravar Dados",color:"primary",type:"submit"}}),o("q-btn",{directives:[{name:"show",rawName:"v-show",value:void 0==a.id_ultrassom||null==a.id_ultrassom||""==a.id_ultrassom,expression:"\n          id_ultrassom == undefined ||\n            id_ultrassom == null ||\n            id_ultrassom == ''\n        "}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Limpar",color:"primary",type:"reset"}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Voltar",color:"primary"}})],1)],1),o("q-dialog",{model:{value:a.popupUploadImagem,callback:function(t){a.popupUploadImagem=t},expression:"popupUploadImagem"}},[o("q-card",{staticClass:"full-width row"},[o("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[o("q-toolbar-title",[a._v("Upload Imagem")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-card-section",{staticClass:"col-12"},[o("UploadImagem",{attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_atual_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1)],1)],1)],1)},i=[],r=o("ded3"),e=o.n(r),l=(o("e6cf"),o("7215")),d=o("2f62"),c=o("2a19"),n={name:"cadastroUltrassom",components:{UploadImagem:l["a"]},computed:e()({},Object(d["c"])("principal",["dadosUsuarioLogado","getUrl"])),filters:{cpf(a){return void 0!=a&&(a=a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)),a}},async mounted(){this.cadastroUltrassom.cadastrante=this.dadosUsuarioLogado.id_usuario,""!=this.id_paciente&&void 0!=this.id_paciente&&await this.carregarDadosPaciente(this.id_paciente);let a=await this.carregarRegistrosMola(this.id_paciente);for(let t=0;t<a.length;t++)this.id_r_mola==a[t].id_r_mola&&(this.numero_mola=this.numero_mola.concat(t+1),this.numero_mola=this.numero_mola.concat("ª"));void 0!=this.id_ultrassom&&null!=this.id_ultrassom?(await this.carregarUltrassom(this.id_ultrassom),await this.atualizarImagem(this.cadastroUltrassom.ultrassom,"ultrassom"),await this.atualizarImagem(this.cadastroUltrassom.laudo_ultrassom,"laudo ultrassom")):this.dataCalendario=this.atribuirDataCalendario()},data(){return{cadastroUltrassom:{id_ultrassom:"",data_ultrassom:"",id_revisor:"",revisor:"",id_cadastrante:"",cadastrante:"",ultrassom:"",laudo_ultrassom:""},popupAbrirCalendario:!1,dataCalendario:"",tipo_imagem:"ultrassom",tipo_laudo:"laudo ultrassom",tipo_atual_imagem:null,url_ultrassom:"",url_laudo_ultrassom:"",popupUploadImagem:!1,validaDataUltrassom:!0,nome_paciente:"",cpf_paciente:"",numero_mola:""}},methods:{carregarUltrassom(a){return new Promise(((t,o)=>{this.$axios.post("/dados_ultrassom",{id_ultrassom:a}).then((a=>{let o=a.data.resultado[0];""!=o.data_ultrassom?this.dataCalendario=o.data_ultrassom:this.dataCalendario=this.atribuirDataCalendario(),this.cadastroUltrassom=o,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},incluirUltrassom(a){return new Promise(((t,o)=>{let s=a;var i=s.data_ultrassom.substring(0,2),r=s.data_ultrassom.substring(3,5),e=s.data_ultrassom.substring(6,10);s.data_ultrassom=e+"-"+("0"+r).slice(-2)+"-"+("0"+i).slice(-2),""==s.revisor?s.revisor=null:s.revisor=s.revisor,""==s.ultrassom?s.ultrassom=null:s.ultrassom=s.ultrassom,""==s.laudo_ultrassom?s.laudo_ultrassom=null:s.laudo_ultrassom=s.laudo_ultrassom;let l=s.data_ultrassom,d=this.id_r_mola,n=s.ultrassom,m=s.laudo_ultrassom,u=this.dadosUsuarioLogado.id_usuario;this.$axios.post("/incluir_ultrassom",{data_ultrassom:l,ultrassom:n,laudo_ultrassom:m,cadastrante:u,id_r_mola:d}).then((a=>{c["a"].create({message:"Dados do Ultrassom incluídos com sucesso.",color:"positive"}),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},alterarUltrassom(a,t){return new Promise(((o,s)=>{let i=t;var r=i.data_ultrassom.substring(0,2),e=i.data_ultrassom.substring(3,5),l=i.data_ultrassom.substring(6,10);i.data_ultrassom=l+"-"+("0"+e).slice(-2)+"-"+("0"+r).slice(-2),""==i.revisor?i.revisor=null:i.revisor=i.revisor,""==i.ultrassom?i.ultrassom=null:i.ultrassom=i.ultrassom,""==i.laudo_ultrassom?i.laudo_ultrassom=null:i.laudo_ultrassom=i.laudo_ultrassom;let d=i.data_ultrassom,n=i.ultrassom,m=i.laudo_ultrassom;this.$axios.post("/alterar_ultrassom",{data_ultrassom:d,ultrassom:n,laudo_ultrassom:m,id_ultrassom:a}).then((a=>{c["a"].create({message:"Dados do Ultrassom alterados com sucesso.",color:"positive"}),o(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),s(a)}))}))},carregarRegistrosMola(a){return new Promise(((t,o)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{let o=[];for(let t=0;t<a.data.resultado.length;t++)o.unshift(a.data.resultado[t]);t(o)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},carregarDadosPaciente(a){return new Promise(((t,o)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.nome_paciente=a.data.resultado[0].nome,this.cpf_paciente=a.data.resultado[0].cpf,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},onSubmit(){void 0!=this.id_ultrassom&&null!=this.id_ultrassom?this.alterarUltrassom(this.id_ultrassom,this.cadastroUltrassom):this.incluirUltrassom(this.cadastroUltrassom),console.log("cadastro",this.cadastroUltrassom),this.$emit("recarregarUltrassom")},onReset(){this.cadastroUltrassom.data_ultrassom="",this.cadastroUltrassom.ultrassom="",this.cadastroUltrassom.laudo_ultrassom="",this.dataCalendario=this.atribuirDataCalendario()},validarData(a){this.popupAbrirCalendario=!1;let t="",o="",s="";if(this.validaDataUltrassom=!0,"calendario"==a?(null==this.dataCalendario&&(this.dataCalendario=this.atribuirDataCalendario()),this.cadastroUltrassom.data_ultrassom=this.dataCalendario):"input"==a&&(""!=this.cadastroUltrassom.data_ultrassom?this.dataCalendario=this.cadastroUltrassom.data_ultrassom:this.dataCalendario=this.atribuirDataCalendario()),this.cadastroUltrassom.data_ultrassom.length>=2&&(t=this.cadastroUltrassom.data_ultrassom.substring(0,2),t=Number(t),(0==t||t>31)&&(this.validaDataUltrassom=!1),this.cadastroUltrassom.data_ultrassom.length>=5&&(o=this.cadastroUltrassom.data_ultrassom.substring(3,5),o=Number(o),(0==o||o>12)&&(this.validaDataUltrassom=!1),30!=t&&31!=t||2!=o||(this.validaDataUltrassom=!1),31!=t||4!=o&&6!=o&&9!=o&&11!=o||(this.validaDataUltrassom=!1)),10==this.cadastroUltrassom.data_ultrassom.length)){s=this.cadastroUltrassom.data_ultrassom.substring(6,10),s=Number(s);let a=!1;(s%4==0&&s%100!=0||s%400==0)&&(a=!0),29==t&&2==o&&0==a&&(this.validaDataUltrassom=!1);let i=new Date;s>i.getFullYear()&&(this.validaDataUltrassom=!1);let r=new Date(s,o-1,t);r>i&&(this.validaDataUltrassom=!1)}},atribuirDataCalendario(){let a=new Date;var t=a.getDate(),o=a.getMonth(),s=a.getFullYear();return("0"+t).slice(-2)+"/"+("0"+(o+1)).slice(-2)+"/"+s},atualizarImagem(a,t=null){"ultrassom"==t?(this.cadastroUltrassom.ultrassom=a,this.url_ultrassom=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1):"laudo ultrassom"==t&&(this.cadastroUltrassom.laudo_ultrassom=a,this.url_laudo_ultrassom=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1)}},props:["id_paciente","id_r_mola","id_ultrassom"]},m=n,u=o("2877"),g=o("f09f"),p=o("65c6"),_=o("6ac5"),h=o("9c40"),f=o("a370"),v=o("0378"),x=o("27f9"),b=o("0016"),C=o("24e8"),w=o("52ee"),U=o("068f"),q=o("7f67"),D=o("eebe"),T=o.n(D),I=Object(u["a"])(m,s,i,!1,null,null,null);t["default"]=I.exports;T()(I,"components",{QCard:g["a"],QToolbar:p["a"],QToolbarTitle:_["a"],QBtn:h["a"],QCardSection:f["a"],QForm:v["a"],QInput:x["a"],QIcon:b["a"],QDialog:C["a"],QDate:w["a"],QImg:U["a"]}),T()(I,"directives",{ClosePopup:q["a"]})},"29fe":function(a,t,o){"use strict";var s=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",{staticClass:"row"},[o("div",{staticClass:"q-mx-auto col-12"},[o("q-scroll-area",{ref:"chatArea",staticClass:"full-width",staticStyle:{height:"300px"},on:{scroll:a.scrollinfo}},a._l(a.mensagens,(function(t){return o("q-chat-message",{key:t.id,staticClass:"q-mx-sm",attrs:{name:t.remetente,text:[t.texto],sent:t.remetenteid==a.dadosUsuarioLogado.id_usuario}})})),1)],1),o("q-form",{staticClass:"row full-width on-left q-mb-md",on:{submit:a.enviarMensagem}},[o("div",{staticClass:"q-mx-auto col-12 row "},[o("q-input",{ref:"mensagem",staticClass:"q-pa-xs col-9",attrs:{label:"Mensagem","input-style":"height:40px",autofocus:"",dense:"",type:"textarea",outlined:"",maxlength:"250",counter:""},model:{value:a.chat.mensagem,callback:function(t){a.$set(a.chat,"mensagem",t)},expression:"chat.mensagem"}}),o("q-btn",{staticClass:"q-mt-xs col-3",staticStyle:{height:"40px"},attrs:{label:"Enviar",type:"submit",color:"primary",dense:""}})],1)])],1)},i=[],r=o("ded3"),e=o.n(r),l=(o("e6cf"),o("2f62")),d={name:"PageIndex",data(){return{socket:{},chat:{mensagem:""},mensagens:[],scrollsize:0}},props:["id_paciente","reload"],watch:{scrollsize:function(a){this.$refs.chatArea.setScrollPosition(a-300,100)},id_paciente:async function(){await this.carregarMensagens()},reload:async function(){this.id_paciente?(this.$socket.emit("logout",this.id_paciente),await this.carregarMensagens()):console.log("sem id do paciente",this.id_paciente)}},computed:e()({},Object(l["c"])("principal",["dadosUsuarioLogado"])),sockets:{mensagem:function(a){let t={id:a.id,remetenteid:a.remetenteid,remetente:a.remetente,texto:a.msg};this.mensagens.push(t)},mensagensAnteriores:function(a){this.mensagens=[];for(let t in a){let o={id:a[t].idMsg,remetenteid:a[t].remetenteid,remetente:a[t].remetente,texto:a[t].msg};this.mensagens.push(o)}}},mounted(){this.carregarMensagens()},destroyed(){this.$socket.emit("logout",this.id_paciente)},methods:{carregarMensagens(){if(Boolean(this.id_paciente)){let a=this.id_paciente,t=this.dadosUsuarioLogado.id_usuario;this.$socket.emit("login",{id_paciente:a,id_usuario:t})}},enviarMensagem(){let a={remetenteid:this.dadosUsuarioLogado.id_usuario,remetente:this.dadosUsuarioLogado.nome,destinatario:this.id_paciente,msg:this.chat.mensagem};this.$socket.emit("enviarMensagem",a),this.chat.mensagem="",this.$refs.mensagem.focus()},scrollinfo(a){const t=a.verticalSize;this.scrollsize=t}}},c=d,n=o("2877"),m=o("4983"),u=o("8169"),g=o("0378"),p=o("27f9"),_=o("9c40"),h=o("eebe"),f=o.n(h),v=Object(n["a"])(c,s,i,!1,null,null,null);t["a"]=v.exports;f()(v,"components",{QScrollArea:m["a"],QChatMessage:u["a"],QForm:g["a"],QInput:p["a"],QBtn:_["a"]})},"45d6":function(a,t,o){"use strict";o.r(t);var s=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-card",[o("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[o("q-toolbar-title",[a._v("Cadastro Raio-X")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-form",{staticClass:"full-width row",on:{submit:function(t){return t.stopPropagation(),a.onSubmit(t)},reset:a.onReset}},[o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("Nome Paciente: ")]),a._v(a._s(a.nome_paciente))]),o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("CPF: ")]),a._v(a._s(a._f("cpf")(a.cpf_paciente)))]),o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("Número Mola:")]),a._v(" "+a._s(a.numero_mola))]),o("q-input",{staticClass:"q-pa-xs col-12",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataRx||"Digite uma data válida"}],label:"Data do Exame",mask:"##/##/####"},on:{input:function(t){return a.validarData("input")}},scopedSlots:a._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendario=!0}}},[o("q-dialog",{model:{value:a.popupAbrirCalendario,callback:function(t){a.popupAbrirCalendario=t},expression:"popupAbrirCalendario"}},[o("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario")}},model:{value:a.dataCalendario,callback:function(t){a.dataCalendario=t},expression:"dataCalendario"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroRx.data_raiox,callback:function(t){a.$set(a.cadastroRx,"data_raiox",t)},expression:"cadastroRx.data_raiox"}}),o("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroRx.id_imagem&&null!=a.cadastroRx.id_imagem&&""!=a.cadastroRx.id_imagem,expression:"\n        cadastroRx.id_imagem != undefined &&\n          cadastroRx.id_imagem != null &&\n          cadastroRx.id_imagem != ''\n      "}],staticClass:"col-12 q-mt-md text-center"},[o("span",[a._v("Alterar Imagem")]),o("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0}}})],1),o("div",{staticClass:"col-12 text-center"},[o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroRx.id_imagem&&null!=a.cadastroRx.id_imagem&&""!=a.cadastroRx.id_imagem,expression:"\n          cadastroRx.id_imagem != undefined &&\n            cadastroRx.id_imagem != null &&\n            cadastroRx.id_imagem != ''\n        "}]},[o("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroRx.id_imagem&&void 0!=a.cadastroRx.id_imagem?a.cadastroRx.id_imagem:"Não há"))]),a._v(" \n      "),o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroRx.id_imagem&&null!=a.cadastroRx.id_imagem&&""!=a.cadastroRx.id_imagem,expression:"\n          cadastroRx.id_imagem != undefined &&\n            cadastroRx.id_imagem != null &&\n            cadastroRx.id_imagem != ''\n        "}]},[o("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_imagem))])]),o("div",{staticClass:"col-12 text-center"},[o("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroRx.id_imagem&&null!=a.cadastroRx.id_imagem&&""!=a.cadastroRx.id_imagem,expression:"\n          cadastroRx.id_imagem != undefined &&\n            cadastroRx.id_imagem != null &&\n            cadastroRx.id_imagem != ''\n        "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_imagem,alt:"image",id:"imagem_rx"}})],1),o("div",{staticClass:"col-12"},[o("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroRx.id_imagem||null==a.cadastroRx.id_imagem||""==a.cadastroRx.id_imagem,expression:"\n          cadastroRx.id_imagem == undefined ||\n            cadastroRx.id_imagem == null ||\n            cadastroRx.id_imagem == ''\n        "}],attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1),o("div",{staticClass:"col-12 flex flex-center"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Gravar Dados",color:"primary",type:"submit"}}),o("q-btn",{directives:[{name:"show",rawName:"v-show",value:void 0==a.id_raiox||null==a.id_raiox||""==a.id_raiox,expression:"id_raiox == undefined || id_raiox == null || id_raiox == ''"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Limpar",color:"primary",type:"reset"}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Voltar",color:"primary"}})],1)],1),o("q-dialog",{model:{value:a.popupUploadImagem,callback:function(t){a.popupUploadImagem=t},expression:"popupUploadImagem"}},[o("q-card",{staticClass:"full-width row"},[o("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[o("q-toolbar-title",[a._v("Upload Imagem")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-card-section",{staticClass:"col-12"},[o("UploadImagem",{attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1)],1)],1)],1)},i=[],r=o("ded3"),e=o.n(r),l=(o("e6cf"),o("7215")),d=o("2f62"),c=o("2a19"),n={name:"cadastroRx",components:{UploadImagem:l["a"]},computed:e()({},Object(d["c"])("principal",["dadosUsuarioLogado","getUrl"])),filters:{cpf(a){return void 0!=a&&(a=a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)),a}},async mounted(){this.cadastroRx.cadastrante=this.dadosUsuarioLogado.id_usuario,""!=this.id_paciente&&void 0!=this.id_paciente&&await this.carregarDadosPaciente(this.id_paciente);let a=await this.carregarRegistrosMola(this.id_paciente);for(let t=0;t<a.length;t++)this.id_r_mola==a[t].id_r_mola&&(this.numero_mola=this.numero_mola.concat(t+1),this.numero_mola=this.numero_mola.concat("ª"));void 0!=this.id_raiox&&null!=this.id_raiox?(await this.carregarRaiox(this.id_raiox),await this.atualizarImagem(this.cadastroRx.id_imagem)):this.dataCalendario=this.atribuirDataCalendario()},data(){return{cadastroRx:{id_raiox:"",data_raiox:"",id_revisor:"",revisor:"",id_cadastrante:"",cadastrante:"",id_imagem:""},popupAbrirCalendario:!1,dataCalendario:"",tipo_imagem:"rx",url_imagem:"",popupUploadImagem:!1,validaDataRx:!0,nome_paciente:"",cpf_paciente:"",numero_mola:""}},methods:{carregarRaiox(a){return new Promise(((t,o)=>{this.$axios.post("/dados_raiox",{id_raiox:a}).then((a=>{let o=a.data.resultado[0];""!=o.data_raiox?this.dataCalendario=o.data_raiox:this.dataCalendario=this.atribuirDataCalendario(),this.cadastroRx=o,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},incluirRaiox(a){return new Promise(((t,o)=>{let s=a;var i=s.data_raiox.substring(0,2),r=s.data_raiox.substring(3,5),e=s.data_raiox.substring(6,10);s.data_raiox=e+"-"+("0"+r).slice(-2)+"-"+("0"+i).slice(-2),""==s.revisor?s.revisor=null:s.revisor=s.revisor,""==s.id_imagem?s.id_imagem=null:s.id_imagem=s.id_imagem;let l=s.data_raiox,d=this.id_r_mola,n=s.id_imagem,m=this.dadosUsuarioLogado.id_usuario;this.$axios.post("/incluir_raiox",{data_raiox:l,id_imagem:n,cadastrante:m,id_r_mola:d}).then((a=>{c["a"].create({message:"Dados do Raio-X incluídos com sucesso.",color:"positive"}),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},alterarRaiox(a,t){return new Promise(((o,s)=>{let i=t;var r=i.data_raiox.substring(0,2),e=i.data_raiox.substring(3,5),l=i.data_raiox.substring(6,10);i.data_raiox=l+"-"+("0"+e).slice(-2)+"-"+("0"+r).slice(-2),""==i.revisor?i.revisor=null:i.revisor=i.revisor,""==i.id_imagem?i.id_imagem=null:i.id_imagem=i.id_imagem;let d=i.data_raiox,n=i.id_imagem;this.$axios.post("/alterar_raiox",{data_raiox:d,id_imagem:n,id_raiox:a}).then((a=>{c["a"].create({message:"Dados do Raio-X alterados com sucesso.",color:"positive"}),o(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),s(a)}))}))},carregarRegistrosMola(a){return new Promise(((t,o)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{let o=[];for(let t=0;t<a.data.resultado.length;t++)o.unshift(a.data.resultado[t]);t(o)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},carregarDadosPaciente(a){return new Promise(((t,o)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.nome_paciente=a.data.resultado[0].nome,this.cpf_paciente=a.data.resultado[0].cpf,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},onSubmit(){void 0!=this.id_raiox&&null!=this.id_raiox?this.alterarRaiox(this.id_raiox,this.cadastroRx):this.incluirRaiox(this.cadastroRx),console.log("cadastro",this.cadastroRx),this.$emit("recarregarRx")},onReset(){this.cadastroRx.data_raiox="",this.cadastroRx.id_imagem="",this.dataCalendario=this.atribuirDataCalendario()},validarData(a){this.popupAbrirCalendario=!1;let t="",o="",s="";if(this.validaDataRx=!0,"calendario"==a?(null==this.dataCalendario&&(this.dataCalendario=this.atribuirDataCalendario()),this.cadastroRx.data_raiox=this.dataCalendario):"input"==a&&(""!=this.cadastroRx.data_raiox?this.dataCalendario=this.cadastroRx.data_raiox:this.dataCalendario=this.atribuirDataCalendario()),this.cadastroRx.data_raiox.length>=2&&(t=this.cadastroRx.data_raiox.substring(0,2),t=Number(t),(0==t||t>31)&&(this.validaDataRx=!1),this.cadastroRx.data_raiox.length>=5&&(o=this.cadastroRx.data_raiox.substring(3,5),o=Number(o),(0==o||o>12)&&(this.validaDataRx=!1),30!=t&&31!=t||2!=o||(this.validaDataRx=!1),31!=t||4!=o&&6!=o&&9!=o&&11!=o||(this.validaDataRx=!1)),10==this.cadastroRx.data_raiox.length)){s=this.cadastroRx.data_raiox.substring(6,10),s=Number(s);let a=!1;(s%4==0&&s%100!=0||s%400==0)&&(a=!0),29==t&&2==o&&0==a&&(this.validaDataRx=!1);let i=new Date;s>i.getFullYear()&&(this.validaDataRx=!1);let r=new Date(s,o-1,t);r>i&&(this.validaDataRx=!1)}},atribuirDataCalendario(){let a=new Date;var t=a.getDate(),o=a.getMonth(),s=a.getFullYear();return("0"+t).slice(-2)+"/"+("0"+(o+1)).slice(-2)+"/"+s},atualizarImagem(a){this.cadastroRx.id_imagem=a,this.url_imagem=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1}},props:["id_paciente","id_r_mola","id_raiox"]},m=n,u=o("2877"),g=o("f09f"),p=o("65c6"),_=o("6ac5"),h=o("9c40"),f=o("a370"),v=o("0378"),x=o("27f9"),b=o("0016"),C=o("24e8"),w=o("52ee"),U=o("068f"),q=o("7f67"),D=o("eebe"),T=o.n(D),I=Object(u["a"])(m,s,i,!1,null,null,null);t["default"]=I.exports;T()(I,"components",{QCard:g["a"],QToolbar:p["a"],QToolbarTitle:_["a"],QBtn:h["a"],QCardSection:f["a"],QForm:v["a"],QInput:x["a"],QIcon:b["a"],QDialog:C["a"],QDate:w["a"],QImg:U["a"]}),T()(I,"directives",{ClosePopup:q["a"]})},"51e2":function(a,t,o){"use strict";var s=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-card",[o("q-toolbar",{staticClass:"bg-primary text-white"},[o("q-toolbar-title",[a._v("Adicionar Indicação")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-card-section",{staticClass:"q-pt-none"},[o("q-form",{on:{submit:a.onSubmit,reset:a.onReset}},[o("q-input",{attrs:{type:"text",label:"Descrição",rules:[function(a){return a.length>0||"Digite uma indicação"},function(a){return a.length<=50||"A indicação deve ter no máximo 50 caracteres"}]},model:{value:a.cadastroIndicacao.descricao,callback:function(t){a.$set(a.cadastroIndicacao,"descricao",t)},expression:"cadastroIndicacao.descricao"}}),o("br"),o("div",{staticClass:"flex-center q-gutter-xl"},[o("q-btn",{ref:"btnGravar",attrs:{type:"submit",color:"primary",label:"Gravar"}})],1)],1)],1)],1)},i=[],r=(o("e6cf"),{name:"CadastroEdicaoIndicacao",data(){return{cadastroIndicacao:{descricao:""},modalCadastroInd:!0}},mounted(){},methods:{async onSubmit(){console.log("incluir");await this.incluirIndicacao();this.$emit("acionarCarregarInd"),this.$emit("fecharPopup")},onReset(){this.cadastroIndicacao.descricao=""},incluirIndicacao(){return new Promise(((a,t)=>{let o=this.cadastroIndicacao;this.$axios.post("/incluir_indicacao",o).then((t=>{a(t.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))}}}),e=r,l=o("2877"),d=o("f09f"),c=o("65c6"),n=o("6ac5"),m=o("9c40"),u=o("a370"),g=o("0378"),p=o("27f9"),_=o("7f67"),h=o("eebe"),f=o.n(h),v=Object(l["a"])(e,s,i,!1,null,null,null);t["a"]=v.exports;f()(v,"components",{QCard:d["a"],QToolbar:c["a"],QToolbarTitle:n["a"],QBtn:m["a"],QCardSection:u["a"],QForm:g["a"],QInput:p["a"]}),f()(v,"directives",{ClosePopup:_["a"]})},7215:function(a,t,o){"use strict";var s=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-form",{staticClass:"full-width row",on:{submit:a.onSubmit,reset:a.onReset}},[o("q-input",{staticClass:"col-12 q-pa-xs",attrs:{label:"Tipo Imagem: ",readonly:""},model:{value:a.tipoSelected,callback:function(t){a.tipoSelected=t},expression:"tipoSelected"}}),o("q-uploader",{staticClass:"q-mt-xs q-pa-xs col-12 text-center",attrs:{label:"Imagem do Exame",url:a.getUrl+"upload","max-file-size":"2097152","max-files":"1",accept:".jpg, image/*,.pdf","form-fields":function(){return[{name:"tipo",value:a.tipo},{name:"id_r_mola",value:a.id_r_mola}]},"auto-upload":""},on:{rejected:a.onRejected,uploaded:a.onUploaded}})],1)},i=[],r=o("ded3"),e=o.n(r),l=(o("e6cf"),o("5319"),o("2f62")),d=o("2a19"),c={name:"cadastroImagem",data(){return{optTipo:["rx","ultrassom","tomografia","hcg","laudo ultrassom","laudo tomografia"],tipoSelected:null}},props:["id_r_mola","tipo"],watch:{id_r_mola:function(){this.cadastroImagem.id_r_mola=this.id_r_mola},tipo:function(){this.cadastroImagem.tipo=this.tipo}},computed:e()({},Object(l["c"])("principal",["getUrl"])),mounted(){this.tipoSelected=this.tipo},methods:{async onSubmit(){console.log("ID Mola",this.id_r_mola),console.log("Upload")},onReset(){this.cadastroImagem.tipo=""},onUploaded(a){let t=new String(a.xhr.response);t=t.replace(/\\/g,""),console.log("info ",t.substring(t.lastIndexOf("[")+1,t.lastIndexOf("]")));let o=t.substring(t.lastIndexOf("[")+1,t.lastIndexOf("]"));console.log("temp ",o),d["a"].create({message:"Imagem incluída com sucesso.",color:"positive"}),this.$emit("uploadFinalizado",o,this.tipoSelected)},onRejected(a){console.log(a);let t=a[0].failedPropValidation,o=" Erro ";switch(t){case"max-file-size":o="Tamanho máximo do arquivo 2Mb";break;case"accept":o="Arquivo deve ser uma imagem ou pdf";break}this.$q.notify({type:"negative",message:o})}}},n=c,m=o("2877"),u=o("0378"),g=o("27f9"),p=o("ee89"),_=o("eebe"),h=o.n(_),f=Object(m["a"])(n,s,i,!1,null,null,null);t["a"]=f.exports;h()(f,"components",{QForm:u["a"],QInput:g["a"],QUploader:p["a"]})},d859:function(a,t,o){"use strict";o.r(t);var s=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-card",[o("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[o("q-toolbar-title",[a._v("Cadastro hCG")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-form",{staticClass:"full-width row",on:{submit:function(t){return t.stopPropagation(),a.onSubmit(t)},reset:a.onReset}},[o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("Nome Paciente: ")]),a._v(a._s(a.nome_paciente))]),o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("CPF: ")]),a._v(a._s(a._f("cpf")(a.cpf_paciente)))]),o("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[o("b",[a._v("Número Mola:")]),a._v(" "+a._s(a.numero_mola))]),o("q-input",{staticClass:"q-pa-xs col-xs-12 col-sm-4 col-md-4 col-lg-4 col-xl-3",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataHcg||"Digite uma data válida"}],label:"Data hCG",mask:"##/##/####"},on:{input:function(t){return a.validarData("input")}},scopedSlots:a._u([{key:"append",fn:function(){return[o("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendario=!0}}},[o("q-dialog",{model:{value:a.popupAbrirCalendario,callback:function(t){a.popupAbrirCalendario=t},expression:"popupAbrirCalendario"}},[o("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario")}},model:{value:a.dataCalendario,callback:function(t){a.dataCalendario=t},expression:"dataCalendario"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroHcg.data_hcg,callback:function(t){a.$set(a.cadastroHcg,"data_hcg",t)},expression:"cadastroHcg.data_hcg"}}),o("q-input",{ref:"resultado",staticClass:"q-pa-xs col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3",attrs:{type:"number",label:"Resultado",maxlength:"7",dense:"",rules:[function(a){return null!=a||"Digite um resultado"}],"reactive-rules":""},on:{input:function(t){return a.validarCamposRegex(a.cadastroHcg.result_hcg,"resultado")}},model:{value:a.cadastroHcg.result_hcg,callback:function(t){a.$set(a.cadastroHcg,"result_hcg",t)},expression:"cadastroHcg.result_hcg"}}),o("q-input",{ref:"laboratorio",staticClass:"q-pa-xs col-12 col-sm-5 col-md-5 col-lg-5 col-xl-5",attrs:{label:"Laboratório","max-length":"250",dense:"",rules:[function(a){return a.length>0||"Digite o nome do laboratório"},function(a){return a.length<=250||"O nome do laboratório deve ter no máximo 250 caracteres"}],"reactive-rules":""},on:{input:function(t){return a.validarCamposRegex(a.cadastroHcg.lab_hcg,"laboratorio")}},model:{value:a.cadastroHcg.lab_hcg,callback:function(t){a.$set(a.cadastroHcg,"lab_hcg",t)},expression:"cadastroHcg.lab_hcg"}}),o("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroHcg.id_imagem&&null!=a.cadastroHcg.id_imagem&&""!=a.cadastroHcg.id_imagem,expression:"\n        cadastroHcg.id_imagem != undefined &&\n          cadastroHcg.id_imagem != null &&\n          cadastroHcg.id_imagem != ''\n      "}],staticClass:"col-12 q-mt-md text-center"},[o("span",[a._v("Alterar Imagem")]),o("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0}}})],1),o("div",{staticClass:"col-12 text-center"},[o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroHcg.id_imagem&&null!=a.cadastroHcg.id_imagem&&""!=a.cadastroHcg.id_imagem,expression:"\n          cadastroHcg.id_imagem != undefined &&\n            cadastroHcg.id_imagem != null &&\n            cadastroHcg.id_imagem != ''\n        "}]},[o("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroHcg.id_imagem&&void 0!=a.cadastroHcg.id_imagem?a.cadastroHcg.id_imagem:"Não há"))]),a._v(" \n      "),o("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroHcg.id_imagem&&null!=a.cadastroHcg.id_imagem&&""!=a.cadastroHcg.id_imagem,expression:"\n          cadastroHcg.id_imagem != undefined &&\n            cadastroHcg.id_imagem != null &&\n            cadastroHcg.id_imagem != ''\n        "}]},[o("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_imagem))])]),o("div",{staticClass:"col-12 text-center"},[o("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroHcg.id_imagem&&null!=a.cadastroHcg.id_imagem&&""!=a.cadastroHcg.id_imagem,expression:"\n          cadastroHcg.id_imagem != undefined &&\n            cadastroHcg.id_imagem != null &&\n            cadastroHcg.id_imagem != ''\n        "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_imagem,alt:"image",id:"imagem_hcg"}})],1),o("div",{staticClass:"col-12"},[o("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroHcg.id_imagem||null==a.cadastroHcg.id_imagem||""==a.cadastroHcg.id_imagem,expression:"\n          cadastroHcg.id_imagem == undefined ||\n            cadastroHcg.id_imagem == null ||\n            cadastroHcg.id_imagem == ''\n        "}],attrs:{id_r_mola:a.id_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1),o("div",{staticClass:"col-12 flex flex-center"},[o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Gravar Dados",color:"primary",type:"submit"}}),o("q-btn",{directives:[{name:"show",rawName:"v-show",value:void 0==a.id_hcg||null==a.id_hcg||""==a.id_hcg,expression:"id_hcg == undefined || id_hcg == null || id_hcg == ''"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Limpar",color:"primary",type:"reset"}}),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Voltar",color:"primary"}})],1)],1),o("q-dialog",{model:{value:a.popupUploadImagem,callback:function(t){a.popupUploadImagem=t},expression:"popupUploadImagem"}},[o("q-card",{staticClass:"full-width row"},[o("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[o("q-toolbar-title",[a._v("Upload Imagem")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-card-section",{staticClass:"col-12"},[o("UploadImagem",{attrs:{id_r_mola:a.id_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1)],1)],1)],1)},i=[],r=o("ded3"),e=o.n(r),l=(o("e6cf"),o("7215")),d=o("2f62"),c=o("2a19"),n={components:{UploadImagem:l["a"]},computed:e()({},Object(d["c"])("principal",["dadosUsuarioLogado","getUrl"])),props:["id_paciente","id_hcg","id_mola"],filters:{cpf(a){return void 0!=a&&(a=a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)),a}},data(){return{nome_paciente:"",cpf_paciente:"",numero_mola:"",cadastroHcg:{id_hcg:"",data_hcg:"",result_hcg:"",lab_hcg:"",id_revisor:"",revisor:"",id_cadastrante:"",cadastrante:"",id_imagem:""},url_imagem:"",dataCalendario:"",popupAbrirCalendario:!1,popupUploadImagem:!1,validaDataHcg:!0,tipo_imagem:"hcg"}},async mounted(){this.cadastroHcg.cadastrante=this.dadosUsuarioLogado.id_usuario,""!=this.id_paciente&&void 0!=this.id_paciente&&await this.carregarDadosPaciente(this.id_paciente);let a=await this.carregarRegistrosMola(this.id_paciente);for(let t=0;t<a.length;t++)this.id_mola==a[t].id_r_mola&&(this.numero_mola=this.numero_mola.concat(t+1),this.numero_mola=this.numero_mola.concat("ª"));void 0!=this.id_hcg&&null!=this.id_hcg?(await this.carregarHcg(this.id_hcg),await this.atualizarImagem(this.cadastroHcg.id_imagem)):this.dataCalendario=this.atribuirDataCalendario()},methods:{carregarHcg(a){return new Promise(((t,o)=>{this.$axios.post("/dados_hcg",{id_hcg:a}).then((a=>{let o=a.data.resultado[0];""!=o.data_hcg?this.dataCalendario=o.data_hcg:this.dataCalendario=this.atribuirDataCalendario(),this.cadastroHcg=o,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},incluirHcg(a){return new Promise(((t,o)=>{let s=a;var i=s.data_hcg.substring(0,2),r=s.data_hcg.substring(3,5),e=s.data_hcg.substring(6,10);s.data_hcg=e+"-"+("0"+r).slice(-2)+"-"+("0"+i).slice(-2),""==s.result_hcg?s.result_hcg=null:s.result_hcg=s.result_hcg,""==s.lab_hcg?s.lab_hcg=null:s.lab_hcg=s.lab_hcg,""==s.revisor?s.revisor=null:s.revisor=s.revisor,""==s.id_imagem?s.id_imagem=null:s.id_imagem=s.id_imagem;let l=s.data_hcg,d=s.result_hcg,n=s.lab_hcg,m=this.id_mola,u=s.id_imagem,g=this.dadosUsuarioLogado.id_usuario;this.$axios.post("/incluir_hcg",{data_hcg:l,result_hcg:d,lab_hcg:n,id_imagem:u,cadastrante:g,id_r_mola:m}).then((a=>{c["a"].create({message:"Dados do hCG incluídos com sucesso.",color:"positive"}),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},alterarHcg(a,t){return new Promise(((o,s)=>{let i=t;var r=i.data_hcg.substring(0,2),e=i.data_hcg.substring(3,5),l=i.data_hcg.substring(6,10);i.data_hcg=l+"-"+("0"+e).slice(-2)+"-"+("0"+r).slice(-2),""==i.result_hcg?i.result_hcg=null:i.result_hcg=i.result_hcg,""==i.lab_hcg?i.lab_hcg=null:i.lab_hcg=i.lab_hcg,""==i.revisor?i.revisor=null:i.revisor=i.revisor,""==i.id_imagem?i.id_imagem=null:i.id_imagem=i.id_imagem;let d=i.data_hcg,n=i.result_hcg,m=i.lab_hcg,u=i.id_imagem;this.$axios.post("/alterar_hcg",{data_hcg:d,result_hcg:n,lab_hcg:m,id_imagem:u,id_hcg:a}).then((a=>{c["a"].create({message:"Dados do hCG alterados com sucesso.",color:"positive"}),o(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),s(a)}))}))},carregarRegistrosMola(a){return new Promise(((t,o)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{let o=[];for(let t=0;t<a.data.resultado.length;t++)o.unshift(a.data.resultado[t]);t(o)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},carregarDadosPaciente(a){return new Promise(((t,o)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.nome_paciente=a.data.resultado[0].nome,this.cpf_paciente=a.data.resultado[0].cpf,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},onSubmit(){void 0!=this.id_hcg&&null!=this.id_hcg?this.alterarHcg(this.id_hcg,this.cadastroHcg):this.incluirHcg(this.cadastroHcg),console.log("cadastro",this.cadastroHcg),this.$emit("recarregarHcg")},onReset(){this.cadastroHcg.data_hcg="",this.cadastroHcg.result_hcg="",this.cadastroHcg.lab_hcg="",this.cadastroHcg.id_imagem="",this.dataCalendario=this.atribuirDataCalendario()},validarData(a){this.popupAbrirCalendario=!1;let t="",o="",s="";if(this.validaDataHcg=!0,"calendario"==a?(null==this.dataCalendario&&(this.dataCalendario=this.atribuirDataCalendario()),this.cadastroHcg.data_hcg=this.dataCalendario):"input"==a&&(""!=this.cadastroHcg.data_hcg?this.dataCalendario=this.cadastroHcg.data_hcg:this.dataCalendario=this.atribuirDataCalendario()),this.cadastroHcg.data_hcg.length>=2&&(t=this.cadastroHcg.data_hcg.substring(0,2),t=Number(t),(0==t||t>31)&&(this.validaDataHcg=!1),this.cadastroHcg.data_hcg.length>=5&&(o=this.cadastroHcg.data_hcg.substring(3,5),o=Number(o),(0==o||o>12)&&(this.validaDataHcg=!1),30!=t&&31!=t||2!=o||(this.validaDataHcg=!1),31!=t||4!=o&&6!=o&&9!=o&&11!=o||(this.validaDataHcg=!1)),10==this.cadastroHcg.data_hcg.length)){s=this.cadastroHcg.data_hcg.substring(6,10),s=Number(s);let a=!1;(s%4==0&&s%100!=0||s%400==0)&&(a=!0),29==t&&2==o&&0==a&&(this.validaDataHcg=!1);let i=new Date;s>i.getFullYear()&&(this.validaDataHcg=!1);let r=new Date(s,o-1,t);r>i&&(this.validaDataHcg=!1)}},atribuirDataCalendario(){let a=new Date;var t=a.getDate(),o=a.getMonth(),s=a.getFullYear();return("0"+t).slice(-2)+"/"+("0"+(o+1)).slice(-2)+"/"+s},validarCamposRegex(a,t){let o=a.substring(0,a.length-1),s="";if("resultado"==t?s=/^[0-9.]*$/:"laboratorio"==t&&(s=/^[a-zA-Z0-9ãõáéíóúçâêôàñÃÕÁÉÍÓÚÇÂÊÔÀÑ'-\s]*$/),!s.test(a.slice(-1)))switch(t){case"resultado":this.cadastroHcg.result_hcg=o,this.$refs.resultado.$forceUpdate();break;case"laboratorio":this.cadastroHcg.lab_hcg=o,this.$refs.laboratorio.$forceUpdate();break}},atualizarImagem(a){this.cadastroHcg.id_imagem=a,this.url_imagem=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1}}},m=n,u=o("2877"),g=o("f09f"),p=o("65c6"),_=o("6ac5"),h=o("9c40"),f=o("a370"),v=o("0378"),x=o("27f9"),b=o("0016"),C=o("24e8"),w=o("52ee"),U=o("068f"),q=o("7f67"),D=o("eebe"),T=o.n(D),I=Object(u["a"])(m,s,i,!1,null,null,null);t["default"]=I.exports;T()(I,"components",{QCard:g["a"],QToolbar:p["a"],QToolbarTitle:_["a"],QBtn:h["a"],QCardSection:f["a"],QForm:v["a"],QInput:x["a"],QIcon:b["a"],QDialog:C["a"],QDate:w["a"],QImg:U["a"]}),T()(I,"directives",{ClosePopup:q["a"]})},e043:function(a,t,o){"use strict";var s=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-card",[o("q-toolbar",{staticClass:"bg-primary text-white"},[o("q-toolbar-title",[a._v("Adicionar CID")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-card-section",{staticClass:"q-pt-none"},[o("q-form",{on:{submit:a.onSubmit,reset:a.onReset}},[a.id_cid?o("span",[a._v(" ID: "+a._s(a.id_cid)+" ")]):a._e(),o("q-input",{attrs:{type:"text",label:"Código da CID",rules:[function(a){return a.length>0||"Digite um CID"},function(a){return a.length<=250||"O CID deve ter no máximo 50 caracteres"}]},model:{value:a.cadastroCid.cod_cid,callback:function(t){a.$set(a.cadastroCid,"cod_cid",t)},expression:"cadastroCid.cod_cid"}}),o("q-input",{attrs:{type:"text",label:"Descrição",rules:[function(a){return a.length>0||"Digite uma Descrição"},function(a){return a.length<=250||"A descrição deve ter no máximo 250 caracteres"}]},model:{value:a.cadastroCid.descricao,callback:function(t){a.$set(a.cadastroCid,"descricao",t)},expression:"cadastroCid.descricao"}}),o("br"),o("div",{staticClass:"flex-center q-gutter-xl"},[o("q-btn",{attrs:{type:"submit",color:"primary",label:"Gravar"}})],1)],1)],1)],1)},i=[],r=(o("e6cf"),o("2a19")),e={data(){return{name:"CadastroEdicaoCid",cadastroCid:{id_cid:"",cod_cid:"",descricao:""},modalCadastroCid:!0}},async mounted(){this.cadastroCid.id_cid&&(console.log("alterar"),this.onSubmit())},props:["id_cid"],methods:{async onSubmit(){await this.incluirCid();this.$emit("acionarCarregarCid"),this.$emit("fecharPopup")},onReset(){this.cadastroCid.descricao=""},carregarDadosCid(a){return new Promise(((t,o)=>{this.$axios.post("/dados_cid",{id_cid:a}).then((a=>{console.log(a.data.resultado[0].nome),this.cadastroCid.cod=a.data.resultado[0].cod,this.cadastroCid.descricao=a.data.resultado[0].descricao,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},incluirCid(){return new Promise(((a,t)=>{let o=this.cadastroCid;this.$axios.post("/incluir_cid",o).then((t=>{r["a"].create({message:"Cid incluída com sucesso.",color:"positive"}),a(t.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))}}},l=e,d=o("2877"),c=o("f09f"),n=o("65c6"),m=o("6ac5"),u=o("9c40"),g=o("a370"),p=o("0378"),_=o("27f9"),h=o("7f67"),f=o("eebe"),v=o.n(f),x=Object(d["a"])(l,s,i,!1,null,null,null);t["a"]=x.exports;v()(x,"components",{QCard:c["a"],QToolbar:n["a"],QToolbarTitle:m["a"],QBtn:u["a"],QCardSection:g["a"],QForm:p["a"],QInput:_["a"]}),v()(x,"directives",{ClosePopup:h["a"]})}}]);