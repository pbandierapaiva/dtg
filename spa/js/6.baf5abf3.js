(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"7e76":function(a,t,i){"use strict";i.r(t);var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-page",{staticClass:"flex flex-center"},[i("q-form",{staticClass:"q-gutter-md q-pa-xs full-width row",on:{submit:a.onSubmit,reset:a.onReset}},[i("q-input",{staticClass:"q-pa-xs col-4",attrs:{label:"Código"},model:{value:a.consultaCid.cod_cid,callback:function(t){a.$set(a.consultaCid,"cod_cid",t)},expression:"consultaCid.cod_cid"}}),i("q-input",{staticClass:"q-pa-xs col-6",attrs:{label:"Descrição"},model:{value:a.consultaCid.descricao,callback:function(t){a.$set(a.consultaCid,"descricao",t)},expression:"consultaCid.descricao"}}),i("q-btn",{staticClass:"q-pa-xs q-ma-md col-1",staticStyle:{"margin-top":"2%"},attrs:{label:"Consultar",type:"submit",color:"primary"}})],1),i("div",{staticClass:"q-pa-lg",staticStyle:{"padding-bottom":"135%"}},[i("b",[a._v("CID")]),i("q-btn",{attrs:{id:"btnCadastrarCid",icon:"add",flat:"",dense:"",color:"primary"},on:{click:function(){a.id_Cid_popup=null,a.popupCadastro=!0}}}),i("q-table",{attrs:{data:a.dados,columns:a.columns,"row-key":"name",pagination:a.pagination},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"body",fn:function(t){return[i("q-tr",{attrs:{props:t}},[i("q-td",{key:"id_cid",attrs:{props:t}},[a._v("\n            "+a._s(t.row.id_cid)+"\n          ")]),i("q-td",{key:"cod_cid",attrs:{props:t}},[a._v("\n            "+a._s(t.row.cod_cid)+"\n          ")]),i("q-td",{key:"descricao",attrs:{props:t}},[a._v("\n            "+a._s(t.row.descricao)+"\n          ")]),i("q-td",{key:"inativar",attrs:{props:t}},[i("q-toggle",{attrs:{color:"green"},on:{input:function(i){a.ativarInativar(i,t.row.id)}},model:{value:t.row.ativo,callback:function(i){a.$set(t.row,"ativo",i)},expression:"props.row.ativo"}})],1)],1)]}}])})],1),i("q-dialog",{staticClass:"full-width",model:{value:a.popupCadastro,callback:function(t){a.popupCadastro=t},expression:"popupCadastro"}},[i("CadastroEdicaoCid",{on:{acionarCarregarCid:a.carregarDadosCid,fecharPopup:function(t){a.popupCadastro=!1}}})],1)],1)},e=[],s=(i("e6cf"),i("e043")),r={name:"PageIndex",components:{CadastroEdicaoCid:s["a"]},data(){return{popupCadastro:!1,modalCadastroCid:!1,filter:"",pagination:{rowsPerPage:7},consultaCid:{cod_cid:"",descricao:""},columns:[{name:"id_cid",label:"Id",align:"left"},{name:"cod_cid",label:"Código",align:"left"},{name:"descricao",label:"Descrição",align:"left"},{name:"inativar",label:"Inativar",align:"left"}],dados:[]}},async mounted(){await this.carregarDadosCid()},methods:{async onSubmit(){let a=await this.consultarCid(this.consultaCid);a.resultado=a.resultado.map((a=>(a.ativo=Boolean(a.ativo),a))),this.dados=a.resultado},async ativarInativar(a,t){return console.log("valor",a),console.log("id_Cid",id_Cid),new Promise(((t,i)=>{this.$axios.post("/ativa_inativar_Cid",{id_inst:Number(id_Cid),valor:Number(a)}).then((a=>{t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},onReset(){},async carregarDadosCid(){return new Promise(((a,t)=>{this.$axios.get("/combo_cid").then((t=>{this.dados=t.data.resultado.map((a=>(a.ativo=Boolean(a.ativo),a))),a(t.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))},async consultarCid(a){return new Promise(((t,i)=>{this.$axios.post("/consultar_cid",a).then((a=>{t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))}}},c=r,d=i("2877"),n=i("9989"),l=i("0378"),u=i("27f9"),p=i("9c40"),C=i("eaac"),m=i("bd08"),h=i("db86"),b=i("9564"),f=i("24e8"),_=i("eebe"),v=i.n(_),g=Object(d["a"])(c,o,e,!1,null,null,null);t["default"]=g.exports;v()(g,"components",{QPage:n["a"],QForm:l["a"],QInput:u["a"],QBtn:p["a"],QTable:C["a"],QTr:m["a"],QTd:h["a"],QToggle:b["a"],QDialog:f["a"]})},e043:function(a,t,i){"use strict";var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-card",[i("q-toolbar",{staticClass:"bg-primary text-white"},[i("q-toolbar-title",[a._v("Adicionar CID")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-card-section",{staticClass:"q-pt-none"},[i("q-form",{on:{submit:a.onSubmit,reset:a.onReset}},[a.id_cid?i("span",[a._v(" ID: "+a._s(a.id_cid)+" ")]):a._e(),i("q-input",{attrs:{type:"text",label:"Nome",rules:[function(a){return a.length>0||"Digite um CID"},function(a){return a.length<=250||"O CID deve ter no máximo 50 caracteres"}]},model:{value:a.cadastroCid.cod_cid,callback:function(t){a.$set(a.cadastroCid,"cod_cid",t)},expression:"cadastroCid.cod_cid"}}),i("q-input",{attrs:{type:"text",label:"Descrição",rules:[function(a){return a.length>0||"Digite uma Descrição"},function(a){return a.length<=250||"A descrição deve ter no máximo 250 caracteres"}]},model:{value:a.cadastroCid.descricao,callback:function(t){a.$set(a.cadastroCid,"descricao",t)},expression:"cadastroCid.descricao"}}),i("br"),i("div",{staticClass:"flex-center q-gutter-xl"},[i("q-btn",{attrs:{type:"submit",color:"primary",label:"Gravar"}})],1)],1)],1)],1)},e=[],s=(i("e6cf"),i("2a19")),r={data(){return{name:"CadastroEdicaoCid",cadastroCid:{id_cid:"",cod_cid:"",descricao:""},modalCadastroCid:!0}},async mounted(){this.cadastroCid.id_cid&&(console.log("alterar"),await this.carregarDadosCid(this.cadastroCid.id_cid))},props:["id_cid"],methods:{async onSubmit(){await this.incluirCid();this.$emit("acionarCarregarCid"),this.$emit("fecharPopup")},onReset(){this.cadastroCid.descricao=""},carregarDadosCid(a){return new Promise(((t,i)=>{this.$axios.post("/dados_cid",{id_cid:a}).then((a=>{console.log(a.data.resultado[0].nome),this.cadastroCid.cod=a.data.resultado[0].cod,this.cadastroCid.descricao=a.data.resultado[0].descricao,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},incluirCid(){return new Promise(((a,t)=>{let i=this.cadastroCid;this.$axios.post("/incluir_cid",i).then((t=>{s["a"].create({message:"Cid incluída com sucesso.",color:"positive"}),a(t.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))}}},c=r,d=i("2877"),n=i("f09f"),l=i("65c6"),u=i("6ac5"),p=i("9c40"),C=i("a370"),m=i("0378"),h=i("27f9"),b=i("7f67"),f=i("eebe"),_=i.n(f),v=Object(d["a"])(c,o,e,!1,null,null,null);t["a"]=v.exports;_()(v,"components",{QCard:n["a"],QToolbar:l["a"],QToolbarTitle:u["a"],QBtn:p["a"],QCardSection:C["a"],QForm:m["a"],QInput:h["a"]}),_()(v,"directives",{ClosePopup:b["a"]})}}]);