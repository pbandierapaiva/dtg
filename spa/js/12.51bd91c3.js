(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[12],{"1fb9":function(e,a,s){"use strict";s.r(a);var t=function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("q-page",[s("div",{staticClass:"text-center"},[s("b",[e._v("Gerenciamento de Espaço")])]),s("div",[s("b",[e._v("Espaço em disco no servidor")]),s("br"),e._v("\n    Total: "+e._s(e.espaco)),s("br"),e._v("\n    Usado: "+e._s(e.espaco_utilizado)),s("br"),e._v("\n    Livre: "+e._s(e.espaco_livre)+"\n  ")]),s("div",[s("q-btn",{attrs:{id:"deletar_imagens",label:"Deletar imagens sem exames",dense:"",color:"primary"},on:{click:e.deletarImagensSemExames}}),e.arquivos_deletados?s("div",[e._v("\n      Arquivos deletados: "+e._s(e.arquivos_deletados)+" Espaço liberado:\n      "+e._s(e.espaco_liberado)+"\n    ")]):e._e()],1)])},o=[],r=(s("e6cf"),{name:"gerenciamento_espaco",data(){return{espaco:0,espaco_livre:0,espaco_utilizado:0,espaco_liberado:null,arquivos_deletados:null}},async mounted(){await this.carregaDadosDiscoServidor()},methods:{formatBytes(e,a=2){if(0===e)return"0 Bytes";const s=1024,t=a<0?0:a,o=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,r)).toFixed(t))+" "+o[r]},async carregaDadosDiscoServidor(){return new Promise(((e,a)=>{this.$axios.get("/espaco_servidor").then((a=>{this.espaco=this.formatBytes(a.data.espaco),this.espaco_livre=this.formatBytes(a.data.espaco_livre),this.espaco_utilizado=this.formatBytes(a.data.espaco-a.data.espaco_livre),e(a.data)})).catch((e=>{this.$store.dispatch("principal/verificaErro",e),a(e)}))}))},async deletarImagensSemExames(){return new Promise(((e,a)=>{this.$axios.post("/deletar_img_sem_exame").then((a=>{this.arquivos_deletados=a.data.qtdarquivos,this.espaco_liberado=this.formatBytes(a.data.espaco_liberado),this.carregaDadosDiscoServidor(),e(a.data)})).catch((e=>{this.$store.dispatch("principal/verificaErro",e),a(e)}))}))}}}),i=r,c=s("2877"),d=s("9989"),n=s("9c40"),l=s("eebe"),p=s.n(l),_=Object(c["a"])(i,t,o,!1,null,null,null);a["default"]=_.exports;p()(_,"components",{QPage:d["a"],QBtn:n["a"]})}}]);