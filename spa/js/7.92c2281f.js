(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"2b94":function(a,t,o){"use strict";o.r(t);var i=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-page",{staticClass:"flex flex-center"},[o("q-form",{staticClass:"q-gutter-md q-pa-xs full-width row flex-center",on:{submit:a.onSubmit,reset:a.onReset}},[o("q-input",{staticClass:"q-pa-xs col-3",attrs:{label:"Descrição"},model:{value:a.consultaIndicacao.descricao,callback:function(t){a.$set(a.consultaIndicacao,"descricao",t)},expression:"consultaIndicacao.descricao"}}),o("q-btn",{staticClass:"q-pa-xs q-ma-md col-1",staticStyle:{"margin-top":"2%"},attrs:{label:"Consultar",type:"submit",color:"primary"}})],1),o("div",{staticClass:"q-pa-lg",staticStyle:{"padding-bottom":"135%"}},[o("b",[a._v("Indicações")]),o("q-btn",{attrs:{id:"btnCadastrarHist",icon:"add",flat:"",dense:"",color:"primary"},on:{click:function(){a.popupCadastro=!0}}}),o("q-table",{attrs:{data:a.dados,columns:a.columns,"row-key":"name",pagination:a.pagination},on:{"update:pagination":function(t){a.pagination=t}},scopedSlots:a._u([{key:"body",fn:function(t){return[o("q-tr",{attrs:{props:t}},[o("q-td",{key:"id",attrs:{props:t}},[a._v("\n            "+a._s(t.row.id)+"\n          ")]),o("q-td",{key:"descricao",attrs:{props:t}},[a._v("\n            "+a._s(t.row.descricao)+"\n          ")]),o("q-td",{key:"excluir",attrs:{props:t}},[o("q-btn",{attrs:{id:"excluir",flat:"",dense:"",icon:"delete"},on:{click:function(o){a.excluirIndicacao(t.row.id)}}})],1)],1)]}}])})],1),o("q-dialog",{staticClass:"full-width",model:{value:a.popupCadastro,callback:function(t){a.popupCadastro=t},expression:"popupCadastro"}},[o("CadastroEdicaoIndicacao")],1)],1)},c=[],e=(o("e6cf"),o("51e2")),n={name:"PageIndex",components:{CadastroEdicaoIndicacao:e["a"]},data(){return{popupCadastro:!1,modalCadastroInd:!1,filter:"",pagination:{rowsPerPage:7},consultaIndicacao:{descricao:""},columns:[{name:"id",label:"Id",align:"left",field:a=>a.id,format:a=>`${a}`},{name:"descricao",label:"Descrição",align:"left",field:a=>a.descricao,format:a=>`${a}`},{name:"excluir",label:"Excluir",align:"center"}],dados:[]}},async mounted(){this.onSubmit()},methods:{async onSubmit(){let a=await this.consultarIndicacao(this.consultaIndicacao);this.dados=a.resultado},onReset(){},async consultarIndicacao(a){return new Promise(((t,o)=>{this.$axios.post("/consultar_indicacao",a).then((a=>{t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},excluirIndicacao(a){return new Promise(((t,o)=>{window.confirm("Gostaria mesmo de excluir indicação?")&&this.$axios.post("/excluir_indicacao",{id:Number(a)}).then((a=>{this.onSubmit(),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))}}},s=n,r=o("2877"),d=o("9989"),l=o("0378"),u=o("27f9"),p=o("9c40"),m=o("eaac"),b=o("bd08"),f=o("db86"),h=o("24e8"),I=o("eebe"),q=o.n(I),x=Object(r["a"])(s,i,c,!1,null,null,null);t["default"]=x.exports;q()(x,"components",{QPage:d["a"],QForm:l["a"],QInput:u["a"],QBtn:p["a"],QTable:m["a"],QTr:b["a"],QTd:f["a"],QDialog:h["a"]})},"51e2":function(a,t,o){"use strict";var i=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("q-card",[o("q-toolbar",{staticClass:"bg-primary text-white"},[o("q-toolbar-title",[a._v("Adicionar Indicação")]),o("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),o("q-card-section",{staticClass:"q-pt-none"},[o("q-form",{on:{submit:a.onSubmit,reset:a.onReset}},[o("q-input",{attrs:{type:"text",label:"Descrição",rules:[function(a){return a.length>0||"Digite uma indicação"},function(a){return a.length<=50||"A indicação deve ter no máximo 50 caracteres"}]},model:{value:a.cadastroIndicacao.descricao,callback:function(t){a.$set(a.cadastroIndicacao,"descricao",t)},expression:"cadastroIndicacao.descricao"}}),o("br"),o("div",{staticClass:"flex-center q-gutter-xl"},[o("q-btn",{ref:"btnGravar",attrs:{type:"submit",color:"primary",label:"Gravar"}})],1)],1)],1)],1)},c=[],e=(o("e6cf"),{name:"CadastroEdicaoIndicacao",data(){return{cadastroIndicacao:{descricao:""},modalCadastroInd:!0}},mounted(){},methods:{async onSubmit(){console.log("incluir");await this.incluirIndicacao();this.$emit("acionarCarregarInd"),this.$emit("fecharPopup")},onReset(){this.cadastroIndicacao.descricao=""},incluirIndicacao(){return new Promise(((a,t)=>{let o=this.cadastroIndicacao;this.$axios.post("/incluir_indicacao",o).then((t=>{a(t.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))}}}),n=e,s=o("2877"),r=o("f09f"),d=o("65c6"),l=o("6ac5"),u=o("9c40"),p=o("a370"),m=o("0378"),b=o("27f9"),f=o("7f67"),h=o("eebe"),I=o.n(h),q=Object(s["a"])(n,i,c,!1,null,null,null);t["a"]=q.exports;I()(q,"components",{QCard:r["a"],QToolbar:d["a"],QToolbarTitle:l["a"],QBtn:u["a"],QCardSection:p["a"],QForm:m["a"],QInput:b["a"]}),I()(q,"directives",{ClosePopup:f["a"]})}}]);