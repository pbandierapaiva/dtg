(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{2137:function(a,o,t){"use strict";t("f941")},"3adb":function(a,o,t){"use strict";t.r(o);var e=function(){var a=this,o=a.$createElement,t=a._self._c||o;return t("q-page",{staticClass:"flex flex-center"},[t("h6",{staticStyle:{"font-size":"18px"}},[t("b",[a._v("Cadastro Médico/Coordenador")])]),t("q-form",{staticClass:"q-gutter-md q-pa-xs q-gutter-y-xs",staticStyle:{width:"100%","padding-bottom":"135%"},on:{submit:a.onSubmit,reset:a.onReset}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 col-lg-6"},[t("fieldset",{staticClass:"row "},[t("legend",[a._v("Dados Login")]),t("q-select",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-4",attrs:{options:a.optTipoAcesso,label:"Tipo",dense:"","map-options":"","emit-value":"",rules:[function(a){return null!=a||"Selecione um tipo"}]},model:{value:a.cadastroMedico.tipoAcesso,callback:function(o){a.$set(a.cadastroMedico,"tipoAcesso",o)},expression:"cadastroMedico.tipoAcesso"}}),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-11 col-sm-4",attrs:{label:"Login",maxlength:"50",dense:"",rules:[function(a){return a.length>3||"Digite um login com pelo menos 4 digitos"},function(a){return a.length<=50||"O login deve ter no máximo 50 caracteres"}]},on:{keyup:a.verificarDisponibilidadeLogin},model:{value:a.cadastroMedico.login,callback:function(o){a.$set(a.cadastroMedico,"login",o)},expression:"cadastroMedico.login"}}),a.cadastroMedico.login.length>3&&a.loginDisponivel?t("span",{staticClass:"text-positive q-pt-md"},[t("q-icon",{staticStyle:{"font-size":"24px"},attrs:{name:"check_circle"}}),t("q-tooltip",[a._v("Disponível")])],1):a._e(),a.cadastroMedico.login.length>3&&!a.loginDisponivel?t("span",{staticClass:"text-negative q-pt-md"},[t("q-icon",{staticStyle:{"font-size":"24px"},attrs:{name:"cancel"}}),t("q-tooltip",[a._v("Indisponível")])],1):a._e(),Boolean(a.cadastroMedico.id_usuario)?t("q-btn",{staticClass:"q-pa-xs col-12 col-sm-3",staticStyle:{"margin-top":"2%"},attrs:{label:"Resetar Senha",type:"button",color:"primary",dense:""},on:{click:a.resetarSenha}}):a._e()],1)]),t("div",{staticClass:"col-12 col-lg-6"},[t("fieldset",{staticClass:"row "},[t("legend",[a._v("Dados Pessoais")]),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-6 col-md-3 col-lg-3",attrs:{label:"Nome",maxlength:"250",dense:"",rules:[function(a){return a.length>0||"Digite um Nome"},function(a){return a.length<=250||"O nome deve ter no máximo 250 caracteres"}]},model:{value:a.cadastroMedico.nome,callback:function(o){a.$set(a.cadastroMedico,"nome",o)},expression:"cadastroMedico.nome"}}),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-6 col-md-3 col-lg-3",attrs:{type:"date",label:"Data Nascimento","stack-label":"",dense:"",rules:[function(a){return a.length>0||"Selecione uma Data de Nascimento"}]},model:{value:a.cadastroMedico.dataNasc,callback:function(o){a.$set(a.cadastroMedico,"dataNasc",o)},expression:"cadastroMedico.dataNasc"}}),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-6 col-md-3 col-lg-3",attrs:{label:"CPF",mask:"###.###.###-##",dense:"",rules:[function(a){return 14==a.length||"Digite um CPF válido"}]},model:{value:a.cadastroMedico.cpf,callback:function(o){a.$set(a.cadastroMedico,"cpf",o)},expression:"cadastroMedico.cpf"}})],1)]),t("div",{staticClass:"col-12 col-lg-6"},[t("fieldset",{staticClass:"row"},[t("legend",[a._v("Endereço Residencial")]),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-6 col-md-1 col-lg-1",attrs:{label:"CEP",maxlength:"9",mask:"#####-###",dense:""},model:{value:a.cadastroMedico.cep,callback:function(o){a.$set(a.cadastroMedico,"cep",o)},expression:"cadastroMedico.cep"}}),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-6 col-md-3 col-lg-3",attrs:{label:"Logradouro",maxlength:"250",dense:""},model:{value:a.cadastroMedico.logradouro,callback:function(o){a.$set(a.cadastroMedico,"logradouro",o)},expression:"cadastroMedico.logradouro"}}),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-1",attrs:{label:"Número",maxlength:"7",dense:""},model:{value:a.cadastroMedico.numero,callback:function(o){a.$set(a.cadastroMedico,"numero",o)},expression:"cadastroMedico.numero"}}),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-2",attrs:{label:"Complemento",maxlength:"250",dense:""},model:{value:a.cadastroMedico.complemento,callback:function(o){a.$set(a.cadastroMedico,"complemento",o)},expression:"cadastroMedico.complemento"}}),t("q-select",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-1",attrs:{options:a.optUf,label:"UF",dense:""},model:{value:a.cadastroMedico.uf,callback:function(o){a.$set(a.cadastroMedico,"uf",o)},expression:"cadastroMedico.uf"}}),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-6 col-md-3 col-lg-2",attrs:{label:"Cidade",maxlength:"28",dense:""},model:{value:a.cadastroMedico.cidade,callback:function(o){a.$set(a.cadastroMedico,"cidade",o)},expression:"cadastroMedico.cidade"}}),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-6 col-md-2 col-lg-2",attrs:{label:"Bairro",maxlength:"100",dense:""},model:{value:a.cadastroMedico.bairro,callback:function(o){a.$set(a.cadastroMedico,"bairro",o)},expression:"cadastroMedico.bairro"}})],1)]),t("div",{staticClass:"col-12 col-lg-6"},[t("fieldset",{staticClass:"row"},[t("legend",[a._v("Dados Cadastrais")]),t("q-input",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-3",attrs:{type:"text",label:"CRM",maxlength:"15",dense:"",rules:[function(a){return a.length>0||"Digite um CRM"}]},model:{value:a.cadastroMedico.crm,callback:function(o){a.$set(a.cadastroMedico,"crm",o)},expression:"cadastroMedico.crm"}}),t("q-select",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-3",attrs:{options:a.optUf,label:"UF CRM",dense:""},model:{value:a.cadastroMedico.ufCrm,callback:function(o){a.$set(a.cadastroMedico,"ufCrm",o)},expression:"cadastroMedico.ufCrm"}}),t("q-select",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-3",attrs:{options:a.optCategoria,label:"Categoria",dense:"",rules:[function(a){return null!=a||"Selecione uma categoria"}]},model:{value:a.cadastroMedico.categoria,callback:function(o){a.$set(a.cadastroMedico,"categoria",o)},expression:"cadastroMedico.categoria"}}),t("q-select",{staticClass:"q-pa-xs q-pb-lg col-12 col-sm-3",attrs:{options:a.optInstituicao,label:"Instituição",dense:"","emit-value":"","map-options":"",rules:[function(a){return null!=a||"Selecione uma instituição"}]},model:{value:a.cadastroMedico.instituicao,callback:function(o){a.$set(a.cadastroMedico,"instituicao",o)},expression:"cadastroMedico.instituicao"}})],1)])]),t("div",{staticClass:"flex flex-center"},[t("q-btn",{staticClass:"q-pa-xs q-ma-md col-1",staticStyle:{"margin-top":"2%"},attrs:{label:"Gravar Dados",type:"submit",color:"primary"}}),t("q-btn",{staticClass:"q-pa-xs q-ma-md col-1",staticStyle:{"margin-top":"2%"},attrs:{label:"Limpar Dados",type:"reset",color:"primary"}}),t("q-btn",{staticClass:"q-pa-xs q-ma-md col-1",staticStyle:{"margin-top":"2%"},attrs:{label:"Voltar",to:"/area_acesso",color:"primary"}})],1)])],1)},s=[],i=t("ded3"),c=t.n(i),l=(t("e6cf"),t("5319"),t("2f62")),r={name:"Cadastro_Medico_Coordenador",data(){return{cadastroMedico:{id_usuario:"",nome:"",dataNasc:"",cpf:"",cep:"",logradouro:"",numero:"",complemento:"",uf:"",cidade:"",bairro:"",ufCrm:"",crm:"",categoria:"",instituicao:"",tipoAcesso:"",login:"",senha:""},loginDisponivel:!0,optUf:["AC","AL","AP","AM","BA","CE","DF","ES","GO","MA","MT","MS","MG","PA","PB","PR","PE","PI","RJ","RN","RS","RO","RR","SC","SP","SE","TO"],optInstituicao:[],optCategoria:["Acadêmico","Residente","Contratado","Pós-Graduando","Docente","Outros"],optTipoAcesso:[{value:2,label:"Médico"},{value:3,label:"Coordenador"}]}},computed:c()({},Object(l["c"])("principal",["dadosUsuarioLogado"])),async mounted(){this.cadastroMedico.id_usuario=this.$route.params.id;let a=await this.carregarInst(),o=a.resultado.map((a=>({value:a.id,label:a.nome_inst})));this.optInstituicao=o,""!=this.cadastroMedico.id_usuario&&void 0!=this.cadastroMedico.id_usuario?await this.carregarDadosMedico(this.cadastroMedico.id_usuario):this.cadastroMedico.instituicao=this.dadosUsuarioLogado.id_inst},methods:{async onSubmit(){if(""!=this.cadastroMedico.id_usuario&&void 0!=this.cadastroMedico.id_usuario){await this.alterarMedico()}else{await this.incluirMedico()}},onReset(){this.cadastroMedico.nome="",this.cadastroMedico.dataNasc="",this.cadastroMedico.cpf="",this.cadastroMedico.cep="",this.cadastroMedico.logradouro="",this.cadastroMedico.numero="",this.cadastroMedico.complemento="",this.cadastroMedico.uf="",this.cadastroMedico.cidade="",this.cadastroMedico.bairro="",this.cadastroMedico.ufCrm="",this.cadastroMedico.crm="",this.cadastroMedico.categoria="",this.cadastroMedico.instituicao="",this.cadastroMedico.tipoAcesso="",this.cadastroMedico.login=""},carregarInst(){return new Promise(((a,o)=>{this.$axios.get("/combo_inst").then((o=>{a(o.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},carregarDadosMedico(a){return new Promise(((o,t)=>{this.$axios.post("/dados_medico",{id_usuario:a}).then((a=>{this.cadastroMedico=a.data.resultado[0],o(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))},incluirMedico(){return new Promise(((a,o)=>{let t=this.cadastroMedico;t.cep=t.cep.replace(/[^0-9]+/g,""),t.cpf=t.cpf.replace(/[^0-9]+/g,""),this.$axios.post("/incluir_med_coord",t).then((o=>{this.$router.push({name:"area_acesso"}),a(o.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},alterarMedico(){return new Promise(((a,o)=>{let t=this.cadastroMedico;t.cep=t.cep.replace(/[^0-9]+/g,""),t.cpf=t.cpf.replace(/[^0-9]+/g,""),this.$axios.post("/alterar_med_coord",t).then((o=>{this.$router.push({name:"area_acesso"}),a(o.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},resetarSenha(){return new Promise(((a,o)=>{let t={id_usuario:this.cadastroMedico.id_usuario,login:this.cadastroMedico.login};this.$axios.post("/resetar_senha",t).then((o=>{alert("Senha Resetada com Sucesso"),this.$store.dispatch("principal/verificaUsuarioSenhaIguais"),a(o.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},verificarDisponibilidadeLogin(){let a={login:this.cadastroMedico.login,id_usuario:this.cadastroMedico.id_usuario};this.$axios.post("/login_disponivel",a).then((a=>{this.loginDisponivel=a.data.disponivel})).catch((a=>{this.$store.dispatch("principal/verificaErro",a)}))}}},d=r,n=(t("2137"),t("2877")),p=t("9989"),u=t("0378"),m=t("ddd8"),g=t("27f9"),h=t("0016"),M=t("05c0"),b=t("9c40"),f=t("eebe"),q=t.n(f),x=Object(n["a"])(d,e,s,!1,null,"0da073b0",null);o["default"]=x.exports;q()(x,"components",{QPage:p["a"],QForm:u["a"],QSelect:m["a"],QInput:g["a"],QIcon:h["a"],QTooltip:M["a"],QBtn:b["a"]})},f941:function(a,o,t){}}]);