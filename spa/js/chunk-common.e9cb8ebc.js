(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"032e":function(a,t,i){"use strict";i.r(t);var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-card",[i("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[i("q-toolbar-title",[a._v("Cadastro Tomografia")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-form",{staticClass:"full-width row",on:{submit:function(t){return t.stopPropagation(),a.onSubmit(t)},reset:a.onReset}},[i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Nome Paciente: ")]),a._v(a._s(a.nome_paciente))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("CPF: ")]),a._v(a._s(a._f("cpf")(a.cpf_paciente)))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Número Mola:")]),a._v(" "+a._s(a.numero_mola))]),i("q-input",{staticClass:"q-pa-xs col-12",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataTomografia||"Digite uma data válida"}],label:"Data do Exame",mask:"##/##/####"},on:{input:function(t){return a.validarData("input")}},scopedSlots:a._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendario=!0}}},[i("q-dialog",{model:{value:a.popupAbrirCalendario,callback:function(t){a.popupAbrirCalendario=t},expression:"popupAbrirCalendario"}},[i("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario")}},model:{value:a.dataCalendario,callback:function(t){a.dataCalendario=t},expression:"dataCalendario"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroTomografia.data_tomografia,callback:function(t){a.$set(a.cadastroTomografia,"data_tomografia",t)},expression:"cadastroTomografia.data_tomografia"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.tomografia&&null!=a.cadastroTomografia.tomografia&&""!=a.cadastroTomografia.tomografia,expression:"\n        cadastroTomografia.tomografia != undefined &&\n          cadastroTomografia.tomografia != null &&\n          cadastroTomografia.tomografia != ''\n      "}],staticClass:"col-12 q-mt-md text-center"},[i("span",[a._v("Alterar Imagem")]),i("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0,a.tipo_atual_imagem="tomografia"}}})],1),i("div",{staticClass:"col-12 text-center"},[i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.tomografia&&null!=a.cadastroTomografia.tomografia&&""!=a.cadastroTomografia.tomografia,expression:"\n          cadastroTomografia.tomografia != undefined &&\n            cadastroTomografia.tomografia != null &&\n            cadastroTomografia.tomografia != ''\n        "}]},[i("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroTomografia.tomografia&&void 0!=a.cadastroTomografia.tomografia?a.cadastroTomografia.tomografia:"Não há")+"  ")]),i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.tomografia&&null!=a.cadastroTomografia.tomografia&&""!=a.cadastroTomografia.tomografia,expression:"\n          cadastroTomografia.tomografia != undefined &&\n            cadastroTomografia.tomografia != null &&\n            cadastroTomografia.tomografia != ''\n        "}]},[i("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_imagem))]),a._v("  \n    ")]),i("div",{staticClass:"col-12 text-center"},[i("q-zoom",[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.tomografia&&null!=a.cadastroTomografia.tomografia&&""!=a.cadastroTomografia.tomografia&&!a.imagemTelaCheiaTomografia,expression:"\n            cadastroTomografia.tomografia != undefined &&\n              cadastroTomografia.tomografia != null &&\n              cadastroTomografia.tomografia != '' &&\n              !imagemTelaCheiaTomografia\n          "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_tomografia,alt:"image",id:"imagem_tomografia"},on:{click:function(t){a.imagemTelaCheiaTomografia=!0}}}),i("div",{staticStyle:{width:"50%",margin:"0 auto"}},[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.tomografia&&null!=a.cadastroTomografia.tomografia&&""!=a.cadastroTomografia.tomografia&&a.imagemTelaCheiaTomografia,expression:"\n              cadastroTomografia.tomografia != undefined &&\n                cadastroTomografia.tomografia != null &&\n                cadastroTomografia.tomografia != '' &&\n                imagemTelaCheiaTomografia\n            "}],staticStyle:{width:"100%","max-width":"700px",height:"auto"},attrs:{src:a.url_tomografia,alt:"image",id:"imagem_tomografia"},on:{click:function(t){a.imagemTelaCheiaTomografia=!1}}})],1)],1)],1),i("div",{staticClass:"col-12"},[i("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroTomografia.tomografia||null==a.cadastroTomografia.tomografia||""==a.cadastroTomografia.tomografia,expression:"\n          cadastroTomografia.tomografia == undefined ||\n            cadastroTomografia.tomografia == null ||\n            cadastroTomografia.tomografia == ''\n        "}],attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.laudo_tomografia&&null!=a.cadastroTomografia.laudo_tomografia&&""!=a.cadastroTomografia.laudo_tomografia,expression:"\n        cadastroTomografia.laudo_tomografia != undefined &&\n          cadastroTomografia.laudo_tomografia != null &&\n          cadastroTomografia.laudo_tomografia != ''\n      "}],staticClass:"col-12 q-mt-md flex flex-center"},[i("span",[a._v("Alterar Imagem")]),i("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0,a.tipo_atual_imagem="laudo tomografia"}}})],1),i("div",{staticClass:"col-12 text-center"},[i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.laudo_tomografia&&null!=a.cadastroTomografia.laudo_tomografia&&""!=a.cadastroTomografia.laudo_tomografia,expression:"\n          cadastroTomografia.laudo_tomografia != undefined &&\n            cadastroTomografia.laudo_tomografia != null &&\n            cadastroTomografia.laudo_tomografia != ''\n        "}]},[i("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroTomografia.laudo_tomografia&&void 0!=a.cadastroTomografia.laudo_tomografia?a.cadastroTomografia.laudo_tomografia:"Não há")+"  ")]),i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.laudo_tomografia&&null!=a.cadastroTomografia.laudo_tomografia&&""!=a.cadastroTomografia.laudo_tomografia,expression:"\n          cadastroTomografia.laudo_tomografia != undefined &&\n            cadastroTomografia.laudo_tomografia != null &&\n            cadastroTomografia.laudo_tomografia != ''\n        "}]},[i("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_laudo))]),a._v("  \n    ")]),i("div",{staticClass:"col-12 text-center"},[i("q-zoom",[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.laudo_tomografia&&null!=a.cadastroTomografia.laudo_tomografia&&""!=a.cadastroTomografia.laudo_tomografia&&!a.imagemTelaCheiaLaudo,expression:"\n            cadastroTomografia.laudo_tomografia != undefined &&\n              cadastroTomografia.laudo_tomografia != null &&\n              cadastroTomografia.laudo_tomografia != '' &&\n              !imagemTelaCheiaLaudo\n          "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_laudo_tomografia,alt:"image",id:"imagem_laudo_tomografia"},on:{click:function(t){a.imagemTelaCheiaLaudo=!0}}}),i("div",{staticStyle:{width:"50%",margin:"0 auto"}},[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroTomografia.laudo_tomografia&&null!=a.cadastroTomografia.laudo_tomografia&&""!=a.cadastroTomografia.laudo_tomografia&&a.imagemTelaCheiaLaudo,expression:"\n              cadastroTomografia.laudo_tomografia != undefined &&\n                cadastroTomografia.laudo_tomografia != null &&\n                cadastroTomografia.laudo_tomografia != '' &&\n                imagemTelaCheiaLaudo\n            "}],staticStyle:{width:"100%","max-width":"700px",height:"auto"},attrs:{src:a.url_laudo_tomografia,alt:"image",id:"imagem_laudo_tomografia"},on:{click:function(t){a.imagemTelaCheiaLaudo=!1}}})],1)],1)],1),i("div",{staticClass:"col-12"},[i("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroTomografia.laudo_tomografia||null==a.cadastroTomografia.laudo_tomografia||""==a.cadastroTomografia.laudo_tomografia,expression:"\n          cadastroTomografia.laudo_tomografia == undefined ||\n            cadastroTomografia.laudo_tomografia == null ||\n            cadastroTomografia.laudo_tomografia == ''\n        "}],attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_laudo},on:{uploadFinalizado:a.atualizarImagem}})],1),i("div",{staticClass:"col-12 flex flex-center"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Gravar Dados",color:"primary",type:"submit"}}),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:void 0==a.id_tomografia||null==a.id_tomografia||""==a.id_tomografia,expression:"\n          id_tomografia == undefined ||\n            id_tomografia == null ||\n            id_tomografia == ''\n        "}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Limpar",color:"primary",type:"reset"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Voltar",color:"primary"}})],1)],1),i("q-dialog",{model:{value:a.popupUploadImagem,callback:function(t){a.popupUploadImagem=t},expression:"popupUploadImagem"}},[i("q-card",{staticClass:"full-width row"},[i("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[i("q-toolbar-title",[a._v("Upload Imagem")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-card-section",{staticClass:"col-12"},[i("UploadImagem",{attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_atual_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1)],1)],1)],1)},s=[],r=i("ded3"),e=i.n(r),l=(i("e6cf"),i("7215")),d=i("2f62"),c=i("2a19"),n={name:"cadastroTomografia",components:{UploadImagem:l["a"]},computed:e()({},Object(d["c"])("principal",["dadosUsuarioLogado","getUrl"])),filters:{cpf(a){return void 0!=a&&(a=a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)),a}},async mounted(){this.cadastroTomografia.cadastrante=this.dadosUsuarioLogado.id_usuario,""!=this.id_paciente&&void 0!=this.id_paciente&&await this.carregarDadosPaciente(this.id_paciente);let a=await this.carregarRegistrosMola(this.id_paciente);for(let t=0;t<a.length;t++)this.id_r_mola==a[t].id_r_mola&&(this.numero_mola=this.numero_mola.concat(t+1),this.numero_mola=this.numero_mola.concat("ª"));void 0!=this.id_tomografia&&null!=this.id_tomografia?(await this.carregarTomografia(this.id_tomografia),await this.atualizarImagem(this.cadastroTomografia.tomografia,"tomografia"),await this.atualizarImagem(this.cadastroTomografia.laudo_tomografia,"laudo tomografia")):this.dataCalendario=this.atribuirDataCalendario()},async beforeDestroy(){this.$emit("recarregarTomografia")},data(){return{cadastroTomografia:{id_tomografia:"",data_tomografia:"",id_revisor:"",revisor:"",id_cadastrante:"",cadastrante:"",tomografia:"",laudo_tomografia:""},popupAbrirCalendario:!1,dataCalendario:"",tipo_imagem:"tomografia",tipo_laudo:"laudo tomografia",tipo_atual_imagem:null,url_tomografia:"",url_laudo_tomografia:"",popupUploadImagem:!1,validaDataTomografia:!0,nome_paciente:"",cpf_paciente:"",numero_mola:"",imagemTelaCheiaTomografia:!1,imagemTelaCheiaLaudo:!1}},methods:{carregarTomografia(a){return new Promise(((t,i)=>{this.$axios.post("/dados_tomografia",{id_tomografia:a}).then((a=>{let i=a.data.resultado[0];""!=i.data_tomografia?this.dataCalendario=i.data_tomografia:this.dataCalendario=this.atribuirDataCalendario(),this.cadastroTomografia=i,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async incluirTomografia(a){return new Promise(((t,i)=>{let o=a,s=o.data_tomografia.substring(0,2),r=o.data_tomografia.substring(3,5),e=o.data_tomografia.substring(6,10);o.data_tomografia=e+"-"+("0"+r).slice(-2)+"-"+("0"+s).slice(-2),""==o.revisor?o.revisor=null:o.revisor=o.revisor,""==o.tomografia?o.tomografia=null:o.tomografia=o.tomografia,""==o.laudo_tomografia?o.laudo_tomografia=null:o.laudo_tomografia=o.laudo_tomografia;let l=o.data_tomografia,d=this.id_r_mola,n=o.tomografia,m=o.laudo_tomografia,u=this.dadosUsuarioLogado.id_usuario;this.$axios.post("/incluir_tomografia",{data_tomografia:l,tomografia:n,laudo_tomografia:m,cadastrante:u,id_r_mola:d}).then((a=>{c["a"].create({message:"Dados da Tomografia incluídos com sucesso.",color:"positive"}),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async alterarTomografia(a,t){return new Promise(((i,o)=>{let s=t,r=s.data_tomografia.substring(0,2),e=s.data_tomografia.substring(3,5),l=s.data_tomografia.substring(6,10);s.data_tomografia=l+"-"+("0"+e).slice(-2)+"-"+("0"+r).slice(-2),""==s.revisor?s.revisor=null:s.revisor=s.revisor,""==s.tomografia?s.tomografia=null:s.tomografia=s.tomografia,""==s.laudo_tomografia?s.laudo_tomografia=null:s.laudo_tomografia=s.laudo_tomografia;let d=s.data_tomografia,n=s.tomografia,m=s.laudo_tomografia;this.$axios.post("/alterar_tomografia",{data_tomografia:d,tomografia:n,laudo_tomografia:m,id_tomografia:a}).then((a=>{c["a"].create({message:"Dados da Tomografia alterados com sucesso.",color:"positive"}),i(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},carregarRegistrosMola(a){return new Promise(((t,i)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{let i=[];for(let t=0;t<a.data.resultado.length;t++)i.unshift(a.data.resultado[t]);t(i)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},carregarDadosPaciente(a){return new Promise(((t,i)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.nome_paciente=a.data.resultado[0].nome,this.cpf_paciente=a.data.resultado[0].cpf,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async onSubmit(){void 0!=this.id_tomografia&&null!=this.id_tomografia?(await this.alterarTomografia(this.id_tomografia,this.cadastroTomografia),this.$emit("recarregarTomografia")):(await this.incluirTomografia(this.cadastroTomografia),this.$emit("recarregarTomografia"))},onReset(){this.cadastroTomografia.data_tomografia="",this.cadastroTomografia.tomografia="",this.cadastroTomografia.laudo_tomografia="",this.dataCalendario=this.atribuirDataCalendario()},validarData(a){this.popupAbrirCalendario=!1;let t="",i="",o="";if(this.validaDataTomografia=!0,"calendario"==a?(null==this.dataCalendario&&(this.dataCalendario=this.atribuirDataCalendario()),this.cadastroTomografia.data_tomografia=this.dataCalendario):"input"==a&&(""!=this.cadastroTomografia.data_tomografia?this.dataCalendario=this.cadastroTomografia.data_tomografia:this.dataCalendario=this.atribuirDataCalendario()),this.cadastroTomografia.data_tomografia.length>=2&&(t=this.cadastroTomografia.data_tomografia.substring(0,2),t=Number(t),(0==t||t>31)&&(this.validaDataTomografia=!1),this.cadastroTomografia.data_tomografia.length>=5&&(i=this.cadastroTomografia.data_tomografia.substring(3,5),i=Number(i),(0==i||i>12)&&(this.validaDataTomografia=!1),30!=t&&31!=t||2!=i||(this.validaDataTomografia=!1),31!=t||4!=i&&6!=i&&9!=i&&11!=i||(this.validaDataTomografia=!1)),10==this.cadastroTomografia.data_tomografia.length)){o=this.cadastroTomografia.data_tomografia.substring(6,10),o=Number(o);let a=!1;(o%4==0&&o%100!=0||o%400==0)&&(a=!0),29==t&&2==i&&0==a&&(this.validaDataTomografia=!1);let s=new Date;o>s.getFullYear()&&(this.validaDataTomografia=!1);let r=new Date(o,i-1,t);r>s&&(this.validaDataTomografia=!1)}},atribuirDataCalendario(){let a=new Date,t=a.getDate(),i=a.getMonth(),o=a.getFullYear();return("0"+t).slice(-2)+"/"+("0"+(i+1)).slice(-2)+"/"+o},atualizarImagem(a,t=null){"tomografia"==t?(this.cadastroTomografia.tomografia=a,this.url_tomografia=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1):"laudo tomografia"==t&&(this.cadastroTomografia.laudo_tomografia=a,this.url_laudo_tomografia=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1)}},props:["id_paciente","id_r_mola","id_tomografia"]},m=n,u=i("2877"),p=i("f09f"),g=i("65c6"),_=i("6ac5"),h=i("9c40"),f=i("a370"),v=i("0378"),b=i("27f9"),x=i("0016"),C=i("24e8"),w=i("52ee"),q=i("068f"),D=i("7f67"),U=i("eebe"),T=i.n(U),y=Object(u["a"])(m,o,s,!1,null,null,null);t["default"]=y.exports;T()(y,"components",{QCard:p["a"],QToolbar:g["a"],QToolbarTitle:_["a"],QBtn:h["a"],QCardSection:f["a"],QForm:v["a"],QInput:b["a"],QIcon:x["a"],QDialog:C["a"],QDate:w["a"],QImg:q["a"]}),T()(y,"directives",{ClosePopup:D["a"]})},"1a72":function(a,t,i){"use strict";i.r(t);var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-card",[i("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[i("q-toolbar-title",[a._v("Cadastro Ultrassom")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-form",{staticClass:"full-width row",on:{submit:function(t){return t.stopPropagation(),a.onSubmit(t)},reset:a.onReset}},[i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Nome Paciente: ")]),a._v(a._s(a.nome_paciente))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("CPF: ")]),a._v(a._s(a._f("cpf")(a.cpf_paciente)))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Número Mola:")]),a._v(" "+a._s(a.numero_mola))]),i("q-input",{staticClass:"q-pa-xs col-12 ",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataUltrassom||"Digite uma data válida"}],label:"Data do Exame",mask:"##/##/####"},on:{input:function(t){return a.validarData("input")}},scopedSlots:a._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendario=!0}}},[i("q-dialog",{model:{value:a.popupAbrirCalendario,callback:function(t){a.popupAbrirCalendario=t},expression:"popupAbrirCalendario"}},[i("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario")}},model:{value:a.dataCalendario,callback:function(t){a.dataCalendario=t},expression:"dataCalendario"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroUltrassom.data_ultrassom,callback:function(t){a.$set(a.cadastroUltrassom,"data_ultrassom",t)},expression:"cadastroUltrassom.data_ultrassom"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.ultrassom&&null!=a.cadastroUltrassom.ultrassom&&""!=a.cadastroUltrassom.ultrassom,expression:"\n        cadastroUltrassom.ultrassom != undefined &&\n          cadastroUltrassom.ultrassom != null &&\n          cadastroUltrassom.ultrassom != ''\n      "}],staticClass:"col-12 q-mt-md text-center"},[i("span",[a._v("Alterar Imagem")]),i("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0,a.tipo_atual_imagem="ultrassom"}}})],1),i("div",{staticClass:"col-12 text-center"},[i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.ultrassom&&null!=a.cadastroUltrassom.ultrassom&&""!=a.cadastroUltrassom.ultrassom,expression:"\n          cadastroUltrassom.ultrassom != undefined &&\n            cadastroUltrassom.ultrassom != null &&\n            cadastroUltrassom.ultrassom != ''\n        "}]},[i("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroUltrassom.ultrassom&&void 0!=a.cadastroUltrassom.ultrassom?a.cadastroUltrassom.ultrassom:"Não há"))]),a._v(" \n      "),i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.ultrassom&&null!=a.cadastroUltrassom.ultrassom&&""!=a.cadastroUltrassom.ultrassom,expression:"\n          cadastroUltrassom.ultrassom != undefined &&\n            cadastroUltrassom.ultrassom != null &&\n            cadastroUltrassom.ultrassom != ''\n        "}]},[i("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_imagem))])]),i("div",{staticClass:"col-12 text-center"},[i("q-zoom",[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.ultrassom&&null!=a.cadastroUltrassom.ultrassom&&""!=a.cadastroUltrassom.ultrassom&&!a.imagemTelaCheiaUltrassom,expression:"\n            cadastroUltrassom.ultrassom != undefined &&\n              cadastroUltrassom.ultrassom != null &&\n              cadastroUltrassom.ultrassom != '' &&\n              !imagemTelaCheiaUltrassom\n          "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_ultrassom,alt:"image",id:"imagem_ultrassom"},on:{click:function(t){a.imagemTelaCheiaUltrassom=!0}}}),i("div",{staticStyle:{width:"50%",margin:"0 auto"}},[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.ultrassom&&null!=a.cadastroUltrassom.ultrassom&&""!=a.cadastroUltrassom.ultrassom&&a.imagemTelaCheiaUltrassom,expression:"\n              cadastroUltrassom.ultrassom != undefined &&\n                cadastroUltrassom.ultrassom != null &&\n                cadastroUltrassom.ultrassom != '' &&\n                imagemTelaCheiaUltrassom\n            "}],staticClass:"photo",staticStyle:{width:"100%","max-width":"700px",height:"auto"},attrs:{src:a.url_ultrassom,alt:"image",id:"imagem_ultrassom"},on:{click:function(t){a.imagemTelaCheiaUltrassom=!1}}})],1)],1)],1),i("div",{staticClass:"col-12"},[i("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroUltrassom.ultrassom||null==a.cadastroUltrassom.ultrassom||""==a.cadastroUltrassom.ultrassom,expression:"\n          cadastroUltrassom.ultrassom == undefined ||\n            cadastroUltrassom.ultrassom == null ||\n            cadastroUltrassom.ultrassom == ''\n        "}],attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.laudo_ultrassom&&null!=a.cadastroUltrassom.laudo_ultrassom&&""!=a.cadastroUltrassom.laudo_ultrassom,expression:"\n        cadastroUltrassom.laudo_ultrassom != undefined &&\n          cadastroUltrassom.laudo_ultrassom != null &&\n          cadastroUltrassom.laudo_ultrassom != ''\n      "}],staticClass:"col-12 q-mt-md text-center"},[i("span",[a._v("Alterar Imagem")]),i("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0,a.tipo_atual_imagem="laudo ultrassom"}}})],1),i("div",{staticClass:"col-12 text-center"},[i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.laudo_ultrassom&&null!=a.cadastroUltrassom.laudo_ultrassom&&""!=a.cadastroUltrassom.laudo_ultrassom,expression:"\n          cadastroUltrassom.laudo_ultrassom != undefined &&\n            cadastroUltrassom.laudo_ultrassom != null &&\n            cadastroUltrassom.laudo_ultrassom != ''\n        "}]},[i("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroUltrassom.laudo_ultrassom&&void 0!=a.cadastroUltrassom.laudo_ultrassom?a.cadastroUltrassom.laudo_ultrassom:"Não há"))]),a._v(" \n      "),i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.laudo_ultrassom&&null!=a.cadastroUltrassom.laudo_ultrassom&&""!=a.cadastroUltrassom.laudo_ultrassom,expression:"\n          cadastroUltrassom.laudo_ultrassom != undefined &&\n            cadastroUltrassom.laudo_ultrassom != null &&\n            cadastroUltrassom.laudo_ultrassom != ''\n        "}]},[i("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_laudo))])]),i("div",{staticClass:"col-12 text-center"},[i("q-zoom",[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.laudo_ultrassom&&null!=a.cadastroUltrassom.laudo_ultrassom&&""!=a.cadastroUltrassom.laudo_ultrassom&&!a.imagemTelaCheiaLaudo,expression:"\n            cadastroUltrassom.laudo_ultrassom != undefined &&\n              cadastroUltrassom.laudo_ultrassom != null &&\n              cadastroUltrassom.laudo_ultrassom != '' &&\n              !imagemTelaCheiaLaudo\n          "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_laudo_ultrassom,alt:"image",id:"imagem_rx"},on:{click:function(t){a.imagemTelaCheiaLaudo=!0}}}),i("div",{staticStyle:{width:"50%",margin:"0 auto"}},[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroUltrassom.laudo_ultrassom&&null!=a.cadastroUltrassom.laudo_ultrassom&&""!=a.cadastroUltrassom.laudo_ultrassom&&a.imagemTelaCheiaLaudo,expression:"\n              cadastroUltrassom.laudo_ultrassom != undefined &&\n                cadastroUltrassom.laudo_ultrassom != null &&\n                cadastroUltrassom.laudo_ultrassom != '' &&\n                imagemTelaCheiaLaudo\n            "}],staticClass:"photo",staticStyle:{width:"100%","max-width":"700px",height:"auto"},attrs:{src:a.url_laudo_ultrassom,alt:"image",id:"imagem_rx"},on:{click:function(t){a.imagemTelaCheiaLaudo=!1}}})],1)],1)],1),i("div",{staticClass:"col-12"},[i("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroUltrassom.laudo_ultrassom||null==a.cadastroUltrassom.laudo_ultrassom||""==a.cadastroUltrassom.laudo_ultrassom,expression:"\n          cadastroUltrassom.laudo_ultrassom == undefined ||\n            cadastroUltrassom.laudo_ultrassom == null ||\n            cadastroUltrassom.laudo_ultrassom == ''\n        "}],attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_laudo},on:{uploadFinalizado:a.atualizarImagem}})],1),i("div",{staticClass:"col-12 flex flex-center"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Gravar Dados",color:"primary",type:"submit"}}),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:void 0==a.id_ultrassom||null==a.id_ultrassom||""==a.id_ultrassom,expression:"\n          id_ultrassom == undefined ||\n            id_ultrassom == null ||\n            id_ultrassom == ''\n        "}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Limpar",color:"primary",type:"reset"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Voltar",color:"primary"}})],1)],1),i("q-dialog",{model:{value:a.popupUploadImagem,callback:function(t){a.popupUploadImagem=t},expression:"popupUploadImagem"}},[i("q-card",{staticClass:"full-width row"},[i("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[i("q-toolbar-title",[a._v("Upload Imagem")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-card-section",{staticClass:"col-12"},[i("UploadImagem",{attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_atual_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1)],1)],1)],1)},s=[],r=i("ded3"),e=i.n(r),l=(i("e6cf"),i("7215")),d=i("2f62"),c=i("2a19"),n={name:"cadastroUltrassom",components:{UploadImagem:l["a"]},computed:e()({},Object(d["c"])("principal",["dadosUsuarioLogado","getUrl"])),filters:{cpf(a){return void 0!=a&&(a=a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)),a}},async mounted(){this.cadastroUltrassom.cadastrante=this.dadosUsuarioLogado.id_usuario,""!=this.id_paciente&&void 0!=this.id_paciente&&await this.carregarDadosPaciente(this.id_paciente);let a=await this.carregarRegistrosMola(this.id_paciente);for(let t=0;t<a.length;t++)this.id_r_mola==a[t].id_r_mola&&(this.numero_mola=this.numero_mola.concat(t+1),this.numero_mola=this.numero_mola.concat("ª"));void 0!=this.id_ultrassom&&null!=this.id_ultrassom?(await this.carregarUltrassom(this.id_ultrassom),await this.atualizarImagem(this.cadastroUltrassom.ultrassom,"ultrassom"),await this.atualizarImagem(this.cadastroUltrassom.laudo_ultrassom,"laudo ultrassom")):this.dataCalendario=this.atribuirDataCalendario()},async beforeDestroy(){this.$emit("recarregarUltrassom")},data(){return{cadastroUltrassom:{id_ultrassom:"",data_ultrassom:"",id_revisor:"",revisor:"",id_cadastrante:"",cadastrante:"",ultrassom:"",laudo_ultrassom:""},popupAbrirCalendario:!1,dataCalendario:"",tipo_imagem:"ultrassom",tipo_laudo:"laudo ultrassom",tipo_atual_imagem:null,url_ultrassom:"",url_laudo_ultrassom:"",popupUploadImagem:!1,validaDataUltrassom:!0,nome_paciente:"",cpf_paciente:"",numero_mola:"",imagemTelaCheiaUltrassom:!1,imagemTelaCheiaLaudo:!1}},methods:{carregarUltrassom(a){return new Promise(((t,i)=>{this.$axios.post("/dados_ultrassom",{id_ultrassom:a}).then((a=>{let i=a.data.resultado[0];""!=i.data_ultrassom?this.dataCalendario=i.data_ultrassom:this.dataCalendario=this.atribuirDataCalendario(),this.cadastroUltrassom=i,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async incluirUltrassom(a){return new Promise(((t,i)=>{let o=a,s=o.data_ultrassom.substring(0,2),r=o.data_ultrassom.substring(3,5),e=o.data_ultrassom.substring(6,10);o.data_ultrassom=e+"-"+("0"+r).slice(-2)+"-"+("0"+s).slice(-2),""==o.revisor?o.revisor=null:o.revisor=o.revisor,""==o.ultrassom?o.ultrassom=null:o.ultrassom=o.ultrassom,""==o.laudo_ultrassom?o.laudo_ultrassom=null:o.laudo_ultrassom=o.laudo_ultrassom;let l=o.data_ultrassom,d=this.id_r_mola,n=o.ultrassom,m=o.laudo_ultrassom,u=this.dadosUsuarioLogado.id_usuario;this.$axios.post("/incluir_ultrassom",{data_ultrassom:l,ultrassom:n,laudo_ultrassom:m,cadastrante:u,id_r_mola:d}).then((a=>{c["a"].create({message:"Dados do Ultrassom incluídos com sucesso.",color:"positive"}),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async alterarUltrassom(a,t){return new Promise(((i,o)=>{let s=t,r=s.data_ultrassom.substring(0,2),e=s.data_ultrassom.substring(3,5),l=s.data_ultrassom.substring(6,10);s.data_ultrassom=l+"-"+("0"+e).slice(-2)+"-"+("0"+r).slice(-2),""==s.revisor?s.revisor=null:s.revisor=s.revisor,""==s.ultrassom?s.ultrassom=null:s.ultrassom=s.ultrassom,""==s.laudo_ultrassom?s.laudo_ultrassom=null:s.laudo_ultrassom=s.laudo_ultrassom;let d=s.data_ultrassom,n=s.ultrassom,m=s.laudo_ultrassom;this.$axios.post("/alterar_ultrassom",{data_ultrassom:d,ultrassom:n,laudo_ultrassom:m,id_ultrassom:a}).then((a=>{c["a"].create({message:"Dados do Ultrassom alterados com sucesso.",color:"positive"}),i(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},carregarRegistrosMola(a){return new Promise(((t,i)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{let i=[];for(let t=0;t<a.data.resultado.length;t++)i.unshift(a.data.resultado[t]);t(i)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},carregarDadosPaciente(a){return new Promise(((t,i)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.nome_paciente=a.data.resultado[0].nome,this.cpf_paciente=a.data.resultado[0].cpf,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async onSubmit(){void 0!=this.id_ultrassom&&null!=this.id_ultrassom?(await this.alterarUltrassom(this.id_ultrassom,this.cadastroUltrassom),this.$emit("recarregarUltrassom")):(await this.incluirUltrassom(this.cadastroUltrassom),this.$emit("recarregarUltrassom"))},onReset(){this.cadastroUltrassom.data_ultrassom="",this.cadastroUltrassom.ultrassom="",this.cadastroUltrassom.laudo_ultrassom="",this.dataCalendario=this.atribuirDataCalendario()},validarData(a){this.popupAbrirCalendario=!1;let t="",i="",o="";if(this.validaDataUltrassom=!0,"calendario"==a?(null==this.dataCalendario&&(this.dataCalendario=this.atribuirDataCalendario()),this.cadastroUltrassom.data_ultrassom=this.dataCalendario):"input"==a&&(""!=this.cadastroUltrassom.data_ultrassom?this.dataCalendario=this.cadastroUltrassom.data_ultrassom:this.dataCalendario=this.atribuirDataCalendario()),this.cadastroUltrassom.data_ultrassom.length>=2&&(t=this.cadastroUltrassom.data_ultrassom.substring(0,2),t=Number(t),(0==t||t>31)&&(this.validaDataUltrassom=!1),this.cadastroUltrassom.data_ultrassom.length>=5&&(i=this.cadastroUltrassom.data_ultrassom.substring(3,5),i=Number(i),(0==i||i>12)&&(this.validaDataUltrassom=!1),30!=t&&31!=t||2!=i||(this.validaDataUltrassom=!1),31!=t||4!=i&&6!=i&&9!=i&&11!=i||(this.validaDataUltrassom=!1)),10==this.cadastroUltrassom.data_ultrassom.length)){o=this.cadastroUltrassom.data_ultrassom.substring(6,10),o=Number(o);let a=!1;(o%4==0&&o%100!=0||o%400==0)&&(a=!0),29==t&&2==i&&0==a&&(this.validaDataUltrassom=!1);let s=new Date;o>s.getFullYear()&&(this.validaDataUltrassom=!1);let r=new Date(o,i-1,t);r>s&&(this.validaDataUltrassom=!1)}},atribuirDataCalendario(){let a=new Date,t=a.getDate(),i=a.getMonth(),o=a.getFullYear();return("0"+t).slice(-2)+"/"+("0"+(i+1)).slice(-2)+"/"+o},atualizarImagem(a,t=null){"ultrassom"==t?(this.cadastroUltrassom.ultrassom=a,this.url_ultrassom=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1):"laudo ultrassom"==t&&(this.cadastroUltrassom.laudo_ultrassom=a,this.url_laudo_ultrassom=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1)}},props:["id_paciente","id_r_mola","id_ultrassom"]},m=n,u=i("2877"),p=i("f09f"),g=i("65c6"),_=i("6ac5"),h=i("9c40"),f=i("a370"),v=i("0378"),b=i("27f9"),x=i("0016"),C=i("24e8"),w=i("52ee"),q=i("068f"),D=i("7f67"),U=i("eebe"),T=i.n(U),y=Object(u["a"])(m,o,s,!1,null,null,null);t["default"]=y.exports;T()(y,"components",{QCard:p["a"],QToolbar:g["a"],QToolbarTitle:_["a"],QBtn:h["a"],QCardSection:f["a"],QForm:v["a"],QInput:b["a"],QIcon:x["a"],QDialog:C["a"],QDate:w["a"],QImg:q["a"]}),T()(y,"directives",{ClosePopup:D["a"]})},"29fe":function(a,t,i){"use strict";var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("div",{staticClass:"row"},[i("div",{staticClass:"q-mx-auto col-12"},[i("q-scroll-area",{ref:"chatArea",staticClass:"full-width",staticStyle:{height:"300px"},attrs:{visible:""},on:{scroll:a.scrollinfo}},a._l(a.mensagens,(function(t){return i("q-chat-message",{key:t.id,staticClass:"q-mx-sm",attrs:{name:t.remetente,text:[t.texto],sent:t.remetenteid==a.dadosUsuarioLogado.id_usuario,"bg-color":t.remetenteid==a.dadosUsuarioLogado.id_usuario?"green-3":"grey-3"}})})),1)],1),i("q-form",{staticClass:"row full-width on-left q-mb-md",on:{submit:a.enviarMensagem}},[i("div",{staticClass:"q-mx-auto col-12 row "},[i("q-input",{ref:"mensagem",staticClass:"q-pa-xs col-9",attrs:{label:"Mensagem","input-style":"height:40px",autofocus:"",dense:"",type:"textarea",outlined:"",maxlength:"250",counter:""},model:{value:a.chat.mensagem,callback:function(t){a.$set(a.chat,"mensagem",t)},expression:"chat.mensagem"}}),i("q-btn",{staticClass:"q-mt-xs col-3",staticStyle:{height:"40px"},attrs:{label:"Enviar",type:"submit",color:"primary",dense:""}})],1)])],1)},s=[],r=i("ded3"),e=i.n(r),l=(i("e6cf"),i("2f62")),d={name:"PageIndex",data(){return{socket:{},chat:{mensagem:""},mensagens:[],scrollsize:0}},props:["id_paciente","reload"],watch:{scrollsize:function(a){this.$refs.chatArea.setScrollPosition(a-300,100)},id_paciente:async function(){await this.carregarMensagens()}},computed:e()({},Object(l["c"])("principal",["dadosUsuarioLogado"])),sockets:{mensagem:function(a){let t={id:a.id,remetenteid:a.remetenteid,remetente:a.remetente,texto:a.msg};this.mensagens.push(t)},mensagensAnteriores:function(a){this.mensagens=[];for(let t in a){let i={id:a[t].idMsg,remetenteid:a[t].remetenteid,remetente:a[t].remetente,texto:a[t].msg};this.mensagens.push(i)}}},mounted(){this.carregarMensagens()},destroyed(){this.$socket.emit("logout",this.id_paciente)},methods:{carregarMensagens(){if(Boolean(this.id_paciente)){let a=this.id_paciente,t=this.dadosUsuarioLogado.id_usuario;console.log("carregarMensagens - Mensagens Chat ",this.id_paciente),this.$socket.emit("login",{id_paciente:a,id_usuario:t})}},enviarMensagem(){let a={remetenteid:this.dadosUsuarioLogado.id_usuario,remetente:this.dadosUsuarioLogado.nome,destinatario:this.id_paciente,msg:this.chat.mensagem};this.$socket.emit("enviarMensagem",a),this.chat.mensagem="",this.$refs.mensagem.focus()},scrollinfo(a){const t=a.verticalSize;this.scrollsize=t}}},c=d,n=i("2877"),m=i("4983"),u=i("8169"),p=i("0378"),g=i("27f9"),_=i("9c40"),h=i("eebe"),f=i.n(h),v=Object(n["a"])(c,o,s,!1,null,null,null);t["a"]=v.exports;f()(v,"components",{QScrollArea:m["a"],QChatMessage:u["a"],QForm:p["a"],QInput:g["a"],QBtn:_["a"]})},"45d6":function(a,t,i){"use strict";i.r(t);var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-card",[i("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[i("q-toolbar-title",[a._v("Cadastro Raio-X")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-form",{staticClass:"full-width row",on:{submit:function(t){return t.stopPropagation(),a.onSubmit(t)},reset:a.onReset}},[i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Nome Paciente: ")]),a._v(a._s(a.nome_paciente))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("CPF: ")]),a._v(a._s(a._f("cpf")(a.cpf_paciente)))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Número Mola:")]),a._v(" "+a._s(a.numero_mola))]),i("q-input",{staticClass:"q-pa-xs col-12",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataRx||"Digite uma data válida"}],label:"Data do Exame",mask:"##/##/####"},on:{input:function(t){return a.validarData("input")}},scopedSlots:a._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendario=!0}}},[i("q-dialog",{model:{value:a.popupAbrirCalendario,callback:function(t){a.popupAbrirCalendario=t},expression:"popupAbrirCalendario"}},[i("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario")}},model:{value:a.dataCalendario,callback:function(t){a.dataCalendario=t},expression:"dataCalendario"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroRx.data_raiox,callback:function(t){a.$set(a.cadastroRx,"data_raiox",t)},expression:"cadastroRx.data_raiox"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroRx.id_imagem&&null!=a.cadastroRx.id_imagem&&""!=a.cadastroRx.id_imagem,expression:"\n        cadastroRx.id_imagem != undefined &&\n          cadastroRx.id_imagem != null &&\n          cadastroRx.id_imagem != ''\n      "}],staticClass:"col-12 q-mt-md text-center"},[i("span",[a._v("Alterar Imagem")]),i("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0}}})],1),i("div",{staticClass:"col-12 text-center"},[i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroRx.id_imagem&&null!=a.cadastroRx.id_imagem&&""!=a.cadastroRx.id_imagem,expression:"\n          cadastroRx.id_imagem != undefined &&\n            cadastroRx.id_imagem != null &&\n            cadastroRx.id_imagem != ''\n        "}]},[i("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroRx.id_imagem&&void 0!=a.cadastroRx.id_imagem?a.cadastroRx.id_imagem:"Não há"))]),a._v(" \n      "),i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroRx.id_imagem&&null!=a.cadastroRx.id_imagem&&""!=a.cadastroRx.id_imagem,expression:"\n          cadastroRx.id_imagem != undefined &&\n            cadastroRx.id_imagem != null &&\n            cadastroRx.id_imagem != ''\n        "}]},[i("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_imagem))])]),i("div",{staticClass:"col-12 text-center"},[i("q-zoom",[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroRx.id_imagem&&null!=a.cadastroRx.id_imagem&&""!=a.cadastroRx.id_imagem&&!a.imagemTelaCheia,expression:"\n            cadastroRx.id_imagem != undefined &&\n              cadastroRx.id_imagem != null &&\n              cadastroRx.id_imagem != '' &&\n              !imagemTelaCheia\n          "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_imagem,alt:"image",id:"imagem_rx"},on:{click:function(t){a.imagemTelaCheia=!0}}}),i("div",{staticStyle:{width:"50%",margin:"0 auto"}},[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroRx.id_imagem&&null!=a.cadastroRx.id_imagem&&""!=a.cadastroRx.id_imagem&&a.imagemTelaCheia,expression:"\n              cadastroRx.id_imagem != undefined &&\n                cadastroRx.id_imagem != null &&\n                cadastroRx.id_imagem != '' &&\n                imagemTelaCheia\n            "}],staticStyle:{width:"100%","max-width":"700px",height:"auto"},attrs:{src:a.url_imagem,alt:"image",id:"imagem_raiox"},on:{click:function(t){a.imagemTelaCheia=!1}}})],1)],1)],1),i("div",{staticClass:"col-12"},[i("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroRx.id_imagem||null==a.cadastroRx.id_imagem||""==a.cadastroRx.id_imagem,expression:"\n          cadastroRx.id_imagem == undefined ||\n            cadastroRx.id_imagem == null ||\n            cadastroRx.id_imagem == ''\n        "}],attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1),i("div",{staticClass:"col-12 flex flex-center"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Gravar Dados",color:"primary",type:"submit"}}),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:void 0==a.id_raiox||null==a.id_raiox||""==a.id_raiox,expression:"id_raiox == undefined || id_raiox == null || id_raiox == ''"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Limpar",color:"primary",type:"reset"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Voltar",color:"primary"}})],1)],1),i("q-dialog",{model:{value:a.popupUploadImagem,callback:function(t){a.popupUploadImagem=t},expression:"popupUploadImagem"}},[i("q-card",{staticClass:"full-width row"},[i("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[i("q-toolbar-title",[a._v("Upload Imagem")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-card-section",{staticClass:"col-12"},[i("UploadImagem",{attrs:{id_r_mola:a.id_r_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1)],1)],1)],1)},s=[],r=i("ded3"),e=i.n(r),l=(i("e6cf"),i("7215")),d=i("2f62"),c=i("2a19"),n={name:"cadastroRx",components:{UploadImagem:l["a"]},computed:e()({},Object(d["c"])("principal",["dadosUsuarioLogado","getUrl"])),filters:{cpf(a){return void 0!=a&&(a=a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)),a}},async mounted(){this.cadastroRx.cadastrante=this.dadosUsuarioLogado.id_usuario,""!=this.id_paciente&&void 0!=this.id_paciente&&await this.carregarDadosPaciente(this.id_paciente);let a=await this.carregarRegistrosMola(this.id_paciente);for(let t=0;t<a.length;t++)this.id_r_mola==a[t].id_r_mola&&(this.numero_mola=this.numero_mola.concat(t+1),this.numero_mola=this.numero_mola.concat("ª"));void 0!=this.id_raiox&&null!=this.id_raiox?(await this.carregarRaiox(this.id_raiox),await this.atualizarImagem(this.cadastroRx.id_imagem)):this.dataCalendario=this.atribuirDataCalendario()},async beforeDestroy(){this.$emit("recarregarRx")},data(){return{cadastroRx:{id_raiox:"",data_raiox:"",id_revisor:"",revisor:"",id_cadastrante:"",cadastrante:"",id_imagem:""},popupAbrirCalendario:!1,dataCalendario:"",tipo_imagem:"rx",url_imagem:"",popupUploadImagem:!1,validaDataRx:!0,nome_paciente:"",cpf_paciente:"",numero_mola:"",imagemTelaCheia:!1}},methods:{carregarRaiox(a){return new Promise(((t,i)=>{this.$axios.post("/dados_raiox",{id_raiox:a}).then((a=>{let i=a.data.resultado[0];""!=i.data_raiox?this.dataCalendario=i.data_raiox:this.dataCalendario=this.atribuirDataCalendario(),this.cadastroRx=i,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async incluirRaiox(a){return new Promise(((t,i)=>{let o=a,s=o.data_raiox.substring(0,2),r=o.data_raiox.substring(3,5),e=o.data_raiox.substring(6,10);o.data_raiox=e+"-"+("0"+r).slice(-2)+"-"+("0"+s).slice(-2),""==o.revisor?o.revisor=null:o.revisor=o.revisor,""==o.id_imagem?o.id_imagem=null:o.id_imagem=o.id_imagem;let l=o.data_raiox,d=this.id_r_mola,n=o.id_imagem,m=this.dadosUsuarioLogado.id_usuario;this.$axios.post("/incluir_raiox",{data_raiox:l,id_imagem:n,cadastrante:m,id_r_mola:d}).then((a=>{c["a"].create({message:"Dados do Raio-X incluídos com sucesso.",color:"positive"}),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async alterarRaiox(a,t){return new Promise(((i,o)=>{let s=t,r=s.data_raiox.substring(0,2),e=s.data_raiox.substring(3,5),l=s.data_raiox.substring(6,10);s.data_raiox=l+"-"+("0"+e).slice(-2)+"-"+("0"+r).slice(-2),""==s.revisor?s.revisor=null:s.revisor=s.revisor,""==s.id_imagem?s.id_imagem=null:s.id_imagem=s.id_imagem;let d=s.data_raiox,n=s.id_imagem;this.$axios.post("/alterar_raiox",{data_raiox:d,id_imagem:n,id_raiox:a}).then((a=>{c["a"].create({message:"Dados do Raio-X alterados com sucesso.",color:"positive"}),i(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},carregarRegistrosMola(a){return new Promise(((t,i)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{let i=[];for(let t=0;t<a.data.resultado.length;t++)i.unshift(a.data.resultado[t]);t(i)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},carregarDadosPaciente(a){return new Promise(((t,i)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.nome_paciente=a.data.resultado[0].nome,this.cpf_paciente=a.data.resultado[0].cpf,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async onSubmit(){void 0!=this.id_raiox&&null!=this.id_raiox?(await this.alterarRaiox(this.id_raiox,this.cadastroRx),this.$emit("recarregarRx")):(await this.incluirRaiox(this.cadastroRx),this.$emit("recarregarRx"))},onReset(){this.cadastroRx.data_raiox="",this.cadastroRx.id_imagem="",this.dataCalendario=this.atribuirDataCalendario()},validarData(a){this.popupAbrirCalendario=!1;let t="",i="",o="";if(this.validaDataRx=!0,"calendario"==a?(null==this.dataCalendario&&(this.dataCalendario=this.atribuirDataCalendario()),this.cadastroRx.data_raiox=this.dataCalendario):"input"==a&&(""!=this.cadastroRx.data_raiox?this.dataCalendario=this.cadastroRx.data_raiox:this.dataCalendario=this.atribuirDataCalendario()),this.cadastroRx.data_raiox.length>=2&&(t=this.cadastroRx.data_raiox.substring(0,2),t=Number(t),(0==t||t>31)&&(this.validaDataRx=!1),this.cadastroRx.data_raiox.length>=5&&(i=this.cadastroRx.data_raiox.substring(3,5),i=Number(i),(0==i||i>12)&&(this.validaDataRx=!1),30!=t&&31!=t||2!=i||(this.validaDataRx=!1),31!=t||4!=i&&6!=i&&9!=i&&11!=i||(this.validaDataRx=!1)),10==this.cadastroRx.data_raiox.length)){o=this.cadastroRx.data_raiox.substring(6,10),o=Number(o);let a=!1;(o%4==0&&o%100!=0||o%400==0)&&(a=!0),29==t&&2==i&&0==a&&(this.validaDataRx=!1);let s=new Date;o>s.getFullYear()&&(this.validaDataRx=!1);let r=new Date(o,i-1,t);r>s&&(this.validaDataRx=!1)}},atribuirDataCalendario(){let a=new Date,t=a.getDate(),i=a.getMonth(),o=a.getFullYear();return("0"+t).slice(-2)+"/"+("0"+(i+1)).slice(-2)+"/"+o},atualizarImagem(a){this.cadastroRx.id_imagem=a,this.url_imagem=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1}},props:["id_paciente","id_r_mola","id_raiox"]},m=n,u=i("2877"),p=i("f09f"),g=i("65c6"),_=i("6ac5"),h=i("9c40"),f=i("a370"),v=i("0378"),b=i("27f9"),x=i("0016"),C=i("24e8"),w=i("52ee"),q=i("068f"),D=i("7f67"),U=i("eebe"),T=i.n(U),y=Object(u["a"])(m,o,s,!1,null,null,null);t["default"]=y.exports;T()(y,"components",{QCard:p["a"],QToolbar:g["a"],QToolbarTitle:_["a"],QBtn:h["a"],QCardSection:f["a"],QForm:v["a"],QInput:b["a"],QIcon:x["a"],QDialog:C["a"],QDate:w["a"],QImg:q["a"]}),T()(y,"directives",{ClosePopup:D["a"]})},"50c6":function(a,t,i){"use strict";i.r(t);var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-card",[i("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[i("q-toolbar-title",[a._v("Cadastro Anatomia Patológica")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-form",{staticClass:"full-width row",on:{submit:function(t){return t.stopPropagation(),a.onSubmit(t)},reset:a.onReset}},[i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Nome Paciente: ")]),a._v(a._s(a.nome_paciente))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("CPF: ")]),a._v(a._s(a._f("cpf")(a.cpf_paciente)))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Número Mola:")]),a._v(" "+a._s(a.numero_mola))]),i("q-input",{ref:"data_inicial",staticClass:"q-pa-xs q-mb-sm col-xs-12 col-sm-4 col-md-4 col-lg-4 col-xl-4",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataAp||"Digite uma data válida"}],label:"Data AP",mask:"##/##/####"},on:{input:function(t){return a.validarData("input")}},scopedSlots:a._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendario=!0}}},[i("q-dialog",{model:{value:a.popupAbrirCalendario,callback:function(t){a.popupAbrirCalendario=t},expression:"popupAbrirCalendario"}},[i("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario")}},model:{value:a.dataCalendario,callback:function(t){a.dataCalendario=t},expression:"dataCalendario"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroAp.ap_data,callback:function(t){a.$set(a.cadastroAp,"ap_data",t)},expression:"cadastroAp.ap_data"}}),i("q-toggle",{staticClass:"q-pa-xs q-mb-sm col-xs-12 col-sm-8 col-md-8 col-lg-8 col-xl-8",attrs:{val:"cadastroAp.ap_proprio",label:"AP foi realizada no próprio serviço?"},model:{value:a.toggle_ap_proprio,callback:function(t){a.toggle_ap_proprio=t},expression:"toggle_ap_proprio"}}),i("q-select",{staticClass:"q-pa-xs q-mb-sm col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12",attrs:{options:a.optResultadoAp,label:"Resultado Anatomia",dense:"","emit-value":"","map-options":""},model:{value:a.cadastroAp.id_resultado_ap,callback:function(t){a.$set(a.cadastroAp,"id_resultado_ap",t)},expression:"cadastroAp.id_resultado_ap"}}),i("div",{staticClass:"col-12 flex flex-center"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Gravar Dados",color:"primary",type:"submit"}}),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:void 0==a.id_ap||null==a.id_ap||""==a.id_ap,expression:"id_ap == undefined || id_ap == null || id_ap == ''"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Limpar",color:"primary",type:"reset"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Voltar",color:"primary"}})],1)],1)],1)},s=[],r=(i("e6cf"),i("2a19")),e={props:["id_paciente","id_ap","id_mola"],watch:{id_mola:async function(){await this.carregarAp(this.id_ap)}},filters:{cpf(a){return void 0!=a&&(a=a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)),a}},data(){return{toggle_ap_proprio:!1,cadastroAp:{ap_proprio:"",id_resultado_ap:"",ap_data:""},optResultadoAp:[],nome_paciente:"",cpf_paciente:"",numero_mola:"",validaDataAp:!0,popupAbrirCalendario:!1,dataCalendario:""}},async mounted(){""!=this.id_paciente&&void 0!=this.id_paciente&&await this.carregarDadosPaciente(this.id_paciente);let a=await this.carregarRegistrosMola(this.id_paciente);for(let t=0;t<a.length;t++)this.id_mola==a[t].id_r_mola&&(this.numero_mola=this.numero_mola.concat(t+1),this.numero_mola=this.numero_mola.concat("ª"));await this.carregarResultadoAp(),void 0!=this.id_ap&&null!=this.id_ap?await this.carregarAp(this.id_ap):(this.dataCalendario=this.atribuirDataCalendario(),this.dataCalendarioFim=this.atribuirDataCalendario())},async beforeDestroy(){this.$emit("recarregarAp")},methods:{carregarResultadoAp(){let a={descricao:""};return new Promise(((t,i)=>{this.$axios.post("/consultar_resultado_ap",a).then((a=>{this.optResultadoAp=a.data.resultado.map((a=>({value:a.id,label:a.descricao})));let i={label:"",value:""};this.optResultadoAp.unshift(i),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},carregarAp(a){return new Promise(((t,i)=>{this.$axios.post("/dados_ap",{id_ap:a}).then((a=>{let i=a.data.resultado[0];""!=i.ap_data?this.dataCalendario=i.ap_data:this.dataCalendario=this.atribuirDataCalendario(),this.cadastroAp=i,1==this.cadastroAp.ap_proprio?this.toggle_ap_proprio=!0:this.toggle_ap_proprio=!1,console.log(this.cadastroAp.ap_proprio),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async incluirAp(a,t){return new Promise(((i,o)=>{let s=t,e=s.ap_data.substring(0,2),l=s.ap_data.substring(3,5),d=s.ap_data.substring(6,10);s.ap_data=d+"-"+("0"+l).slice(-2)+"-"+("0"+e).slice(-2),1==this.toggle_ap_proprio?s.ap_proprio=1:s.ap_proprio=0,""==s.ap_proprio?s.ap_proprio=null:s.ap_proprio=s.ap_proprio,""==s.ap_data?s.ap_data=null:s.ap_data=s.ap_data,""==s.id_resultado_ap?s.id_resultado_ap=null:s.id_resultado_ap=s.id_resultado_ap;let c=s.ap_proprio,n=s.ap_data,m=s.id_resultado_ap;this.$axios.post("/incluir_ap",{ap_proprio:c,ap_data:n,id_resultado_ap:m,id_r_mola:a}).then((a=>{r["a"].create({message:"Dados da Anatomia Patológica incluídos com sucesso.",color:"positive"}),i(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},async alterarAp(a,t){return new Promise(((i,o)=>{let s=t,e=s.ap_data.substring(0,2),l=s.ap_data.substring(3,5),d=s.ap_data.substring(6,10);s.ap_data=d+"-"+("0"+l).slice(-2)+"-"+("0"+e).slice(-2),1==this.toggle_ap_proprio?s.ap_proprio=1:s.ap_proprio=0,""==s.ap_proprio?s.ap_proprio=null:s.ap_proprio=s.ap_proprio,""==s.ap_data?s.ap_data=null:s.ap_data=s.ap_data,""==s.id_resultado_ap?s.id_resultado_ap=null:s.id_resultado_ap=s.id_resultado_ap;let c=s.ap_proprio,n=s.ap_data,m=s.id_resultado_ap;this.$axios.post("/alterar_ap",{ap_proprio:c,ap_data:n,id_resultado_ap:m,id_ap:a}).then((a=>{r["a"].create({message:"Dados da Anatomia Patológica alterados com sucesso.",color:"positive"}),i(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},carregarRegistrosMola(a){return new Promise(((t,i)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{let i=[];for(let t=0;t<a.data.resultado.length;t++)i.unshift(a.data.resultado[t]);t(i)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},carregarDadosPaciente(a){return new Promise(((t,i)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.nome_paciente=a.data.resultado[0].nome,this.cpf_paciente=a.data.resultado[0].cpf,console.log("dados_paciente",a.data),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async onSubmit(){void 0!=this.id_ap&&null!=this.id_ap?(await this.alterarAp(this.id_ap,this.cadastroAp),console.log("emitindo ",this.$emit("recarregarAp"))):(await this.incluirAp(this.id_mola,this.cadastroAp),this.$emit("recarregarAp"))},onReset(){this.cadastroAp.ap_data="",this.cadastroAp.ap_proprio="",this.cadastroAp.id_resultado_ap="",this.dataCalendario=this.atribuirDataCalendario()},validarData(a){this.popupAbrirCalendario=!1;let t="",i="",o="";if(this.validaDataAp=!0,"calendario"==a?(null==this.dataCalendario&&(this.dataCalendario=this.atribuirDataCalendario()),this.cadastroAp.ap_data=this.dataCalendario):"input"==a&&(""!=this.cadastroAp.ap_data?this.dataCalendario=this.cadastroAp.ap_data:this.dataCalendario=this.atribuirDataCalendario()),this.cadastroAp.ap_data.length>=2&&(t=this.cadastroAp.ap_data.substring(0,2),t=Number(t),(0==t||t>31)&&(this.validaDataAp=!1),this.cadastroAp.ap_data.length>=5&&(i=this.cadastroAp.ap_data.substring(3,5),i=Number(i),(0==i||i>12)&&(this.validaDataAp=!1),30!=t&&31!=t||2!=i||(this.validaDataAp=!1),31!=t||4!=i&&6!=i&&9!=i&&11!=i||(this.validaDataAp=!1)),10==this.cadastroAp.ap_data.length)){o=this.cadastroAp.ap_data.substring(6,10),o=Number(o);let a=!1;(o%4==0&&o%100!=0||o%400==0)&&(a=!0),29==t&&2==i&&0==a&&(this.validaDataAp=!1)}},atribuirDataCalendario(){let a=new Date,t=a.getDate(),i=a.getMonth(),o=a.getFullYear();return("0"+t).slice(-2)+"/"+("0"+(i+1)).slice(-2)+"/"+o}}},l=e,d=i("2877"),c=i("f09f"),n=i("65c6"),m=i("6ac5"),u=i("9c40"),p=i("a370"),g=i("0378"),_=i("27f9"),h=i("0016"),f=i("24e8"),v=i("52ee"),b=i("9564"),x=i("ddd8"),C=i("7f67"),w=i("eebe"),q=i.n(w),D=Object(d["a"])(l,o,s,!1,null,null,null);t["default"]=D.exports;q()(D,"components",{QCard:c["a"],QToolbar:n["a"],QToolbarTitle:m["a"],QBtn:u["a"],QCardSection:p["a"],QForm:g["a"],QInput:_["a"],QIcon:h["a"],QDialog:f["a"],QDate:v["a"],QToggle:b["a"],QSelect:x["a"]}),q()(D,"directives",{ClosePopup:C["a"]})},"51e2":function(a,t,i){"use strict";var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-card",[i("q-toolbar",{staticClass:"bg-primary text-white"},[i("q-toolbar-title",[a._v("Adicionar Indicação")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-card-section",{staticClass:"q-pt-none"},[i("q-form",{on:{submit:a.onSubmit,reset:a.onReset}},[i("q-input",{attrs:{type:"text",label:"Descrição",rules:[function(a){return a.length>0||"Digite uma indicação"},function(a){return a.length<=50||"A indicação deve ter no máximo 50 caracteres"}]},model:{value:a.cadastroIndicacao.descricao,callback:function(t){a.$set(a.cadastroIndicacao,"descricao",t)},expression:"cadastroIndicacao.descricao"}}),i("br"),i("div",{staticClass:"flex-center q-gutter-xl"},[i("q-btn",{ref:"btnGravar",attrs:{type:"submit",color:"primary",label:"Gravar"}})],1)],1)],1)],1)},s=[],r=(i("e6cf"),{name:"CadastroEdicaoIndicacao",data(){return{cadastroIndicacao:{descricao:""},modalCadastroInd:!0}},mounted(){},methods:{async onSubmit(){console.log("incluir");await this.incluirIndicacao();this.$emit("acionarCarregarInd"),this.$emit("fecharPopup")},onReset(){this.cadastroIndicacao.descricao=""},incluirIndicacao(){return new Promise(((a,t)=>{let i=this.cadastroIndicacao;this.$axios.post("/incluir_indicacao",i).then((t=>{a(t.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))}}}),e=r,l=i("2877"),d=i("f09f"),c=i("65c6"),n=i("6ac5"),m=i("9c40"),u=i("a370"),p=i("0378"),g=i("27f9"),_=i("7f67"),h=i("eebe"),f=i.n(h),v=Object(l["a"])(e,o,s,!1,null,null,null);t["a"]=v.exports;f()(v,"components",{QCard:d["a"],QToolbar:c["a"],QToolbarTitle:n["a"],QBtn:m["a"],QCardSection:u["a"],QForm:p["a"],QInput:g["a"]}),f()(v,"directives",{ClosePopup:_["a"]})},"63e7":function(a,t,i){"use strict";i.r(t);var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-card",[i("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[i("q-toolbar-title",[a._v("Cadastro Quimioterapia")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-form",{staticClass:"full-width row",on:{submit:function(t){return t.stopPropagation(),a.onSubmit(t)},reset:a.onReset}},[i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Nome Paciente: ")]),a._v(a._s(a.nome_paciente))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("CPF: ")]),a._v(a._s(a._f("cpf")(a.cpf_paciente)))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Número Mola:")]),a._v(" "+a._s(a.numero_mola))]),i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.id_quimio&&null!=a.id_quimio&&""!=a.id_quimio,expression:"id_quimio != undefined && id_quimio != null && id_quimio != ''"}],staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Número Ciclo:")]),a._v(" "+a._s(a.cadastroQuimio.ciclo))]),i("q-input",{ref:"data_inicial",staticClass:"q-pa-xs q-mb-sm col-xs-12 col-sm-4 col-md-4 col-lg-4 col-xl-4",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataInicial&&0==a.data_inicio_maior||"Digite uma data válida"}],label:"Data Inicial",mask:"##/##/####"},on:{input:function(t){return a.validarData("input","inicio")}},scopedSlots:a._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendarioInicio=!0,a.tipo_data="inicio"}}},[i("q-dialog",{model:{value:a.popupAbrirCalendarioInicio,callback:function(t){a.popupAbrirCalendarioInicio=t},expression:"popupAbrirCalendarioInicio"}},[i("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario","inicio")}},model:{value:a.dataCalendarioInicio,callback:function(t){a.dataCalendarioInicio=t},expression:"dataCalendarioInicio"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroQuimio.inicio,callback:function(t){a.$set(a.cadastroQuimio,"inicio",t)},expression:"cadastroQuimio.inicio"}}),i("q-input",{staticClass:"q-pa-xs q-mb-sm col-xs-12 col-sm-4 col-md-4 col-lg-4 col-xl-4",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataFinal||"Digite uma data válida"}],label:"Data Final",mask:"##/##/####"},on:{input:function(t){return a.validarData("input","fim")}},scopedSlots:a._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendarioFim=!0,a.tipo_data="fim"}}},[i("q-dialog",{model:{value:a.popupAbrirCalendarioFim,callback:function(t){a.popupAbrirCalendarioFim=t},expression:"popupAbrirCalendarioFim"}},[i("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario","fim")}},model:{value:a.dataCalendarioFim,callback:function(t){a.dataCalendarioFim=t},expression:"dataCalendarioFim"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroQuimio.fim,callback:function(t){a.$set(a.cadastroQuimio,"fim",t)},expression:"cadastroQuimio.fim"}}),i("q-input",{ref:"hcg_pre_ciclo",staticClass:"q-pa-xs q-mb-sm col-12 col-sm-4 col-md-4 col-lg-4 col-xl-4",attrs:{type:"number",label:"hCG Pré-Ciclo",maxlength:"7",dense:"",rules:[function(a){return null!=a||"Digite um número"}],"reactive-rules":""},model:{value:a.cadastroQuimio.result_hcg_pre,callback:function(t){a.$set(a.cadastroQuimio,"result_hcg_pre",t)},expression:"cadastroQuimio.result_hcg_pre"}}),i("q-select",{staticClass:"q-pa-xs q-mb-sm col-xs-12 col-sm-6 col-md-6 col-lg-6 col-xl-6",attrs:{options:a.optGrauEstadiamento,label:"Grau de Estadiamento",dense:"","emit-value":"","map-options":""},model:{value:a.cadastroQuimio.grau_estad,callback:function(t){a.$set(a.cadastroQuimio,"grau_estad",t)},expression:"cadastroQuimio.grau_estad"}}),i("q-input",{ref:"nivel_estadiamento",staticClass:"q-pa-xs q-mb-sm col-12 col-sm-6 col-md-6 col-lg-6 col-xl-6",attrs:{type:"number",label:"Nível de Estadiamento",maxlength:"7",dense:"",rules:[function(a){return null!=a||"Digite um número"}],"reactive-rules":""},model:{value:a.cadastroQuimio.nivel_estad,callback:function(t){a.$set(a.cadastroQuimio,"nivel_estad",t)},expression:"cadastroQuimio.nivel_estad"}}),i("q-input",{ref:"droga",staticClass:"q-pa-xs q-mb-md col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12",attrs:{label:"Droga Utilizada","input-style":"height:40px",autofocus:"",dense:"",type:"textarea",outlined:"",maxlength:"250",counter:""},model:{value:a.cadastroQuimio.droga,callback:function(t){a.$set(a.cadastroQuimio,"droga",t)},expression:"cadastroQuimio.droga"}}),i("q-input",{ref:"toxicidade",staticClass:"q-pa-xs q-mb-md col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12",attrs:{label:"Toxicidade","input-style":"height:40px",autofocus:"",dense:"",type:"textarea",outlined:"",maxlength:"250",counter:""},model:{value:a.cadastroQuimio.toxicidade,callback:function(t){a.$set(a.cadastroQuimio,"toxicidade",t)},expression:"cadastroQuimio.toxicidade"}}),i("q-input",{ref:"observacoes",staticClass:"q-pa-xs q-mb-sm col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12",attrs:{label:"Observações","input-style":"height:40px",autofocus:"",dense:"",type:"textarea",outlined:"",maxlength:"250",counter:""},model:{value:a.cadastroQuimio.obs,callback:function(t){a.$set(a.cadastroQuimio,"obs",t)},expression:"cadastroQuimio.obs"}}),i("div",{staticClass:"col-12 flex flex-center"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Gravar Dados",color:"primary",type:"submit"}}),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:void 0==a.id_quimio||null==a.id_quimio||""==a.id_quimio,expression:"\n          id_quimio == undefined || id_quimio == null || id_quimio == ''\n        "}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Limpar",color:"primary",type:"reset"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Voltar",color:"primary"}})],1)],1)],1)},s=[],r=(i("e6cf"),i("2a19")),e={props:["id_paciente","id_quimio","id_mola"],watch:{id_mola:async function(){await this.carregarQuimio(this.id_quimio)}},filters:{cpf(a){return void 0!=a&&(a=a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)),a}},data(){return{cadastroQuimio:{ciclo:"",inicio:"",fim:"",result_hcg_pre:"",grau_estad:"",nivel_estad:"",droga:"",toxicidade:"",obs:""},optGrauEstadiamento:[{label:"",value:null},{label:"I",value:1},{label:"II",value:2},{label:"III",value:3},{label:"IV",value:4}],nome_paciente:"",cpf_paciente:"",numero_mola:"",validaDataInicial:!0,validaDataFinal:!0,popupAbrirCalendarioInicio:!1,popupAbrirCalendarioFim:!1,dataCalendarioInicio:"",dataCalendarioFim:"",tipo_data:"",data_inicio_maior:!1}},async mounted(){""!=this.id_paciente&&void 0!=this.id_paciente&&await this.carregarDadosPaciente(this.id_paciente);let a=await this.carregarRegistrosMola(this.id_paciente);for(let t=0;t<a.length;t++)this.id_mola==a[t].id_r_mola&&(this.numero_mola=this.numero_mola.concat(t+1),this.numero_mola=this.numero_mola.concat("ª"));void 0!=this.id_quimio&&null!=this.id_quimio?await this.carregarQuimio(this.id_quimio):(this.dataCalendarioInicio=this.atribuirDataCalendario(),this.dataCalendarioFim=this.atribuirDataCalendario())},async beforeDestroy(){this.$emit("recarregarQuimio")},methods:{carregarQuimio(a){return new Promise(((t,i)=>{this.$axios.post("/dados_quimioterapia",{id_quimio:a}).then((a=>{let i=a.data.resultado[0];""!=i.inicio?(this.dataCalendarioInicio=i.inicio,this.tipo_data="inicio"):this.dataCalendarioInicio=this.atribuirDataCalendario(),""!=i.fim?(this.dataCalendarioFim=i.fim,this.tipo_data="fim"):this.dataCalendarioFim=this.atribuirDataCalendario(),this.cadastroQuimio=i,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async incluirQuimio(a,t){return new Promise(((i,o)=>{let s=t,e=s.inicio.substring(0,2),l=s.inicio.substring(3,5),d=s.inicio.substring(6,10);s.inicio=d+"-"+("0"+l).slice(-2)+"-"+("0"+e).slice(-2);let c=s.fim.substring(0,2),n=s.fim.substring(3,5),m=s.fim.substring(6,10);s.fim=m+"-"+("0"+n).slice(-2)+"-"+("0"+c).slice(-2),""==s.result_hcg_pre?s.result_hcg_pre=null:s.result_hcg_pre=s.result_hcg_pre,""==s.grau_estad?s.grau_estad=null:s.grau_estad=s.grau_estad,""==s.nivel_estad?s.nivel_estad=null:s.nivel_estad=s.nivel_estad,""==s.droga?s.droga=null:s.droga=s.droga,""==s.toxicidade?s.toxicidade=null:s.toxicidade=s.toxicidade,""==s.obs?s.obs=null:s.obs=s.obs;let u=s.inicio,p=s.fim,g=s.droga,_=s.toxicidade,h=s.obs,f=s.grau_estad,v=s.nivel_estad,b=s.result_hcg_pre;this.$axios.post("/incluir_quimioterapia",{inicio:u,fim:p,droga:g,toxicidade:_,obs:h,grau_estad:f,nivel_estad:v,result_hcg_pre:b,id_r_mola:a}).then((a=>{r["a"].create({message:"Dados da Quimioterapia incluídos com sucesso.",color:"positive"}),i(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},async alterarQuimio(a,t){return new Promise(((i,o)=>{let s=t,e=s.inicio.substring(0,2),l=s.inicio.substring(3,5),d=s.inicio.substring(6,10);s.inicio=d+"-"+("0"+l).slice(-2)+"-"+("0"+e).slice(-2);let c=s.fim.substring(0,2),n=s.fim.substring(3,5),m=s.fim.substring(6,10);s.fim=m+"-"+("0"+n).slice(-2)+"-"+("0"+c).slice(-2),""==s.result_hcg_pre?s.result_hcg_pre=null:s.result_hcg_pre=s.result_hcg_pre,""==s.grau_estad?s.grau_estad=null:s.grau_estad=s.grau_estad,""==s.nivel_estad?s.nivel_estad=null:s.nivel_estad=s.nivel_estad,""==s.droga?s.droga=null:s.droga=s.droga,""==s.toxicidade?s.toxicidade=null:s.toxicidade=s.toxicidade,""==s.obs?s.obs=null:s.obs=s.obs;let u=s.inicio,p=s.fim,g=s.droga,_=s.toxicidade,h=s.obs,f=s.grau_estad,v=s.nivel_estad,b=s.result_hcg_pre;this.$axios.post("/alterar_quimioterapia",{inicio:u,fim:p,droga:g,toxicidade:_,obs:h,grau_estad:f,nivel_estad:v,result_hcg_pre:b,id_quimio:a}).then((a=>{r["a"].create({message:"Dados da Quimioterapia alterados com sucesso.",color:"positive"}),i(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),o(a)}))}))},carregarRegistrosMola(a){return new Promise(((t,i)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{let i=[];for(let t=0;t<a.data.resultado.length;t++)i.unshift(a.data.resultado[t]);t(i)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},carregarDadosPaciente(a){return new Promise(((t,i)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.nome_paciente=a.data.resultado[0].nome,this.cpf_paciente=a.data.resultado[0].cpf,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},async onSubmit(){void 0!=this.id_quimio&&null!=this.id_quimio?await this.alterarQuimio(this.id_quimio,this.cadastroQuimio):await this.incluirQuimio(this.id_mola,this.cadastroQuimio)},onReset(){this.cadastroQuimio.inicio="",this.cadastroQuimio.fim="",this.cadastroQuimio.result_hcg_pre="",this.cadastroQuimio.grau_estad="",this.cadastroQuimio.nivel_estad="",this.cadastroQuimio.droga="",this.cadastroQuimio.toxicidade="",this.cadastroQuimio.obs="",this.dataCalendario=this.atribuirDataCalendario()},validarData(a,t){this.popupAbrirCalendarioInicio=!1,this.popupAbrirCalendarioFim=!1;let i="",o="",s="",r=!0,e="";if("calendario"==a?"inicio"==t?(null==this.dataCalendarioInicio&&(this.dataCalendarioInicio=this.atribuirDataCalendario()),this.cadastroQuimio.inicio=this.dataCalendarioInicio):"fim"==t&&(null==this.dataCalendarioFim&&(this.dataCalendarioFim=this.atribuirDataCalendario()),this.cadastroQuimio.fim=this.dataCalendarioFim):"input"==a&&("inicio"==t?""!=this.cadastroQuimio.inicio?this.dataCalendarioInicio=this.cadastroQuimio.inicio:this.dataCalendarioInicio=this.atribuirDataCalendario():"fim"==t&&(""!=this.cadastroQuimio.fim?this.dataCalendarioFim=this.cadastroQuimio.fim:this.dataCalendarioFim=this.atribuirDataCalendario())),"inicio"==t?e=this.cadastroQuimio.inicio:"fim"==t&&(e=this.cadastroQuimio.fim),e.length>=2&&(i=e.substring(0,2),i=Number(i),(0==i||i>31)&&(r=!1),e.length>=5&&(o=e.substring(3,5),o=Number(o),(0==o||o>12)&&(r=!1),30!=i&&31!=i||2!=o||(r=!1),31!=i||4!=o&&6!=o&&9!=o&&11!=o||(r=!1)),10==e.length)){s=e.substring(6,10),s=Number(s);let a=!1;(s%4==0&&s%100!=0||s%400==0)&&(a=!0),29==i&&2==o&&0==a&&(r=!1)}"inicio"==t?(this.validaDataInicial=r,this.cadastroQuimio.inicio=e):"fim"==t&&(this.validaDataFinal=r,this.cadastroQuimio.fim=e),""!=this.cadastroQuimio.inicio&&""!=this.cadastroQuimio.fim&&this.cadastroQuimio.inicio>this.cadastroQuimio.fim?(this.data_inicio_maior=!0,this.$refs.data_inicial.validate()):(this.data_inicio_maior=!1,this.$refs.data_inicial.validate())},atribuirDataCalendario(){let a=new Date,t=a.getDate(),i=a.getMonth(),o=a.getFullYear();return("0"+t).slice(-2)+"/"+("0"+(i+1)).slice(-2)+"/"+o}}},l=e,d=i("2877"),c=i("f09f"),n=i("65c6"),m=i("6ac5"),u=i("9c40"),p=i("a370"),g=i("0378"),_=i("27f9"),h=i("0016"),f=i("24e8"),v=i("52ee"),b=i("ddd8"),x=i("7f67"),C=i("eebe"),w=i.n(C),q=Object(d["a"])(l,o,s,!1,null,null,null);t["default"]=q.exports;w()(q,"components",{QCard:c["a"],QToolbar:n["a"],QToolbarTitle:m["a"],QBtn:u["a"],QCardSection:p["a"],QForm:g["a"],QInput:_["a"],QIcon:h["a"],QDialog:f["a"],QDate:v["a"],QSelect:b["a"]}),w()(q,"directives",{ClosePopup:x["a"]})},7215:function(a,t,i){"use strict";var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-form",{staticClass:"full-width row",on:{submit:a.onSubmit,reset:a.onReset}},[i("q-input",{staticClass:"col-12 q-pa-xs",attrs:{label:"Tipo Imagem: ",readonly:""},model:{value:a.tipoSelected,callback:function(t){a.tipoSelected=t},expression:"tipoSelected"}}),i("q-uploader",{staticClass:"q-mt-xs q-pa-xs col-12 text-center",attrs:{label:"Imagem do Exame",url:a.getUrl+"upload","max-file-size":"2097152","max-files":"1",accept:".jpg, image/*,.pdf","form-fields":function(){return[{name:"tipo",value:a.tipo},{name:"id_r_mola",value:a.id_r_mola}]},"auto-upload":""},on:{rejected:a.onRejected,uploaded:a.onUploaded}})],1)},s=[],r=i("ded3"),e=i.n(r),l=(i("e6cf"),i("5319"),i("2f62")),d=i("2a19"),c={name:"cadastroImagem",data(){return{optTipo:["rx","ultrassom","tomografia","hcg","laudo ultrassom","laudo tomografia"],tipoSelected:null}},props:["id_r_mola","tipo"],watch:{id_r_mola:function(){this.cadastroImagem.id_r_mola=this.id_r_mola},tipo:function(){this.cadastroImagem.tipo=this.tipo}},computed:e()({},Object(l["c"])("principal",["getUrl"])),mounted(){this.tipoSelected=this.tipo},methods:{async onSubmit(){console.log("ID Mola",this.id_r_mola),console.log("Upload")},onReset(){this.cadastroImagem.tipo=""},onUploaded(a){let t=new String(a.xhr.response);t=t.replace(/\\/g,"");let i=t.substring(t.lastIndexOf("[")+1,t.lastIndexOf("]"));d["a"].create({message:"Imagem incluída com sucesso.",color:"positive"}),this.$emit("uploadFinalizado",i,this.tipoSelected)},onRejected(a){console.log(a);let t=a[0].failedPropValidation,i=" Erro ";switch(t){case"max-file-size":i="Tamanho máximo do arquivo 2Mb";break;case"accept":i="Arquivo deve ser uma imagem ou pdf";break}this.$q.notify({type:"negative",message:i})}}},n=c,m=i("2877"),u=i("0378"),p=i("27f9"),g=i("ee89"),_=i("eebe"),h=i.n(_),f=Object(m["a"])(n,o,s,!1,null,null,null);t["a"]=f.exports;h()(f,"components",{QForm:u["a"],QInput:p["a"],QUploader:g["a"]})},d859:function(a,t,i){"use strict";i.r(t);var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-card",[i("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[i("q-toolbar-title",[a._v("Cadastro hCG")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-form",{staticClass:"full-width row",on:{submit:function(t){return t.stopPropagation(),a.onSubmit(t)},reset:a.onReset}},[i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Nome Paciente: ")]),a._v(a._s(a.nome_paciente))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("CPF: ")]),a._v(a._s(a._f("cpf")(a.cpf_paciente)))]),i("span",{staticClass:"q-pa-xs col-xs-12 col-12 col-lg-12 text-center"},[i("b",[a._v("Número Mola:")]),a._v(" "+a._s(a.numero_mola))]),i("q-input",{staticClass:"q-pa-xs col-xs-12 col-sm-4 col-md-4 col-lg-4 col-xl-3",attrs:{dense:"",rules:[function(t){return 10==t.length&&1==a.validaDataHcg||"Digite uma data válida"}],label:"Data hCG",mask:"##/##/####"},on:{input:function(t){return a.validarData("input")}},scopedSlots:a._u([{key:"append",fn:function(){return[i("q-icon",{staticClass:"cursor-pointer",attrs:{name:"calendar_today"},on:{click:function(t){a.popupAbrirCalendario=!0}}},[i("q-dialog",{model:{value:a.popupAbrirCalendario,callback:function(t){a.popupAbrirCalendario=t},expression:"popupAbrirCalendario"}},[i("q-date",{attrs:{"first-day-of-week":"1",mask:"DD/MM/YYYY"},on:{input:function(t){return a.validarData("calendario")}},model:{value:a.dataCalendario,callback:function(t){a.dataCalendario=t},expression:"dataCalendario"}})],1)],1)]},proxy:!0}]),model:{value:a.cadastroHcg.data_hcg,callback:function(t){a.$set(a.cadastroHcg,"data_hcg",t)},expression:"cadastroHcg.data_hcg"}}),i("q-input",{ref:"resultado",staticClass:"q-pa-xs col-12 col-sm-3 col-md-3 col-lg-3 col-xl-3",attrs:{type:"number",label:"Resultado",maxlength:"7",dense:"",rules:[function(a){return a>=0&&null!=a||"Digite um resultado"}],"reactive-rules":""},on:{input:function(t){return a.validarCamposRegex(a.cadastroHcg.result_hcg,"resultado")}},model:{value:a.cadastroHcg.result_hcg,callback:function(t){a.$set(a.cadastroHcg,"result_hcg",t)},expression:"cadastroHcg.result_hcg"}}),i("q-input",{ref:"laboratorio",staticClass:"q-pa-xs col-12 col-sm-5 col-md-5 col-lg-5 col-xl-5",attrs:{label:"Laboratório","max-length":"250",dense:"",rules:[function(a){return a.length>0||"Digite o nome do laboratório"},function(a){return a.length<=250||"O nome do laboratório deve ter no máximo 250 caracteres"}],"reactive-rules":""},on:{input:function(t){return a.validarCamposRegex(a.cadastroHcg.lab_hcg,"laboratorio")}},model:{value:a.cadastroHcg.lab_hcg,callback:function(t){a.$set(a.cadastroHcg,"lab_hcg",t)},expression:"cadastroHcg.lab_hcg"}}),i("div",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroHcg.id_imagem&&null!=a.cadastroHcg.id_imagem&&""!=a.cadastroHcg.id_imagem,expression:"\n        cadastroHcg.id_imagem != undefined &&\n          cadastroHcg.id_imagem != null &&\n          cadastroHcg.id_imagem != ''\n      "}],staticClass:"col-12 q-mt-md text-center"},[i("span",[a._v("Alterar Imagem")]),i("q-btn",{attrs:{flat:"",dense:"",icon:"file_upload"},on:{click:function(t){a.popupUploadImagem=!0}}})],1),i("div",{staticClass:"col-12 text-center"},[i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroHcg.id_imagem&&null!=a.cadastroHcg.id_imagem&&""!=a.cadastroHcg.id_imagem,expression:"\n          cadastroHcg.id_imagem != undefined &&\n            cadastroHcg.id_imagem != null &&\n            cadastroHcg.id_imagem != ''\n        "}]},[i("b",[a._v("Id:")]),a._v(" \n        "+a._s(null!=a.cadastroHcg.id_imagem&&void 0!=a.cadastroHcg.id_imagem?a.cadastroHcg.id_imagem:"Não há"))]),a._v(" \n      "),i("span",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroHcg.id_imagem&&null!=a.cadastroHcg.id_imagem&&""!=a.cadastroHcg.id_imagem,expression:"\n          cadastroHcg.id_imagem != undefined &&\n            cadastroHcg.id_imagem != null &&\n            cadastroHcg.id_imagem != ''\n        "}]},[i("b",[a._v("Tipo:  ")]),a._v(" "+a._s(a.tipo_imagem))])]),i("div",{staticClass:"col-12 text-center"},[i("q-zoom",[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroHcg.id_imagem&&null!=a.cadastroHcg.id_imagem&&""!=a.cadastroHcg.id_imagem&&!a.imagemTelaCheiaHcg,expression:"\n            cadastroHcg.id_imagem != undefined &&\n              cadastroHcg.id_imagem != null &&\n              cadastroHcg.id_imagem != '' &&\n              !imagemTelaCheiaHcg\n          "}],staticClass:"photo",staticStyle:{"object-fit":"cover","max-width":"45vh",border:"3px solid","border-radius":"8px"},attrs:{src:a.url_imagem,alt:"image",id:"imagem_hcg"},on:{click:function(t){a.imagemTelaCheiaHcg=!0}}}),i("div",{staticStyle:{width:"50%",margin:"0 auto"}},[i("q-img",{directives:[{name:"show",rawName:"v-show",value:void 0!=a.cadastroHcg.id_imagem&&null!=a.cadastroHcg.id_imagem&&""!=a.cadastroHcg.id_imagem&&a.imagemTelaCheiaHcg,expression:"\n              cadastroHcg.id_imagem != undefined &&\n                cadastroHcg.id_imagem != null &&\n                cadastroHcg.id_imagem != '' &&\n                imagemTelaCheiaHcg\n            "}],staticClass:"photo",staticStyle:{width:"100%","max-width":"700px",height:"auto"},attrs:{src:a.url_imagem,alt:"image",id:"imagem_hcg"},on:{click:function(t){a.imagemTelaCheiaHcg=!1}}})],1)],1)],1),i("div",{staticClass:"col-12"},[i("UploadImagem",{directives:[{name:"show",rawName:"v-show",value:void 0==a.cadastroHcg.id_imagem||null==a.cadastroHcg.id_imagem||""==a.cadastroHcg.id_imagem,expression:"\n          cadastroHcg.id_imagem == undefined ||\n            cadastroHcg.id_imagem == null ||\n            cadastroHcg.id_imagem == ''\n        "}],attrs:{id_r_mola:a.id_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1),i("div",{staticClass:"col-12 flex flex-center"},[i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Gravar Dados",color:"primary",type:"submit"}}),i("q-btn",{directives:[{name:"show",rawName:"v-show",value:void 0==a.id_hcg||null==a.id_hcg||""==a.id_hcg,expression:"id_hcg == undefined || id_hcg == null || id_hcg == ''"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Limpar",color:"primary",type:"reset"}}),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"q-pa-xs q-ma-md text-center",attrs:{label:"Voltar",color:"primary"}})],1)],1),i("q-dialog",{model:{value:a.popupUploadImagem,callback:function(t){a.popupUploadImagem=t},expression:"popupUploadImagem"}},[i("q-card",{staticClass:"full-width row"},[i("q-toolbar",{staticClass:"col-12 bg-primary text-white"},[i("q-toolbar-title",[a._v("Upload Imagem")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-card-section",{staticClass:"col-12"},[i("UploadImagem",{attrs:{id_r_mola:a.id_mola,tipo:a.tipo_imagem},on:{uploadFinalizado:a.atualizarImagem}})],1)],1)],1)],1)},s=[],r=i("ded3"),e=i.n(r),l=(i("e6cf"),i("7215")),d=i("2f62"),c=i("2a19"),n={components:{UploadImagem:l["a"]},computed:e()({},Object(d["c"])("principal",["dadosUsuarioLogado","getUrl"])),props:["id_paciente","id_hcg","id_mola"],filters:{cpf(a){return void 0!=a&&(a=a.substring(0,3)+"."+a.substring(3,6)+"."+a.substring(6,9)+"-"+a.substring(9,11)),a}},data(){return{nome_paciente:"",cpf_paciente:"",numero_mola:"",cadastroHcg:{id_hcg:"",data_hcg:"",result_hcg:"",lab_hcg:"",id_revisor:"",revisor:"",id_cadastrante:"",cadastrante:"",id_imagem:""},url_imagem:"",dataCalendario:"",popupAbrirCalendario:!1,popupUploadImagem:!1,validaDataHcg:!0,tipo_imagem:"hcg",imagemTelaCheiaHcg:!1}},async mounted(){this.cadastroHcg.cadastrante=this.dadosUsuarioLogado.id_usuario,""!=this.id_paciente&&void 0!=this.id_paciente&&await this.carregarDadosPaciente(this.id_paciente);let a=await this.carregarRegistrosMola(this.id_paciente);for(let t=0;t<a.length;t++)this.id_mola==a[t].id_r_mola&&(this.numero_mola=this.numero_mola.concat(t+1),this.numero_mola=this.numero_mola.concat("ª"));void 0!=this.id_hcg&&null!=this.id_hcg?(await this.carregarHcg(this.id_hcg),await this.atualizarImagem(this.cadastroHcg.id_imagem)):this.dataCalendario=this.atribuirDataCalendario()},async beforeDestroy(){this.$emit("recarregarHcg")},methods:{carregarHcg(a){return new Promise(((t,i)=>{this.$axios.post("/dados_hcg",{id_hcg:a}).then((a=>{let i=a.data.resultado[0];""!=i.data_hcg?this.dataCalendario=i.data_hcg:this.dataCalendario=this.atribuirDataCalendario(),this.cadastroHcg=i,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},incluirHcg(a){let t=a,i=t.data_hcg.substring(0,2),o=t.data_hcg.substring(3,5),s=t.data_hcg.substring(6,10);t.data_hcg=s+"-"+("0"+o).slice(-2)+"-"+("0"+i).slice(-2),""==t.result_hcg?t.result_hcg=null:t.result_hcg=t.result_hcg,""==t.lab_hcg?t.lab_hcg=null:t.lab_hcg=t.lab_hcg,""==t.revisor?t.revisor=null:t.revisor=t.revisor,""==t.id_imagem?t.id_imagem=null:t.id_imagem=t.id_imagem;let r=t.data_hcg,e=t.result_hcg,l=t.lab_hcg,d=this.id_mola,n=t.id_imagem,m=this.dadosUsuarioLogado.id_usuario;return new Promise(((a,t)=>{this.$axios.post("/incluir_hcg",{data_hcg:r,result_hcg:e,lab_hcg:l,id_imagem:n,cadastrante:m,id_r_mola:d}).then((t=>{c["a"].create({message:"Dados do hCG incluídos com sucesso.",color:"positive"}),a(t.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))},alterarHcg(a,t){let i=t,o=i.data_hcg.substring(0,2),s=i.data_hcg.substring(3,5),r=i.data_hcg.substring(6,10);i.data_hcg=r+"-"+("0"+s).slice(-2)+"-"+("0"+o).slice(-2),""==i.result_hcg?i.result_hcg=null:i.result_hcg=i.result_hcg,""==i.lab_hcg?i.lab_hcg=null:i.lab_hcg=i.lab_hcg,""==i.revisor?i.revisor=null:i.revisor=i.revisor,""==i.id_imagem?i.id_imagem=null:i.id_imagem=i.id_imagem;let e=i.data_hcg,l=i.result_hcg,d=i.lab_hcg,n=i.id_imagem;return new Promise(((t,i)=>{this.$axios.post("/alterar_hcg",{data_hcg:e,result_hcg:l,lab_hcg:d,id_imagem:n,id_hcg:a}).then((a=>{c["a"].create({message:"Dados do hCG alterados com sucesso.",color:"positive"}),t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},carregarRegistrosMola(a){return new Promise(((t,i)=>{this.$axios.post("/dados_r_mola",{id_paciente:a}).then((a=>{let i=[];for(let t=0;t<a.data.resultado.length;t++)i.unshift(a.data.resultado[t]);t(i)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},carregarDadosPaciente(a){return new Promise(((t,i)=>{this.$axios.post("/dados_paciente",{id_usuario:a}).then((a=>{this.nome_paciente=a.data.resultado[0].nome,this.cpf_paciente=a.data.resultado[0].cpf,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},onSubmit(){void 0!=this.id_hcg&&null!=this.id_hcg?(this.alterarHcg(this.id_hcg,this.cadastroHcg),this.$emit("recarregarHcg")):(this.incluirHcg(this.cadastroHcg),this.$emit("recarregarHcg"))},onReset(){this.cadastroHcg.data_hcg="",this.cadastroHcg.result_hcg="",this.cadastroHcg.lab_hcg="",this.cadastroHcg.id_imagem="",this.dataCalendario=this.atribuirDataCalendario()},validarData(a){this.popupAbrirCalendario=!1;let t="",i="",o="";if(this.validaDataHcg=!0,"calendario"==a?(null==this.dataCalendario&&(this.dataCalendario=this.atribuirDataCalendario()),this.cadastroHcg.data_hcg=this.dataCalendario):"input"==a&&(""!=this.cadastroHcg.data_hcg?this.dataCalendario=this.cadastroHcg.data_hcg:this.dataCalendario=this.atribuirDataCalendario()),this.cadastroHcg.data_hcg.length>=2&&(t=this.cadastroHcg.data_hcg.substring(0,2),t=Number(t),(0==t||t>31)&&(this.validaDataHcg=!1),this.cadastroHcg.data_hcg.length>=5&&(i=this.cadastroHcg.data_hcg.substring(3,5),i=Number(i),(0==i||i>12)&&(this.validaDataHcg=!1),30!=t&&31!=t||2!=i||(this.validaDataHcg=!1),31!=t||4!=i&&6!=i&&9!=i&&11!=i||(this.validaDataHcg=!1)),10==this.cadastroHcg.data_hcg.length)){o=this.cadastroHcg.data_hcg.substring(6,10),o=Number(o);let a=!1;(o%4==0&&o%100!=0||o%400==0)&&(a=!0),29==t&&2==i&&0==a&&(this.validaDataHcg=!1);let s=new Date;o>s.getFullYear()&&(this.validaDataHcg=!1);let r=new Date(o,i-1,t);r>s&&(this.validaDataHcg=!1)}},atribuirDataCalendario(){let a=new Date,t=a.getDate(),i=a.getMonth(),o=a.getFullYear();return("0"+t).slice(-2)+"/"+("0"+(i+1)).slice(-2)+"/"+o},validarCamposRegex(a,t){let i=a.substring(0,a.length-1),o="";if("resultado"==t?o=/^[0-9.]*$/:"laboratorio"==t&&(o=/^[a-zA-Z0-9ãõáéíóúçâêôàñÃÕÁÉÍÓÚÇÂÊÔÀÑ'-\s]*$/),!o.test(a.slice(-1)))switch(t){case"resultado":this.cadastroHcg.result_hcg=i,this.$refs.resultado.$forceUpdate();break;case"laboratorio":this.cadastroHcg.lab_hcg=i,this.$refs.laboratorio.$forceUpdate();break}},atualizarImagem(a){this.cadastroHcg.id_imagem=a,this.url_imagem=this.getUrl+`arquivo/${a}`,this.popupUploadImagem=!1}}},m=n,u=i("2877"),p=i("f09f"),g=i("65c6"),_=i("6ac5"),h=i("9c40"),f=i("a370"),v=i("0378"),b=i("27f9"),x=i("0016"),C=i("24e8"),w=i("52ee"),q=i("068f"),D=i("7f67"),U=i("eebe"),T=i.n(U),y=Object(u["a"])(m,o,s,!1,null,null,null);t["default"]=y.exports;T()(y,"components",{QCard:p["a"],QToolbar:g["a"],QToolbarTitle:_["a"],QBtn:h["a"],QCardSection:f["a"],QForm:v["a"],QInput:b["a"],QIcon:x["a"],QDialog:C["a"],QDate:w["a"],QImg:q["a"]}),T()(y,"directives",{ClosePopup:D["a"]})},e043:function(a,t,i){"use strict";var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-card",[i("q-toolbar",{staticClass:"bg-primary text-white"},[i("q-toolbar-title",[a._v("Adicionar CID")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-card-section",{staticClass:"q-pt-none"},[i("q-form",{on:{submit:a.onSubmit,reset:a.onReset}},[a.id_cid?i("span",[a._v(" ID: "+a._s(a.id_cid)+" ")]):a._e(),i("q-input",{attrs:{type:"text",label:"Código da CID",rules:[function(a){return a.length>0||"Digite um CID"},function(a){return a.length<=250||"O CID deve ter no máximo 50 caracteres"}]},model:{value:a.cadastroCid.cod_cid,callback:function(t){a.$set(a.cadastroCid,"cod_cid",t)},expression:"cadastroCid.cod_cid"}}),i("q-input",{attrs:{type:"text",label:"Descrição",rules:[function(a){return a.length>0||"Digite uma Descrição"},function(a){return a.length<=250||"A descrição deve ter no máximo 250 caracteres"}]},model:{value:a.cadastroCid.descricao,callback:function(t){a.$set(a.cadastroCid,"descricao",t)},expression:"cadastroCid.descricao"}}),i("br"),i("div",{staticClass:"flex-center q-gutter-xl"},[i("q-btn",{attrs:{type:"submit",color:"primary",label:"Gravar"}})],1)],1)],1)],1)},s=[],r=(i("e6cf"),i("2a19")),e={data(){return{name:"CadastroEdicaoCid",cadastroCid:{id_cid:"",cod_cid:"",descricao:""},modalCadastroCid:!0}},async mounted(){this.cadastroCid.id_cid&&(console.log("alterar"),this.onSubmit())},props:["id_cid"],methods:{async onSubmit(){await this.incluirCid();this.$emit("acionarCarregarCid"),this.$emit("fecharPopup")},onReset(){this.cadastroCid.descricao=""},carregarDadosCid(a){return new Promise(((t,i)=>{this.$axios.post("/dados_cid",{id_cid:a}).then((a=>{console.log(a.data.resultado[0].nome),this.cadastroCid.cod=a.data.resultado[0].cod,this.cadastroCid.descricao=a.data.resultado[0].descricao,t(a.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),i(a)}))}))},incluirCid(){return new Promise(((a,t)=>{let i=this.cadastroCid;this.$axios.post("/incluir_cid",i).then((t=>{r["a"].create({message:"Cid incluída com sucesso.",color:"positive"}),a(t.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))}}},l=e,d=i("2877"),c=i("f09f"),n=i("65c6"),m=i("6ac5"),u=i("9c40"),p=i("a370"),g=i("0378"),_=i("27f9"),h=i("7f67"),f=i("eebe"),v=i.n(f),b=Object(d["a"])(l,o,s,!1,null,null,null);t["a"]=b.exports;v()(b,"components",{QCard:c["a"],QToolbar:n["a"],QToolbarTitle:m["a"],QBtn:u["a"],QCardSection:p["a"],QForm:g["a"],QInput:_["a"]}),v()(b,"directives",{ClosePopup:h["a"]})},fa32:function(a,t,i){"use strict";i.r(t);var o=function(){var a=this,t=a.$createElement,i=a._self._c||t;return i("q-card",[i("q-toolbar",{staticClass:"bg-primary text-white"},[i("q-toolbar-title",[a._v("Calendário Menstrual")]),i("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",round:"",dense:"",icon:"close"}})],1),i("q-card-section",{staticClass:"q-pt-none"},[i("q-form",{on:{submit:a.onSubmit,reset:a.onReset}},[i("q-input",{attrs:{type:"date"},model:{value:a.cadastroDum.dum,callback:function(t){a.$set(a.cadastroDum,"dum",t)},expression:"cadastroDum.dum"}}),i("br"),i("div",{staticClass:"flex-center q-gutter-xl"},[i("q-btn",{attrs:{type:"submit",color:"primary",label:"Gravar"}})],1)],1)],1)],1)},s=[],r=i("ded3"),e=i.n(r),l=(i("e6cf"),i("2f62")),d={name:"CadastroEdicaoDum",data(){return{cadastroDum:{dum:""},consultaDum:{descricao:""}}},computed:e()({},Object(l["c"])("principal",["dadosUsuarioLogado"])),props:["id_r_mola"],methods:{async onSubmit(){console.log("incluir");await this.incluirDum()},onReset(){this.cadastroDum.descricao=""},incluirDum(){return new Promise(((a,t)=>{let i=this.cadastroDum;i.cadastrante=this.dadosUsuarioLogado.id_usuario,i.id_r_mola=this.id_r_mola,this.$axios.post("/incluir_calendario",i).then((t=>{this.$emit("gravou"),a(t.data)})).catch((a=>{this.$store.dispatch("principal/verificaErro",a),t(a)}))}))}}},c=d,n=i("2877"),m=i("f09f"),u=i("65c6"),p=i("6ac5"),g=i("9c40"),_=i("a370"),h=i("0378"),f=i("27f9"),v=i("7f67"),b=i("eebe"),x=i.n(b),C=Object(n["a"])(c,o,s,!1,null,null,null);t["default"]=C.exports;x()(C,"components",{QCard:m["a"],QToolbar:u["a"],QToolbarTitle:p["a"],QBtn:g["a"],QCardSection:_["a"],QForm:h["a"],QInput:f["a"]}),x()(C,"directives",{ClosePopup:v["a"]})}}]);